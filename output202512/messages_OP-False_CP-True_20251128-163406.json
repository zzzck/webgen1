{
  "brief": [
    {
      "topic": "brief",
      "sender": "User",
      "content": "\n请创建一个包含 HTML、CSS 和 JavaScript 的**单文件（Single HTML File）**电商产品详情页。\n\n# Product Context\n我们需要为一款春节热销零食电商销售网页。\n\n品牌为 LYF 的新疆葵花籽（30g 小包装），售价为 10 包 16.9 元，网页销售场景。\n网页必须包含 4P 营销要素：产品（外观图、规格介绍、卖点文案）、价格（现价、对比价格、优惠信息）、渠道（明确的网页购买入口与购物流程）、促销（促销标签、库存或限时购买激励）。\n\n# Functional Requirements (功能需求)\n1.  实现合理的布局结构：尽量包含搜索栏目、导航栏、产品介绍、交互、详情信息等\n    可插入如下图片作为产品预览图\n     1 张大图链接“https://www.foodnext.net/dispPageBox/getFile/GetImg.aspx?FileLocation=%2FPJ-FOODNEXT%2FFiles%2F&FileName=photo-44541-i.jpg”\n    缩略图1“https://pic1.zhimg.com/v2-0a72a4246fde463055bbcd021d58d6b0_1440w.jpg?source=172ae18b”\n    缩略图2“https://www.foodnext.net/dispPageBox/getFile/GetImg.aspx?FileLocation=%2FPJ-FOODNEXT%2FFiles%2F&FileName=photo-44541-i.jpg”\n\n额外功能：\n1.营销倒计时系统 (Complex Logic)：在价格旁显示“春节限时抢购倒计时”。\n\n2. 优惠券与价格计算 (State Management)界面中间需展示两张优惠券：\nA券：满 10 减 2 元\nB券：满 20 减 5 元\n\n4. 评论区筛选器 (DOM Manipulation)\n展示评论列表。\n\n5. 模态框购物车 (UI Interaction)\n点击底部的“立即购买”按钮，不跳转，而是从底部弹出一个半透明遮罩层 + 确认面板（Slide-up Modal）。\n面板内显示：已选商品信息、最终计算后的价格。\n包含“确认支付”按钮，点击后 alert 输出最终订单信息对象。\n"
    }
  ],
  "tasks": [
    {
      "topic": "tasks",
      "sender": "TeamLeader",
      "content": {
        "available_roles": [
          "TeamLeader",
          "Engineer"
        ],
        "tasks": [
          {
            "role": "TeamLeader",
            "tasks": [
              "梳理客户需求，确认产品类型为春节热销零食 LYF 新疆葵花籽（30g 小包装，10 包 16.9 元）",
              "识别交付物为单文件 HTML 页面，包含 HTML、CSS、JavaScript",
              "确保页面包含4P营销要素：产品（外观图、规格、卖点文案）、价格（现价、对比价、优惠信息）、渠道（购买入口、购物流程）、促销（促销标签、库存或限时激励）",
              "拆解功能需求：布局结构（搜索栏目、导航栏、产品介绍、缩略图预览、详情信息）、营销倒计时系统（春节限时抢购）、优惠券与价格计算（A券满10减2元，B券满20减5元）、评论区筛选器、模态框购物车（点击立即购买触发遮罩层和确认面板，展示商品信息与最终价格，确认支付alert订单对象）",
              "分配实现任务给 Engineer 完成全页面开发"
            ]
          },
          {
            "role": "Engineer",
            "tasks": [
              "编写单个 HTML 文件，内联 CSS 和 JavaScript，确保自包含",
              "实现页面布局：搜索栏、导航栏、产品展示区（大图及两张缩略图）、规格介绍、卖点文案、价格区（现价、对比价、优惠信息）",
              "实现营销倒计时系统，在价格旁动态显示春节限时抢购剩余时间",
              "实现优惠券展示与选择，完成满减逻辑计算最终价格",
              "实现评论区及筛选功能，通过 DOM 操作过滤评论",
              "实现模态框购物车：点击立即购买按钮显示从底部滑出面板及半透明遮罩层，包含商品信息、最终价格、确认支付按钮，点击确认支付输出订单信息对象到 alert"
            ]
          }
        ]
      }
    }
  ],
  "html": [
    {
      "topic": "html",
      "sender": "Engineer",
      "content": "<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n<meta charset=\"UTF-8\">\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n<title>LYF 新疆葵花籽 - 春节热销</title>\n<style>\nbody {font-family: Arial, sans-serif; margin:0; background:#f9f9f9;}\nheader {background:#d32f2f; color:#fff; padding:10px;}\nheader h1 {margin:0; font-size:20px;}\n.search-bar {padding:10px; background:#fff;}\n.search-bar input {width:80%; padding:8px;}\nnav {background:#f44336; padding:10px;}\nnav a {color:#fff; margin-right:15px; text-decoration:none;}\n.container {display:flex; flex-wrap:wrap; padding:15px;}\n.product-images {flex:1; min-width:250px; padding:10px;}\n.product-images img {max-width:100%; border:1px solid #ccc; margin-bottom:10px;}\n.thumbnails img {width:70px; height:70px; cursor:pointer; margin-right:5px; border:2px solid transparent;}\n.thumbnails img.active {border-color:#f44336;}\n.product-info {flex:1; min-width:250px; padding:10px;}\n.price {color:#d32f2f; font-size:24px;}\n.old-price {text-decoration:line-through; color:#777; margin-left:10px;}\n.countdown {color:#f44336; font-weight:bold;}\n.coupons {margin:15px 0;}\n.coupon {background:#fff3cd; padding:10px; margin-right:10px; display:inline-block; cursor:pointer; border:1px solid #ffeeba;}\n.coupon.active {background:#ffe082;}\n.btn-buy {background:#f44336; color:#fff; padding:15px; text-align:center; font-size:18px; position:fixed; bottom:0; left:0; right:0; cursor:pointer;}\n.details, .comments {background:#fff; padding:15px; margin-top:10px;}\n.comments-filter {margin-bottom:10px;}\n.modal-overlay {position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.5); display:none;}\n.modal {position:fixed; bottom:-300px; left:0; right:0; background:#fff; padding:20px; transition:bottom 0.3s;}\n.modal.show {bottom:0;}\n.modal h2 {margin-top:0;}\n.modal .btn-confirm {background:#4caf50; color:#fff; padding:10px; text-align:center; margin-top:15px; cursor:pointer;}\n</style>\n</head>\n<body>\n<header>\n    <h1>LYF 新疆葵花籽 (春节热销)</h1>\n</header>\n<div class=\"search-bar\">\n    <input type=\"text\" placeholder=\"搜索商品...\">\n    <button>搜索</button>\n</div>\n<nav>\n    <a href=\"#\">首页</a>\n    <a href=\"#\">零食</a>\n    <a href=\"#\">坚果</a>\n    <a href=\"#\">促销</a>\n</nav>\n<div class=\"container\">\n    <div class=\"product-images\">\n        <img id=\"mainImage\" src=\"https://www.foodnext.net/dispPageBox/getFile/GetImg.aspx?FileLocation=%2FPJ-FOODNEXT%2FFiles%2F&FileName=photo-44541-i.jpg\" alt=\"新疆葵花籽\">\n        <div class=\"thumbnails\">\n            <img src=\"https://pic1.zhimg.com/v2-0a72a4246fde463055bbcd021d58d6b0_1440w.jpg?source=172ae18b\" data-src=\"https://pic1.zhimg.com/v2-0a72a4246fde463055bbcd021d58d6b0_1440w.jpg?source=172ae18b\" class=\"active\">\n            <img src=\"https://www.foodnext.net/dispPageBox/getFile/GetImg.aspx?FileLocation=%2FPJ-FOODNEXT%2FFiles%2F&FileName=photo-44541-i.jpg\" data-src=\"https://www.foodnext.net/dispPageBox/getFile/GetImg.aspx?FileLocation=%2FPJ-FOODNEXT%2FFiles%2F&FileName=photo-44541-i.jpg\">\n        </div>\n    </div>\n    <div class=\"product-info\">\n        <h2>LYF 新疆葵花籽（30g 小包装，10包）</h2>\n        <p>吐鲁番优质葵瓜子，颗粒饱满，口感醇香，春节必备零食。</p>\n        <div>\n            <span class=\"price\">￥16.9</span>\n            <span class=\"old-price\">￥22.9</span>\n        </div>\n        <div class=\"countdown\">春节限时抢购剩余：<span id=\"countdownTimer\"></span></div>\n        <div class=\"coupons\">\n            <div class=\"coupon\" data-type=\"A\" data-min=\"10\" data-discount=\"2\">A券：满10减2元</div>\n            <div class=\"coupon\" data-type=\"B\" data-min=\"20\" data-discount=\"5\">B券：满20减5元</div>\n        </div>\n        <p>库存充足 | 促销标签：节日特惠</p>\n    </div>\n</div>\n<div class=\"details\">\n    <h3>产品详情</h3>\n    <p>品牌：LYF<br>产地：新疆<br>配料：优质葵花籽<br>储存方法：请置于阴凉干燥处</p>\n</div>\n<div class=\"comments\">\n    <h3>用户评论</h3>\n    <div class=\"comments-filter\">\n        <select id=\"filterSelect\">\n            <option value=\"all\">全部</option>\n            <option value=\"good\">好评</option>\n            <option value=\"medium\">中评</option>\n            <option value=\"bad\">差评</option>\n        </select>\n    </div>\n    <ul id=\"commentsList\">\n        <li data-type=\"good\">好评：味道很香，颗粒大！</li>\n        <li data-type=\"medium\">中评：包装有点松散</li>\n        <li data-type=\"bad\">差评：有几颗坏籽</li>\n        <li data-type=\"good\">好评：非常适合过年佐餐</li>\n    </ul>\n</div>\n<div class=\"btn-buy\" id=\"btnBuy\">立即购买</div>\n\n<div class=\"modal-overlay\" id=\"modalOverlay\"></div>\n<div class=\"modal\" id=\"modalCart\">\n    <h2>确认订单</h2>\n    <p id=\"orderInfo\"></p>\n    <div class=\"btn-confirm\" id=\"btnConfirm\">确认支付</div>\n</div>\n\n<script>\n// 切换缩略图\ndocument.querySelectorAll('.thumbnails img').forEach(img => {\n    img.addEventListener('click', () => {\n        document.getElementById('mainImage').src = img.dataset.src;\n        document.querySelectorAll('.thumbnails img').forEach(th => th.classList.remove('active'));\n        img.classList.add('active');\n    });\n});\n\n// 倒计时\nfunction startCountdown(endTime) {\n    function update() {\n        let now = new Date();\n        let diff = endTime - now;\n        if (diff <= 0) {\n            document.getElementById('countdownTimer').textContent = \"已结束\";\n            clearInterval(timer);\n            return;\n        }\n        let h = Math.floor(diff / 1000 / 60 / 60);\n        let m = Math.floor((diff / 1000 / 60) % 60);\n        let s = Math.floor((diff / 1000) % 60);\n        document.getElementById('countdownTimer').textContent = `${h}小时${m}分${s}秒`;\n    }\n    update();\n    let timer = setInterval(update, 1000);\n}\n// 设置截止时间为今日23:59\nlet endOfDay = new Date();\nendOfDay.setHours(23,59,59,999);\nstartCountdown(endOfDay);\n\n// 优惠券选择\nlet selectedCoupon = null;\ndocument.querySelectorAll('.coupon').forEach(c => {\n    c.addEventListener('click', () => {\n        document.querySelectorAll('.coupon').forEach(cc => cc.classList.remove('active'));\n        c.classList.add('active');\n        selectedCoupon = {\n            type: c.dataset.type,\n            min: parseFloat(c.dataset.min),\n            discount: parseFloat(c.dataset.discount)\n        };\n    });\n});\n\n// 评论过滤\ndocument.getElementById('filterSelect').addEventListener('change', function(){\n    let val = this.value;\n    document.querySelectorAll('#commentsList li').forEach(li => {\n        if (val === 'all' || li.dataset.type === val){\n            li.style.display = '';\n        } else {\n            li.style.display = 'none';\n        }\n    });\n});\n\n// 购买按钮触发模态\ndocument.getElementById('btnBuy').addEventListener('click', () => {\n    let basePrice = 16.9;\n    let finalPrice = basePrice;\n    if (selectedCoupon && basePrice >= selectedCoupon.min){\n        finalPrice = basePrice - selectedCoupon.discount;\n    }\n    document.getElementById('orderInfo').textContent = `商品：LYF 新疆葵花籽 | 原价 ￥${basePrice.toFixed(2)} | 优惠后价格 ￥${finalPrice.toFixed(2)}`;\n    document.getElementById('modalOverlay').style.display = 'block';\n    document.getElementById('modalCart').classList.add('show');\n});\n\n// 关闭模态 overlay 点击\ndocument.getElementById('modalOverlay').addEventListener('click', () => {\n    document.getElementById('modalOverlay').style.display = 'none';\n    document.getElementById('modalCart').classList.remove('show');\n});\n\n// 确认支付\ndocument.getElementById('btnConfirm').addEventListener('click', () => {\n    let basePrice = 16.9;\n    let finalPrice = basePrice;\n    let couponType = null;\n    if (selectedCoupon && basePrice >= selectedCoupon.min){\n        finalPrice = basePrice - selectedCoupon.discount;\n        couponType = selectedCoupon.type;\n    }\n    let order = {\n        product: \"LYF 新疆葵花籽（30g 小包装，10包）\",\n        quantity: 1,\n        basePrice: basePrice,\n        coupon: couponType,\n        finalPrice: finalPrice\n    };\n    alert(JSON.stringify(order, null, 2));\n    document.getElementById('modalOverlay').style.display = 'none';\n    document.getElementById('modalCart').classList.remove('show');\n});\n</script>\n</body>\n</html>"
    }
  ]
}