{
  "brief": [
    {
      "topic": "brief",
      "sender": "User",
      "content": "\nä¸ºç½‘ç«™åˆ›å»ºä¸€ä¸ªå“åº”å¼ä¸”è§†è§‰æ•ˆæœå¸å¼•äººçš„ç”µå•†äº§å“é”€å”®é¡µé¢å°éƒ¨ä»¶ã€‚\nç”¨æˆ·åº”èƒ½å¤Ÿæµè§ˆå•†å“åˆ—è¡¨ã€æŸ¥çœ‹å•†å“è¯¦æƒ…ã€é€‰æ‹©æ•°é‡å¹¶åŠ å…¥è´­ç‰©è½¦ï¼Œä»¥åŠä»è´­ç‰©è½¦ä¸­åˆ é™¤å•†å“ã€‚é¡µé¢åº”æ”¯æŒæ˜¾ç¤ºå•†å“ä»·æ ¼ã€æŠ˜æ‰£ä¿¡æ¯ã€åº“å­˜çŠ¶æ€å’ŒæŒ‰åˆ†ç±»æµè§ˆç­‰åŠŸèƒ½ã€‚\næ‚¨è¿˜å¯ä»¥æ·»åŠ ä»»ä½•å…¶ä»–åˆ›æ„åŠŸèƒ½æ¥æé«˜è½¬åŒ–ç‡å’Œè¶£å‘³æ€§ï¼Œä¾‹å¦‚é™æ—¶å€’è®¡æ—¶ã€çƒ­é”€æ ‡è®°æˆ–ç®€æ˜“è®¢å•æ‘˜è¦ã€‚\nä»…ä½¿ç”¨ HTMLã€CSS å’Œ JavaScript â€” ä¸è¦ä½¿ç”¨ Vueã€React æˆ–ä»»ä½•ç¬¬ä¸‰æ–¹åº“ã€‚ä½¿ç”¨ localStorage å­˜å‚¨è´­ç‰©è½¦ç­‰æ•°æ®ï¼Œç¡®ä¿ä¿¡æ¯åœ¨é¡µé¢åˆ·æ–°åä»èƒ½ä¿ç•™ã€‚ä¿æŒæ•´ä½“è®¾è®¡ç®€æ´ã€ç”¨æˆ·å‹å¥½ä¸”å¼•äººå…¥èƒœã€‚\n"
    }
  ],
  "tasks": [
    {
      "topic": "tasks",
      "sender": "TeamLeader",
      "content": {
        "available_roles": [
          "TeamLeader",
          "Engineer"
        ],
        "tasks": [
          {
            "role": "TeamLeader",
            "tasks": [
              "æ¢³ç†ç”µå•†å°éƒ¨ä»¶éœ€æ±‚ï¼ˆæµè§ˆã€è´­ç‰©è½¦ã€æœ¬åœ°å­˜å‚¨ã€ä¿ƒé”€å…ƒç´ ï¼‰",
              "æ˜ç¡®äº¤ä»˜æ ‡å‡†ï¼ˆçº¯HTML/CSS/JSï¼Œå“åº”å¼è®¾è®¡ï¼Œæ— æ¡†æ¶ï¼‰"
            ]
          },
          {
            "role": "Engineer",
            "tasks": [
              "è®¾è®¡HTMLç»“æ„ï¼ˆå•†å“ç½‘æ ¼ã€è¯¦æƒ…å¼¹çª—ã€è´­ç‰©è½¦ä¾§è¾¹æ /æ¨¡æ€æ¡†ï¼‰",
              "ç¼–å†™CSSæ ·å¼ï¼ˆå“åº”å¼å¸ƒå±€ã€è§†è§‰ç¾åŒ–ã€äº¤äº’åŠ¨ç”»ã€é™æ—¶/çƒ­é”€æ ‡è®°æ ·å¼ï¼‰",
              "å®ç°JavaScripté€»è¾‘ï¼ˆMockæ•°æ®ç”Ÿæˆã€å•†å“æ¸²æŸ“ã€åˆ†ç±»ç­›é€‰ã€è´­ç‰©è½¦å¢åˆ ã€localStorageæ•°æ®æŒä¹…åŒ–ï¼‰"
            ]
          }
        ]
      }
    }
  ],
  "html": [
    {
      "topic": "html",
      "sender": "Engineer",
      "content": "<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>æç®€ç”µå•†å°éƒ¨ä»¶</title>\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css\" rel=\"stylesheet\">\n    <style>\n        :root {\n            --primary: #2563eb;\n            --primary-dark: #1e40af;\n            --secondary: #f3f4f6;\n            --text-main: #1f2937;\n            --text-light: #6b7280;\n            --danger: #ef4444;\n            --success: #10b981;\n            --warning: #f59e0b;\n            --white: #ffffff;\n            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n            --radius: 8px;\n        }\n\n        * {\n            box-sizing: border-box;\n            margin: 0;\n            padding: 0;\n            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\n        }\n\n        body {\n            background-color: #f9fafb;\n            color: var(--text-main);\n            padding-bottom: 50px;\n        }\n\n        /* Header */\n        header {\n            background: var(--white);\n            padding: 1rem 2rem;\n            position: sticky;\n            top: 0;\n            z-index: 100;\n            box-shadow: var(--shadow);\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n        }\n\n        .logo {\n            font-size: 1.5rem;\n            font-weight: 800;\n            color: var(--primary);\n        }\n\n        .cart-icon {\n            position: relative;\n            cursor: pointer;\n            font-size: 1.2rem;\n            transition: transform 0.2s;\n        }\n\n        .cart-icon:hover {\n            transform: scale(1.1);\n        }\n\n        .cart-count {\n            position: absolute;\n            top: -8px;\n            right: -8px;\n            background: var(--danger);\n            color: white;\n            border-radius: 50%;\n            width: 20px;\n            height: 20px;\n            font-size: 0.75rem;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            font-weight: bold;\n        }\n\n        /* Banner / Promo */\n        .promo-banner {\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            color: white;\n            padding: 2rem;\n            text-align: center;\n            margin-bottom: 2rem;\n        }\n\n        .countdown {\n            font-size: 1.2rem;\n            font-weight: bold;\n            margin-top: 0.5rem;\n            background: rgba(255,255,255,0.2);\n            display: inline-block;\n            padding: 5px 15px;\n            border-radius: 20px;\n        }\n\n        /* Container */\n        .container {\n            max-width: 1200px;\n            margin: 0 auto;\n            padding: 0 1rem;\n        }\n\n        /* Filters */\n        .filters {\n            display: flex;\n            gap: 1rem;\n            margin-bottom: 2rem;\n            flex-wrap: wrap;\n            justify-content: center;\n        }\n\n        .filter-btn {\n            padding: 8px 16px;\n            border: 1px solid #e5e7eb;\n            background: var(--white);\n            border-radius: 20px;\n            cursor: pointer;\n            transition: all 0.3s;\n        }\n\n        .filter-btn.active, .filter-btn:hover {\n            background: var(--primary);\n            color: white;\n            border-color: var(--primary);\n        }\n\n        /* Product Grid */\n        .product-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));\n            gap: 2rem;\n        }\n\n        .product-card {\n            background: var(--white);\n            border-radius: var(--radius);\n            overflow: hidden;\n            box-shadow: var(--shadow);\n            transition: transform 0.3s, box-shadow 0.3s;\n            position: relative;\n            display: flex;\n            flex-direction: column;\n        }\n\n        .product-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n        }\n\n        /* Badges */\n        .badge {\n            position: absolute;\n            top: 10px;\n            left: 10px;\n            padding: 4px 8px;\n            border-radius: 4px;\n            font-size: 0.75rem;\n            font-weight: bold;\n            color: white;\n            z-index: 2;\n        }\n\n        .badge-hot { background: var(--danger); }\n        .badge-sale { background: var(--warning); }\n\n        .product-img-container {\n            height: 200px;\n            overflow: hidden;\n            position: relative;\n            background: #eee;\n        }\n\n        .product-img {\n            width: 100%;\n            height: 100%;\n            object-fit: cover;\n            transition: transform 0.5s;\n        }\n\n        .product-card:hover .product-img {\n            transform: scale(1.05);\n        }\n\n        .product-info {\n            padding: 1.5rem;\n            flex-grow: 1;\n            display: flex;\n            flex-direction: column;\n        }\n\n        .product-category {\n            font-size: 0.8rem;\n            color: var(--text-light);\n            text-transform: uppercase;\n            letter-spacing: 1px;\n            margin-bottom: 0.5rem;\n        }\n\n        .product-title {\n            font-size: 1.1rem;\n            font-weight: 600;\n            margin-bottom: 0.5rem;\n            color: var(--text-main);\n        }\n\n        .price-container {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n            margin-bottom: 0.5rem;\n        }\n\n        .current-price {\n            font-size: 1.25rem;\n            font-weight: bold;\n            color: var(--primary);\n        }\n\n        .old-price {\n            text-decoration: line-through;\n            color: var(--text-light);\n            font-size: 0.9rem;\n        }\n\n        .stock-status {\n            font-size: 0.85rem;\n            margin-bottom: 1rem;\n        }\n\n        .stock-low { color: var(--danger); }\n        .stock-ok { color: var(--success); }\n\n        .card-actions {\n            margin-top: auto;\n            display: flex;\n            gap: 0.5rem;\n        }\n\n        .btn {\n            padding: 0.6rem 1rem;\n            border: none;\n            border-radius: var(--radius);\n            cursor: pointer;\n            font-weight: 600;\n            transition: background 0.3s;\n            flex: 1;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            gap: 5px;\n        }\n\n        .btn-primary {\n            background: var(--primary);\n            color: white;\n        }\n\n        .btn-primary:hover {\n            background: var(--primary-dark);\n        }\n\n        .btn-outline {\n            background: transparent;\n            border: 1px solid var(--primary);\n            color: var(--primary);\n        }\n\n        .btn-outline:hover {\n            background: #eff6ff;\n        }\n\n        /* Cart Sidebar */\n        .cart-overlay {\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: rgba(0,0,0,0.5);\n            z-index: 998;\n            opacity: 0;\n            visibility: hidden;\n            transition: all 0.3s;\n        }\n\n        .cart-overlay.open {\n            opacity: 1;\n            visibility: visible;\n        }\n\n        .cart-sidebar {\n            position: fixed;\n            top: 0;\n            right: -400px;\n            width: 380px;\n            height: 100%;\n            background: white;\n            z-index: 999;\n            box-shadow: -5px 0 15px rgba(0,0,0,0.1);\n            transition: right 0.3s ease-in-out;\n            display: flex;\n            flex-direction: column;\n        }\n\n        .cart-sidebar.open {\n            right: 0;\n        }\n\n        .cart-header {\n            padding: 1.5rem;\n            border-bottom: 1px solid var(--secondary);\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n        }\n\n        .close-cart {\n            font-size: 1.5rem;\n            cursor: pointer;\n            color: var(--text-light);\n        }\n\n        .cart-items {\n            flex-grow: 1;\n            overflow-y: auto;\n            padding: 1.5rem;\n        }\n\n        .cart-item {\n            display: flex;\n            gap: 1rem;\n            margin-bottom: 1.5rem;\n            border-bottom: 1px solid #f0f0f0;\n            padding-bottom: 1rem;\n        }\n\n        .cart-item img {\n            width: 70px;\n            height: 70px;\n            object-fit: cover;\n            border-radius: 4px;\n        }\n\n        .cart-item-details {\n            flex-grow: 1;\n        }\n\n        .cart-item-title {\n            font-size: 0.95rem;\n            font-weight: 600;\n            margin-bottom: 0.25rem;\n        }\n\n        .cart-item-price {\n            color: var(--text-light);\n            font-size: 0.9rem;\n        }\n\n        .cart-controls {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n            margin-top: 0.5rem;\n        }\n\n        .qty-btn {\n            width: 24px;\n            height: 24px;\n            background: var(--secondary);\n            border: none;\n            border-radius: 4px;\n            cursor: pointer;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n\n        .remove-btn {\n            color: var(--danger);\n            font-size: 0.8rem;\n            cursor: pointer;\n            margin-left: auto;\n        }\n\n        .cart-footer {\n            padding: 1.5rem;\n            background: var(--secondary);\n            border-top: 1px solid #e5e7eb;\n        }\n\n        .cart-total {\n            display: flex;\n            justify-content: space-between;\n            font-size: 1.2rem;\n            font-weight: bold;\n            margin-bottom: 1rem;\n        }\n\n        /* Modal */\n        .modal {\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: rgba(0,0,0,0.6);\n            z-index: 1000;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            opacity: 0;\n            visibility: hidden;\n            transition: all 0.3s;\n            padding: 1rem;\n        }\n\n        .modal.open {\n            opacity: 1;\n            visibility: visible;\n        }\n\n        .modal-content {\n            background: white;\n            width: 100%;\n            max-width: 800px;\n            border-radius: var(--radius);\n            overflow: hidden;\n            display: flex;\n            flex-direction: column;\n            position: relative;\n            animation: slideUp 0.3s ease;\n        }\n\n        @media (min-width: 768px) {\n            .modal-content {\n                flex-direction: row;\n                height: 500px;\n            }\n            .modal-img {\n                width: 50%;\n            }\n            .modal-details {\n                width: 50%;\n                overflow-y: auto;\n            }\n        }\n\n        @keyframes slideUp {\n            from { transform: translateY(50px); opacity: 0; }\n            to { transform: translateY(0); opacity: 1; }\n        }\n\n        .modal-img {\n            background: #eee;\n            position: relative;\n            min-height: 250px;\n        }\n\n        .modal-img img {\n            width: 100%;\n            height: 100%;\n            object-fit: cover;\n            position: absolute;\n        }\n\n        .modal-details {\n            padding: 2rem;\n        }\n\n        .close-modal {\n            position: absolute;\n            top: 15px;\n            right: 15px;\n            background: rgba(255,255,255,0.8);\n            width: 30px;\n            height: 30px;\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            cursor: pointer;\n            z-index: 5;\n        }\n\n        /* Mobile Responsive Tweaks */\n        @media (max-width: 480px) {\n            .cart-sidebar {\n                width: 100%;\n                right: -100%;\n            }\n            .btn {\n                font-size: 0.9rem;\n                padding: 0.5rem;\n            }\n        }\n\n        /* Notification Toast */\n        .toast {\n            position: fixed;\n            bottom: 20px;\n            left: 50%;\n            transform: translateX(-50%) translateY(100px);\n            background: var(--text-main);\n            color: white;\n            padding: 12px 24px;\n            border-radius: 50px;\n            box-shadow: 0 4px 12px rgba(0,0,0,0.2);\n            z-index: 2000;\n            transition: transform 0.3s;\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n        .toast.show {\n            transform: translateX(-50%) translateY(0);\n        }\n    </style>\n</head>\n<body>\n\n    <!-- Notification Toast -->\n    <div id=\"toast\" class=\"toast\">\n        <i class=\"fas fa-check-circle\" style=\"color: var(--success);\"></i>\n        <span id=\"toast-msg\">å·²åŠ å…¥è´­ç‰©è½¦</span>\n    </div>\n\n    <!-- Header -->\n    <header>\n        <div class=\"logo\">CubeShop<span style=\"color: var(--text-main)\">.</span></div>\n        <div class=\"cart-icon\" onclick=\"toggleCart()\">\n            <i class=\"fas fa-shopping-bag\"></i>\n            <div class=\"cart-count\" id=\"cart-count\">0</div>\n        </div>\n    </header>\n\n    <!-- Promo Banner -->\n    <div class=\"promo-banner\">\n        <h2>ğŸ”¥ é™æ—¶é—ªè´­ - å…¨åœºäº”æŠ˜èµ·</h2>\n        <p>ç²¾é€‰å•†å“é™æ—¶ç‰¹æƒ ï¼Œæ‰‹æ…¢æ— ï¼</p>\n        <div class=\"countdown\" id=\"countdown\">02:15:43</div>\n    </div>\n\n    <!-- Main Content -->\n    <div class=\"container\">\n        <!-- Filters -->\n        <div class=\"filters\" id=\"filters\">\n            <button class=\"filter-btn active\" data-cat=\"all\">å…¨éƒ¨å•†å“</button>\n            <button class=\"filter-btn\" data-cat=\"electronics\">æ•°ç äº§å“</button>\n            <button class=\"filter-btn\" data-cat=\"fashion\">æ½®æµæœé¥°</button>\n            <button class=\"filter-btn\" data-cat=\"home\">å®¶å±…ç”Ÿæ´»</button>\n        </div>\n\n        <!-- Product Grid -->\n        <div class=\"product-grid\" id=\"product-grid\">\n            <!-- Products rendered via JS -->\n        </div>\n    </div>\n\n    <!-- Cart Sidebar -->\n    <div class=\"cart-overlay\" id=\"cart-overlay\" onclick=\"toggleCart()\"></div>\n    <div class=\"cart-sidebar\" id=\"cart-sidebar\">\n        <div class=\"cart-header\">\n            <h3>æˆ‘çš„è´­ç‰©è½¦</h3>\n            <div class=\"close-cart\" onclick=\"toggleCart()\">&times;</div>\n        </div>\n        <div class=\"cart-items\" id=\"cart-items\">\n            <!-- Cart items rendered via JS -->\n        </div>\n        <div class=\"cart-footer\">\n            <div class=\"cart-total\">\n                <span>æ€»è®¡:</span>\n                <span id=\"cart-total-price\">Â¥0.00</span>\n            </div>\n            <button class=\"btn btn-primary\" style=\"width: 100%\" onclick=\"alert('æ„Ÿè°¢æ‚¨çš„æ¨¡æ‹Ÿè´­ä¹°ï¼')\">ç«‹å³ç»“ç®—</button>\n        </div>\n    </div>\n\n    <!-- Product Details Modal -->\n    <div class=\"modal\" id=\"product-modal\">\n        <div class=\"modal-content\">\n            <div class=\"close-modal\" onclick=\"closeModal()\">&times;</div>\n            <div class=\"modal-img\">\n                <img id=\"modal-img\" src=\"\" alt=\"\">\n                <span class=\"badge badge-sale\" id=\"modal-badge\" style=\"display:none;\">SALE</span>\n            </div>\n            <div class=\"modal-details\">\n                <p class=\"product-category\" id=\"modal-category\">Category</p>\n                <h2 style=\"margin-bottom:1rem;\" id=\"modal-title\">Product Title</h2>\n                <p style=\"color: var(--text-light); margin-bottom: 1.5rem; line-height: 1.6;\" id=\"modal-desc\">\n                    Description goes here.\n                </p>\n                <div class=\"price-container\">\n                    <span class=\"current-price\" id=\"modal-price\">Â¥99.00</span>\n                    <span class=\"old-price\" id=\"modal-old-price\">Â¥129.00</span>\n                </div>\n                <p class=\"stock-status\" id=\"modal-stock\">åº“å­˜å……è¶³</p>\n                \n                <div style=\"margin-top: 2rem;\">\n                    <button class=\"btn btn-primary\" id=\"modal-add-btn\" style=\"width: 100%; padding: 1rem;\">åŠ å…¥è´­ç‰©è½¦</button>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script>\n        // --- 1. Mock Data ---\n        const products = [\n            {\n                id: 1,\n                name: \"æ— çº¿é™å™ªè€³æœº Pro\",\n                category: \"electronics\",\n                price: 1299.00,\n                oldPrice: 1599.00,\n                image: \"https://placehold.co/600x600/252f3f/FFF?text=Headphones\",\n                stock: 12,\n                isHot: true,\n                isSale: true,\n                desc: \"æ‹¥æœ‰é¡¶çº§çš„ä¸»åŠ¨é™å™ªåŠŸèƒ½ï¼Œ30å°æ—¶è¶…é•¿ç»­èˆªï¼Œå¸¦æ¥èº«ä¸´å…¶å¢ƒçš„å¬è§‰ä½“éªŒã€‚\"\n            },\n            {\n                id: 2,\n                name: \"å¤å¤æœºæ¢°é”®ç›˜\",\n                category: \"electronics\",\n                price: 499.00,\n                oldPrice: null,\n                image: \"https://placehold.co/600x600/3b82f6/FFF?text=Keyboard\",\n                stock: 3,\n                isHot: true,\n                isSale: false,\n                desc: \"é’è½´æ‰‹æ„Ÿï¼Œå…¨é”®æ— å†²ï¼ŒRGBèƒŒå…‰ï¼Œä¸“ä¸ºæ¸¸æˆå’Œæ‰“å­—å‘çƒ§å‹è®¾è®¡ã€‚\"\n            },\n            {\n                id: 3,\n                name: \"çº¯æ£‰ä¼‘é—²Tæ¤\",\n                category: \"fashion\",\n                price: 89.00,\n                oldPrice: 129.00,\n                image: \"https://placehold.co/600x600/10b981/FFF?text=T-Shirt\",\n                stock: 50,\n                isHot: false,\n                isSale: true,\n                desc: \"100%çº¯æ£‰é¢æ–™ï¼Œé€æ°”èˆ’é€‚ï¼Œç®€çº¦è®¾è®¡ï¼Œç™¾æ­æ—¶å°šã€‚\"\n            },\n            {\n                id: 4,\n                name: \"æ™ºèƒ½ä¿æ¸©æ¯\",\n                category: \"home\",\n                price: 159.00,\n                oldPrice: null,\n                image: \"https://placehold.co/600x600/f59e0b/FFF?text=Smart+Cup\",\n                stock: 8,\n                isHot: false,\n                isSale: false,\n                desc: \"LEDæ¸©åº¦æ˜¾ç¤ºï¼Œ24å°æ—¶é•¿æ•ˆä¿æ¸©ï¼Œé£Ÿå“çº§ä¸é”ˆé’¢æè´¨ã€‚\"\n            },\n            {\n                id: 5,\n                name: \"æç®€åŒè‚©åŒ…\",\n                category: \"fashion\",\n                price: 299.00,\n                oldPrice: 399.00,\n                image: \"https://placehold.co/600x600/6366f1/FFF?text=Backpack\",\n                stock: 15,\n                isHot: false,\n                isSale: true,\n                desc: \"é˜²æ°´å°¼é¾™æè´¨ï¼Œå¤šéš”å±‚æ”¶çº³ï¼Œå¯å®¹çº³15å¯¸ç¬”è®°æœ¬ç”µè„‘ã€‚\"\n            },\n            {\n                id: 6,\n                name: \"é¦™è–°åŠ æ¹¿å™¨\",\n                category: \"home\",\n                price: 128.00,\n                oldPrice: null,\n                image: \"https://placehold.co/600x600/ec4899/FFF?text=Diffuser\",\n                stock: 2,\n                isHot: true,\n                isSale: false,\n                desc: \"é™éŸ³è¿è¡Œï¼Œä¸ƒå½©æ°›å›´ç¯ï¼Œçº³ç±³çº§é›¾åŒ–ï¼Œç¼“è§£å¹²ç‡¥ã€‚\"\n            }\n        ];\n\n        // --- 2. State Management ---\n        let cart = JSON.parse(localStorage.getItem('cart')) || [];\n        \n        // --- 3. Logic ---\n\n        // Init\n        document.addEventListener('DOMContentLoaded', () => {\n            renderProducts('all');\n            updateCartUI();\n            startCountdown();\n        });\n\n        // Countdown Logic\n        function startCountdown() {\n            let time = 2 * 60 * 60 + 15 * 60 + 43; // 2h 15m 43s\n            const el = document.getElementById('countdown');\n            setInterval(() => {\n                if (time <= 0) return;\n                time--;\n                const h = Math.floor(time / 3600).toString().padStart(2, '0');\n                const m = Math.floor((time % 3600) / 60).toString().padStart(2, '0');\n                const s = (time % 60).toString().padStart(2, '0');\n                el.textContent = `${h}:${m}:${s}`;\n            }, 1000);\n        }\n\n        // Render Grid\n        function renderProducts(filterCategory) {\n            const grid = document.getElementById('product-grid');\n            grid.innerHTML = '';\n\n            const filtered = filterCategory === 'all' \n                ? products \n                : products.filter(p => p.category === filterCategory);\n\n            filtered.forEach(p => {\n                const discount = p.oldPrice ? Math.round(((p.oldPrice - p.price) / p.oldPrice) * 100) : 0;\n                const stockHtml = p.stock < 5 \n                    ? `<div class=\"stock-status stock-low\"><i class=\"fas fa-exclamation-circle\"></i> ä»…å‰© ${p.stock} ä»¶</div>` \n                    : `<div class=\"stock-status stock-ok\"><i class=\"fas fa-check-circle\"></i> ç°è´§å……è¶³</div>`;\n                \n                const badgeHtml = p.isHot ? `<span class=\"badge badge-hot\">çƒ­é”€</span>` \n                                : (p.isSale ? `<span class=\"badge badge-sale\">-${discount}%</span>` : '');\n\n                const card = document.createElement('div');\n                card.className = 'product-card';\n                card.innerHTML = `\n                    ${badgeHtml}\n                    <div class=\"product-img-container\">\n                        <img src=\"${p.image}\" alt=\"${p.name}\" class=\"product-img\">\n                    </div>\n                    <div class=\"product-info\">\n                        <div class=\"product-category\">${p.category}</div>\n                        <h3 class=\"product-title\">${p.name}</h3>\n                        <div class=\"price-container\">\n                            <span class=\"current-price\">Â¥${p.price.toFixed(2)}</span>\n                            ${p.oldPrice ? `<span class=\"old-price\">Â¥${p.oldPrice.toFixed(2)}</span>` : ''}\n                        </div>\n                        ${stockHtml}\n                        <div class=\"card-actions\">\n                            <button class=\"btn btn-outline\" onclick=\"openModal(${p.id})\">\n                                <i class=\"far fa-eye\"></i> è¯¦æƒ…\n                            </button>\n                            <button class=\"btn btn-primary\" onclick=\"addToCart(${p.id})\">\n                                <i class=\"fas fa-cart-plus\"></i> è´­ä¹°\n                            </button>\n                        </div>\n                    </div>\n                `;\n                grid.appendChild(card);\n            });\n        }\n\n        // Filter Events\n        const filterBtns = document.querySelectorAll('.filter-btn');\n        filterBtns.forEach(btn => {\n            btn.addEventListener('click', () => {\n                filterBtns.forEach(b => b.classList.remove('active'));\n                btn.classList.add('active');\n                renderProducts(btn.dataset.cat);\n            });\n        });\n\n        // Cart Logic\n        function addToCart(id, qty = 1) {\n            const product = products.find(p => p.id === id);\n            const existingItem = cart.find(item => item.id === id);\n\n            if (existingItem) {\n                if (existingItem.qty + qty > product.stock) {\n                    showToast('åº“å­˜ä¸è¶³ï¼', true);\n                    return;\n                }\n                existingItem.qty += qty;\n            } else {\n                cart.push({ ...product, qty: qty });\n            }\n\n            saveCart();\n            updateCartUI();\n            showToast(`å·²å°† \"${product.name}\" åŠ å…¥è´­ç‰©è½¦`);\n            \n            // If added from modal, close it\n            if(document.getElementById('product-modal').classList.contains('open')) {\n                closeModal();\n            }\n        }\n\n        function removeFromCart(id) {\n            cart = cart.filter(item => item.id !== id);\n            saveCart();\n            updateCartUI();\n        }\n\n        function updateQty(id, change) {\n            const item = cart.find(i => i.id === id);\n            const product = products.find(p => p.id === id);\n            \n            if (!item) return;\n\n            const newQty = item.qty + change;\n            \n            if (newQty > product.stock) {\n                showToast('è¾¾åˆ°åº“å­˜ä¸Šé™', true);\n                return;\n            }\n\n            if (newQty > 0) {\n                item.qty = newQty;\n            } else {\n                // Do nothing or remove? Usually min is 1\n                return; \n            }\n            saveCart();\n            updateCartUI();\n        }\n\n        function saveCart() {\n            localStorage.setItem('cart', JSON.stringify(cart));\n        }\n\n        function updateCartUI() {\n            const cartItemsContainer = document.getElementById('cart-items');\n            const countEl = document.getElementById('cart-count');\n            const totalEl = document.getElementById('cart-total-price');\n            \n            cartItemsContainer.innerHTML = '';\n            \n            let totalQty = 0;\n            let totalPrice = 0;\n\n            if (cart.length === 0) {\n                cartItemsContainer.innerHTML = '<p style=\"text-align:center; color:var(--text-light); margin-top:2rem;\">æ‚¨çš„è´­ç‰©è½¦æ˜¯ç©ºçš„</p>';\n            }\n\n            cart.forEach(item => {\n                totalQty += item.qty;\n                totalPrice += item.price * item.qty;\n\n                const div = document.createElement('div');\n                div.className = 'cart-item';\n                div.innerHTML = `\n                    <img src=\"${item.image}\" alt=\"${item.name}\">\n                    <div class=\"cart-item-details\">\n                        <div class=\"cart-item-title\">${item.name}</div>\n                        <div class=\"cart-item-price\">Â¥${item.price.toFixed(2)}</div>\n                        <div class=\"cart-controls\">\n                            <button class=\"qty-btn\" onclick=\"updateQty(${item.id}, -1)\">-</button>\n                            <span>${item.qty}</span>\n                            <button class=\"qty-btn\" onclick=\"updateQty(${item.id}, 1)\">+</button>\n                            <div class=\"remove-btn\" onclick=\"removeFromCart(${item.id})\">åˆ é™¤</div>\n                        </div>\n                    </div>\n                `;\n                cartItemsContainer.appendChild(div);\n            });\n\n            countEl.innerText = totalQty;\n            totalEl.innerText = 'Â¥' + totalPrice.toFixed(2);\n        }\n\n        function toggleCart() {\n            document.getElementById('cart-sidebar').classList.toggle('open');\n            document.getElementById('cart-overlay').classList.toggle('open');\n        }\n\n        // Modal Logic\n        function openModal(id) {\n            const p = products.find(prod => prod.id === id);\n            if(!p) return;\n\n            document.getElementById('modal-img').src = p.image;\n            document.getElementById('modal-category').innerText = p.category;\n            document.getElementById('modal-title').innerText = p.name;\n            document.getElementById('modal-desc').innerText = p.desc;\n            document.getElementById('modal-price').innerText = 'Â¥' + p.price.toFixed(2);\n            \n            const oldPriceEl = document.getElementById('modal-old-price');\n            if(p.oldPrice) {\n                oldPriceEl.innerText = 'Â¥' + p.oldPrice.toFixed(2);\n                oldPriceEl.style.display = 'block';\n            } else {\n                oldPriceEl.style.display = 'none';\n            }\n\n            const stockEl = document.getElementById('modal-stock');\n            if(p.stock < 5) {\n                stockEl.className = 'stock-status stock-low';\n                stockEl.innerText = `åº“å­˜ç´§å¼ ï¼šä»…å‰© ${p.stock}`;\n            } else {\n                stockEl.className = 'stock-status stock-ok';\n                stockEl.innerText = 'åº“å­˜å……è¶³';\n            }\n\n            const btn = document.getElementById('modal-add-btn');\n            btn.onclick = () => addToCart(p.id);\n\n            document.getElementById('product-modal').classList.add('open');\n        }\n\n        function closeModal() {\n            document.getElementById('product-modal').classList.remove('open');\n        }\n\n        // Toast Notification\n        function showToast(msg, isError = false) {\n            const toast = document.getElementById('toast');\n            const toastMsg = document.getElementById('toast-msg');\n            const icon = toast.querySelector('i');\n\n            toastMsg.innerText = msg;\n            icon.className = isError ? 'fas fa-exclamation-circle' : 'fas fa-check-circle';\n            icon.style.color = isError ? 'var(--danger)' : 'var(--success)';\n\n            toast.classList.add('show');\n            setTimeout(() => {\n                toast.classList.remove('show');\n            }, 3000);\n        }\n\n        // Close modal on outside click\n        window.onclick = function(event) {\n            const modal = document.getElementById('product-modal');\n            if (event.target == modal) {\n                closeModal();\n            }\n        }\n    </script>\n</body>\n</html>"
    }
  ]
}