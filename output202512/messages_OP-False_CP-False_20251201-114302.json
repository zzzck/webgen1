{
  "brief": [
    {
      "topic": "brief",
      "sender": "User",
      "content": "\nä¸ºç½‘ç«™åˆ›å»ºä¸€ä¸ªå“åº”å¼ä¸”è§†è§‰æ•ˆæœå¸å¼•äººçš„ç”µå•†äº§å“é”€å”®é¡µé¢å°éƒ¨ä»¶ã€‚\nç”¨æˆ·åº”èƒ½å¤Ÿæµè§ˆå•†å“åˆ—è¡¨ã€æŸ¥çœ‹å•†å“è¯¦æƒ…ã€é€‰æ‹©æ•°é‡å¹¶åŠ å…¥è´­ç‰©è½¦ï¼Œä»¥åŠä»è´­ç‰©è½¦ä¸­åˆ é™¤å•†å“ã€‚é¡µé¢åº”æ”¯æŒæ˜¾ç¤ºå•†å“ä»·æ ¼ã€æŠ˜æ‰£ä¿¡æ¯ã€åº“å­˜çŠ¶æ€å’ŒæŒ‰åˆ†ç±»æµè§ˆç­‰åŠŸèƒ½ã€‚\næ‚¨è¿˜å¯ä»¥æ·»åŠ ä»»ä½•å…¶ä»–åˆ›æ„åŠŸèƒ½æ¥æé«˜è½¬åŒ–ç‡å’Œè¶£å‘³æ€§ï¼Œä¾‹å¦‚é™æ—¶å€’è®¡æ—¶ã€çƒ­é”€æ ‡è®°æˆ–ç®€æ˜“è®¢å•æ‘˜è¦ã€‚\nä»…ä½¿ç”¨ HTMLã€CSS å’Œ JavaScript â€” ä¸è¦ä½¿ç”¨ Vueã€React æˆ–ä»»ä½•ç¬¬ä¸‰æ–¹åº“ã€‚ä½¿ç”¨ localStorage å­˜å‚¨è´­ç‰©è½¦ç­‰æ•°æ®ï¼Œç¡®ä¿ä¿¡æ¯åœ¨é¡µé¢åˆ·æ–°åä»èƒ½ä¿ç•™ã€‚ä¿æŒæ•´ä½“è®¾è®¡ç®€æ´ã€ç”¨æˆ·å‹å¥½ä¸”å¼•äººå…¥èƒœã€‚\n"
    }
  ],
  "tasks": [
    {
      "topic": "tasks",
      "sender": "TeamLeader",
      "content": {
        "available_roles": [
          "TeamLeader",
          "Engineer"
        ],
        "tasks": [
          {
            "role": "TeamLeader",
            "tasks": [
              "æ¢³ç†å®¢æˆ·éœ€æ±‚ï¼Œæ˜ç¡®ç”µå•†å°éƒ¨ä»¶çš„åŠŸèƒ½æ¸…å•ï¼ˆåˆ—è¡¨ã€è¯¦æƒ…ã€è´­ç‰©è½¦ã€ç­›é€‰ã€æŒä¹…åŒ–ï¼‰",
              "è§„åˆ’æŠ€æœ¯çº¦æŸï¼Œç¡®ä¿ä»…ä½¿ç”¨åŸç”Ÿ HTML/CSS/JS å¹¶åˆ©ç”¨ localStorage"
            ]
          },
          {
            "role": "Engineer",
            "tasks": [
              "ç¼–å†™è¯­ä¹‰åŒ–çš„ HTML ç»“æ„ï¼ŒåŒ…å«å•†å“å±•ç¤ºåŒºã€è´­ç‰©è½¦ä¾§è¾¹æ /å¼¹çª—åŠè¯¦æƒ…æ¨¡æ€æ¡†",
              "è®¾è®¡å“åº”å¼ CSS æ ·å¼ï¼Œå®ç°è§†è§‰ç¾åŒ–åŠé™æ—¶å€’è®¡æ—¶/çƒ­é”€æ ‡è®°ç­‰åˆ›æ„UI",
              "å¼€å‘ JavaScript ä¸šåŠ¡é€»è¾‘ï¼Œå¤„ç†å•†å“æ¸²æŸ“ã€åˆ†ç±»ç­›é€‰ã€ä»·æ ¼è®¡ç®—åŠè´­ç‰©è½¦äº¤äº’",
              "å®ç° localStorage æ•°æ®è¯»å†™é€»è¾‘ï¼Œç¡®ä¿åˆ·æ–°åæ•°æ®ä¸ä¸¢å¤±",
              "æ•´åˆä»£ç ï¼Œè¾“å‡ºæœ€ç»ˆçš„å•é¡µåº”ç”¨æ–‡ä»¶"
            ]
          }
        ]
      }
    }
  ],
  "html": [
    {
      "topic": "html",
      "sender": "Engineer",
      "content": "<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>ç²¾é€‰ç”µå•†å°éƒ¨ä»¶</title>\n    <style>\n        :root {\n            --primary-color: #ff6b6b;\n            --secondary-color: #4ecdc4;\n            --dark-color: #2d3436;\n            --light-color: #f7f7f7;\n            --text-color: #333;\n            --gray-color: #a4b0be;\n            --shadow: 0 10px 20px rgba(0,0,0,0.1);\n            --radius: 12px;\n            --transition: all 0.3s ease;\n        }\n\n        * {\n            box-sizing: border-box;\n            margin: 0;\n            padding: 0;\n            font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif;\n        }\n\n        body {\n            background-color: #f0f2f5;\n            color: var(--text-color);\n            line-height: 1.6;\n        }\n\n        /* Header */\n        header {\n            background: white;\n            padding: 1rem 2rem;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            position: sticky;\n            top: 0;\n            z-index: 100;\n            box-shadow: 0 2px 10px rgba(0,0,0,0.05);\n        }\n\n        .logo {\n            font-size: 1.5rem;\n            font-weight: 800;\n            color: var(--dark-color);\n            display: flex;\n            align-items: center;\n            gap: 0.5rem;\n        }\n\n        .logo span {\n            color: var(--primary-color);\n        }\n\n        .cart-btn {\n            position: relative;\n            background: none;\n            border: none;\n            cursor: pointer;\n            font-size: 1.5rem;\n            padding: 0.5rem;\n            transition: var(--transition);\n        }\n\n        .cart-btn:hover {\n            transform: scale(1.1);\n        }\n\n        .cart-badge {\n            position: absolute;\n            top: 0;\n            right: 0;\n            background: var(--primary-color);\n            color: white;\n            font-size: 0.75rem;\n            width: 20px;\n            height: 20px;\n            border-radius: 50%;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            font-weight: bold;\n        }\n\n        /* Hero Section & Countdown */\n        .hero {\n            background: linear-gradient(135deg, #6c5ce7, #a29bfe);\n            color: white;\n            padding: 2rem;\n            text-align: center;\n            margin-bottom: 2rem;\n        }\n\n        .countdown-container {\n            background: rgba(255,255,255,0.2);\n            display: inline-flex;\n            padding: 1rem 2rem;\n            border-radius: var(--radius);\n            margin-top: 1rem;\n            gap: 1.5rem;\n            backdrop-filter: blur(5px);\n        }\n\n        .time-block {\n            display: flex;\n            flex-direction: column;\n        }\n\n        .time-val {\n            font-size: 1.5rem;\n            font-weight: bold;\n        }\n\n        .time-label {\n            font-size: 0.8rem;\n            opacity: 0.8;\n        }\n\n        /* Filters */\n        .filters {\n            display: flex;\n            justify-content: center;\n            gap: 1rem;\n            margin-bottom: 2rem;\n            flex-wrap: wrap;\n            padding: 0 1rem;\n        }\n\n        .filter-btn {\n            padding: 0.5rem 1.5rem;\n            border: 2px solid transparent;\n            background: white;\n            border-radius: 30px;\n            cursor: pointer;\n            font-weight: 600;\n            color: var(--gray-color);\n            transition: var(--transition);\n            box-shadow: 0 2px 5px rgba(0,0,0,0.05);\n        }\n\n        .filter-btn.active, .filter-btn:hover {\n            background: var(--dark-color);\n            color: white;\n        }\n\n        /* Product Grid */\n        .container {\n            max-width: 1200px;\n            margin: 0 auto;\n            padding: 0 1rem 4rem 1rem;\n        }\n\n        .product-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n            gap: 2rem;\n        }\n\n        .product-card {\n            background: white;\n            border-radius: var(--radius);\n            overflow: hidden;\n            box-shadow: var(--shadow);\n            transition: var(--transition);\n            position: relative;\n            display: flex;\n            flex-direction: column;\n        }\n\n        .product-card:hover {\n            transform: translateY(-10px);\n        }\n\n        .badge-hot {\n            position: absolute;\n            top: 10px;\n            left: 10px;\n            background: var(--primary-color);\n            color: white;\n            padding: 0.25rem 0.75rem;\n            border-radius: 20px;\n            font-size: 0.8rem;\n            font-weight: bold;\n            z-index: 2;\n        }\n\n        .product-img-container {\n            height: 200px;\n            overflow: hidden;\n            background: #eee;\n        }\n\n        .product-img {\n            width: 100%;\n            height: 100%;\n            object-fit: cover;\n            transition: transform 0.5s;\n        }\n\n        .product-card:hover .product-img {\n            transform: scale(1.05);\n        }\n\n        .product-info {\n            padding: 1.5rem;\n            flex-grow: 1;\n            display: flex;\n            flex-direction: column;\n        }\n\n        .product-cat {\n            font-size: 0.8rem;\n            color: var(--gray-color);\n            text-transform: uppercase;\n            letter-spacing: 1px;\n            margin-bottom: 0.5rem;\n        }\n\n        .product-title {\n            font-size: 1.1rem;\n            margin-bottom: 0.5rem;\n            font-weight: 700;\n        }\n\n        .price-row {\n            display: flex;\n            align-items: baseline;\n            gap: 0.5rem;\n            margin-bottom: 1rem;\n        }\n\n        .current-price {\n            font-size: 1.25rem;\n            color: var(--dark-color);\n            font-weight: bold;\n        }\n\n        .original-price {\n            text-decoration: line-through;\n            color: var(--gray-color);\n            font-size: 0.9rem;\n        }\n\n        .discount-tag {\n            color: var(--secondary-color);\n            font-size: 0.8rem;\n            font-weight: bold;\n            margin-left: auto;\n        }\n\n        .stock-status {\n            font-size: 0.8rem;\n            margin-bottom: 1rem;\n        }\n\n        .stock-low {\n            color: #e17055;\n        }\n\n        .stock-out {\n            color: #b2bec3;\n        }\n\n        .add-btn {\n            width: 100%;\n            padding: 0.8rem;\n            background: var(--dark-color);\n            color: white;\n            border: none;\n            border-radius: 8px;\n            cursor: pointer;\n            font-weight: 600;\n            transition: var(--transition);\n            margin-top: auto;\n        }\n\n        .add-btn:hover:not(:disabled) {\n            background: var(--primary-color);\n        }\n\n        .add-btn:disabled {\n            background: #ccc;\n            cursor: not-allowed;\n        }\n\n        /* Cart Sidebar */\n        .cart-overlay {\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: rgba(0,0,0,0.5);\n            z-index: 200;\n            opacity: 0;\n            visibility: hidden;\n            transition: var(--transition);\n        }\n\n        .cart-sidebar {\n            position: fixed;\n            top: 0;\n            right: -400px;\n            width: 400px;\n            max-width: 100%;\n            height: 100%;\n            background: white;\n            z-index: 201;\n            transition: var(--transition);\n            display: flex;\n            flex-direction: column;\n            box-shadow: -5px 0 15px rgba(0,0,0,0.1);\n        }\n\n        .cart-active .cart-overlay {\n            opacity: 1;\n            visibility: visible;\n        }\n\n        .cart-active .cart-sidebar {\n            right: 0;\n        }\n\n        .cart-header {\n            padding: 1.5rem;\n            border-bottom: 1px solid #eee;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n        }\n\n        .close-cart {\n            background: none;\n            border: none;\n            font-size: 1.5rem;\n            cursor: pointer;\n        }\n\n        .cart-items {\n            flex-grow: 1;\n            overflow-y: auto;\n            padding: 1.5rem;\n        }\n\n        .cart-item {\n            display: flex;\n            gap: 1rem;\n            margin-bottom: 1.5rem;\n            padding-bottom: 1.5rem;\n            border-bottom: 1px solid #f0f0f0;\n        }\n\n        .cart-item-img {\n            width: 70px;\n            height: 70px;\n            object-fit: cover;\n            border-radius: 8px;\n        }\n\n        .cart-item-details {\n            flex-grow: 1;\n        }\n\n        .cart-item-title {\n            font-size: 0.95rem;\n            font-weight: 600;\n            margin-bottom: 0.25rem;\n        }\n\n        .cart-item-price {\n            color: var(--gray-color);\n            font-size: 0.9rem;\n        }\n\n        .cart-controls {\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            margin-top: 0.5rem;\n        }\n\n        .qty-selector {\n            display: flex;\n            align-items: center;\n            gap: 0.5rem;\n            background: #f7f7f7;\n            padding: 2px 8px;\n            border-radius: 4px;\n        }\n\n        .qty-btn {\n            background: none;\n            border: none;\n            cursor: pointer;\n            font-size: 1rem;\n            padding: 0 5px;\n            color: var(--dark-color);\n        }\n\n        .remove-item {\n            color: #ff6b6b;\n            background: none;\n            border: none;\n            font-size: 0.8rem;\n            cursor: pointer;\n            text-decoration: underline;\n        }\n\n        .cart-footer {\n            padding: 1.5rem;\n            background: #f9f9f9;\n            border-top: 1px solid #eee;\n        }\n\n        .cart-summary {\n            margin-bottom: 1rem;\n        }\n\n        .summary-row {\n            display: flex;\n            justify-content: space-between;\n            margin-bottom: 0.5rem;\n            font-size: 0.9rem;\n        }\n\n        .summary-total {\n            font-weight: 800;\n            font-size: 1.2rem;\n            margin-top: 1rem;\n            padding-top: 1rem;\n            border-top: 1px solid #ddd;\n        }\n\n        .checkout-btn {\n            width: 100%;\n            padding: 1rem;\n            background: var(--secondary-color);\n            color: white;\n            border: none;\n            border-radius: 8px;\n            font-weight: bold;\n            font-size: 1rem;\n            cursor: pointer;\n            transition: var(--transition);\n        }\n\n        .checkout-btn:hover {\n            filter: brightness(0.9);\n        }\n\n        .empty-cart-msg {\n            text-align: center;\n            color: var(--gray-color);\n            margin-top: 2rem;\n        }\n\n        /* Toast Notification */\n        .toast {\n            position: fixed;\n            bottom: 20px;\n            left: 50%;\n            transform: translateX(-50%) translateY(100px);\n            background: var(--dark-color);\n            color: white;\n            padding: 12px 24px;\n            border-radius: 30px;\n            box-shadow: 0 5px 15px rgba(0,0,0,0.2);\n            opacity: 0;\n            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n            z-index: 1000;\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        .toast.show {\n            transform: translateX(-50%) translateY(0);\n            opacity: 1;\n        }\n\n        /* Responsive */\n        @media (max-width: 600px) {\n            .cart-sidebar {\n                width: 100%;\n            }\n            .hero h1 {\n                font-size: 1.5rem;\n            }\n            .countdown-container {\n                padding: 0.5rem 1rem;\n                gap: 1rem;\n            }\n        }\n    </style>\n</head>\n<body>\n\n    <header>\n        <div class=\"logo\">\n            <span>âš¡</span> FlashShop\n        </div>\n        <button class=\"cart-btn\" onclick=\"toggleCart()\">\n            ğŸ›’\n            <div class=\"cart-badge\" id=\"cartBadge\">0</div>\n        </button>\n    </header>\n\n    <div class=\"hero\">\n        <h1>å­£æœ«æ¸…ä»“ç‰¹å–</h1>\n        <p>é™æ—¶ä¼˜æƒ ï¼Œå…¨åœºä½è‡³ 5 æŠ˜èµ·</p>\n        <div class=\"countdown-container\">\n            <div class=\"time-block\">\n                <span class=\"time-val\" id=\"hours\">00</span>\n                <span class=\"time-label\">æ—¶</span>\n            </div>\n            <div class=\"time-block\">\n                <span class=\"time-val\" id=\"minutes\">00</span>\n                <span class=\"time-label\">åˆ†</span>\n            </div>\n            <div class=\"time-block\">\n                <span class=\"time-val\" id=\"seconds\">00</span>\n                <span class=\"time-label\">ç§’</span>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"filters\" id=\"categoryFilters\">\n        <button class=\"filter-btn active\" onclick=\"filterProducts('all', this)\">å…¨éƒ¨</button>\n        <button class=\"filter-btn\" onclick=\"filterProducts('electronics', this)\">ç”µå­äº§å“</button>\n        <button class=\"filter-btn\" onclick=\"filterProducts('clothing', this)\">æ½®æµæœé¥°</button>\n        <button class=\"filter-btn\" onclick=\"filterProducts('home', this)\">å®¶å±…ç”Ÿæ´»</button>\n    </div>\n\n    <main class=\"container\">\n        <div class=\"product-grid\" id=\"productGrid\">\n            <!-- Products rendered via JS -->\n        </div>\n    </main>\n\n    <!-- Cart Sidebar -->\n    <div class=\"cart-overlay\" onclick=\"toggleCart()\"></div>\n    <div class=\"cart-sidebar\">\n        <div class=\"cart-header\">\n            <h2>æ‚¨çš„è´­ç‰©è½¦</h2>\n            <button class=\"close-cart\" onclick=\"toggleCart()\">Ã—</button>\n        </div>\n        <div class=\"cart-items\" id=\"cartItems\">\n            <!-- Cart Items rendered via JS -->\n        </div>\n        <div class=\"cart-footer\">\n            <div class=\"cart-summary\">\n                <div class=\"summary-row\">\n                    <span>å°è®¡</span>\n                    <span id=\"subTotal\">Â¥0.00</span>\n                </div>\n                <div class=\"summary-row\">\n                    <span>æŠ˜æ‰£</span>\n                    <span id=\"discountTotal\" style=\"color: #ff6b6b;\">-Â¥0.00</span>\n                </div>\n                <div class=\"summary-row summary-total\">\n                    <span>æ€»è®¡</span>\n                    <span id=\"finalTotal\">Â¥0.00</span>\n                </div>\n            </div>\n            <button class=\"checkout-btn\" onclick=\"checkout()\">ç«‹å³ç»“è´¦</button>\n        </div>\n    </div>\n\n    <div id=\"toast\" class=\"toast\">âœ… å•†å“å·²åŠ å…¥è´­ç‰©è½¦</div>\n\n    <script>\n        // 1. æ•°æ®æ¨¡å‹\n        const products = [\n            {\n                id: 1,\n                name: \"æ— çº¿é™å™ªè€³æœº Pro\",\n                category: \"electronics\",\n                price: 899,\n                originalPrice: 1299,\n                image: \"https://placehold.co/300x300/2d3436/white?text=Headphones\",\n                stock: 15,\n                isHot: true\n            },\n            {\n                id: 2,\n                name: \"æç®€å¤å¤èƒ¶ç‰‡ç›¸æœº\",\n                category: \"electronics\",\n                price: 2499,\n                originalPrice: 2499,\n                image: \"https://placehold.co/300x300/6c5ce7/white?text=Camera\",\n                stock: 5,\n                isHot: false\n            },\n            {\n                id: 3,\n                name: \"çº¯æ£‰oversizeå«è¡£\",\n                category: \"clothing\",\n                price: 199,\n                originalPrice: 299,\n                image: \"https://placehold.co/300x300/ff7675/white?text=Hoodie\",\n                stock: 50,\n                isHot: true\n            },\n            {\n                id: 4,\n                name: \"æ™ºèƒ½è¿åŠ¨æ‰‹è¡¨\",\n                category: \"electronics\",\n                price: 699,\n                originalPrice: 999,\n                image: \"https://placehold.co/300x300/0984e3/white?text=Watch\",\n                stock: 0,\n                isHot: false\n            },\n            {\n                id: 5,\n                name: \"æ—¥å¼é™¶ç“·é¤å…·å¥—è£…\",\n                category: \"home\",\n                price: 359,\n                originalPrice: 499,\n                image: \"https://placehold.co/300x300/fdcb6e/333?text=Plates\",\n                stock: 20,\n                isHot: false\n            },\n            {\n                id: 6,\n                name: \"äººä½“å·¥å­¦åŠå…¬æ¤…\",\n                category: \"home\",\n                price: 899,\n                originalPrice: 1599,\n                image: \"https://placehold.co/300x300/b2bec3/333?text=Chair\",\n                stock: 3,\n                isHot: true\n            }\n        ];\n\n        // 2. çŠ¶æ€ç®¡ç†\n        let cart = JSON.parse(localStorage.getItem('shopCart')) || [];\n\n        // 3. å€’è®¡æ—¶é€»è¾‘\n        function startCountdown() {\n            // è®¾ç½®ä¸€ä¸ª24å°æ—¶åçš„æ—¶é—´ç‚¹\n            const now = new Date();\n            const end = new Date(now);\n            end.setHours(23, 59, 59); \n            \n            const timer = setInterval(() => {\n                const currentTime = new Date();\n                const diff = end - currentTime;\n\n                if (diff <= 0) {\n                    clearInterval(timer);\n                    return;\n                }\n\n                const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n                const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\n                const s = Math.floor((diff % (1000 * 60)) / 1000);\n\n                document.getElementById('hours').innerText = h < 10 ? '0' + h : h;\n                document.getElementById('minutes').innerText = m < 10 ? '0' + m : m;\n                document.getElementById('seconds').innerText = s < 10 ? '0' + s : s;\n            }, 1000);\n        }\n\n        // 4. æ¸²æŸ“äº§å“\n        function renderProducts(filter = 'all') {\n            const grid = document.getElementById('productGrid');\n            grid.innerHTML = '';\n\n            const filtered = filter === 'all' \n                ? products \n                : products.filter(p => p.category === filter);\n\n            filtered.forEach(p => {\n                const discount = p.originalPrice > p.price \n                    ? Math.round(((p.originalPrice - p.price) / p.originalPrice) * 100) + '% OFF' \n                    : '';\n                \n                let stockHtml = '';\n                let btnDisabled = '';\n                let btnText = 'åŠ å…¥è´­ç‰©è½¦';\n\n                if (p.stock === 0) {\n                    stockHtml = '<div class=\"stock-status stock-out\">æš‚æ—¶ç¼ºè´§</div>';\n                    btnDisabled = 'disabled';\n                    btnText = 'ç¼ºè´§';\n                } else if (p.stock < 10) {\n                    stockHtml = `<div class=\"stock-status stock-low\">ä»…å‰© ${p.stock} ä»¶ - æ¬²è´­ä»é€Ÿ</div>`;\n                } else {\n                    stockHtml = '<div class=\"stock-status\">åº“å­˜å……è¶³</div>';\n                }\n\n                const html = `\n                    <div class=\"product-card\">\n                        ${p.isHot ? '<div class=\"badge-hot\">ğŸ”¥ çƒ­é”€</div>' : ''}\n                        <div class=\"product-img-container\">\n                            <img src=\"${p.image}\" alt=\"${p.name}\" class=\"product-img\" loading=\"lazy\">\n                        </div>\n                        <div class=\"product-info\">\n                            <div class=\"product-cat\">${p.category}</div>\n                            <h3 class=\"product-title\">${p.name}</h3>\n                            <div class=\"price-row\">\n                                <span class=\"current-price\">Â¥${p.price}</span>\n                                ${p.originalPrice > p.price ? `<span class=\"original-price\">Â¥${p.originalPrice}</span>` : ''}\n                                ${discount ? `<span class=\"discount-tag\">${discount}</span>` : ''}\n                            </div>\n                            ${stockHtml}\n                            <button class=\"add-btn\" onclick=\"addToCart(${p.id})\" ${btnDisabled}>${btnText}</button>\n                        </div>\n                    </div>\n                `;\n                grid.innerHTML += html;\n            });\n        }\n\n        // 5. ç­›é€‰åŠŸèƒ½\n        function filterProducts(cat, btn) {\n            // æ›´æ–°æŒ‰é’®æ ·å¼\n            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));\n            btn.classList.add('active');\n            // é‡æ–°æ¸²æŸ“\n            renderProducts(cat);\n        }\n\n        // 6. è´­ç‰©è½¦é€»è¾‘\n        function addToCart(id) {\n            const product = products.find(p => p.id === id);\n            const existingItem = cart.find(item => item.id === id);\n\n            if (existingItem) {\n                if (existingItem.qty < product.stock) {\n                    existingItem.qty++;\n                } else {\n                    showToast('âŒ åº“å­˜ä¸è¶³ï¼Œæ— æ³•æ·»åŠ æ›´å¤š');\n                    return;\n                }\n            } else {\n                cart.push({ ...product, qty: 1 });\n            }\n\n            saveCart();\n            renderCart();\n            showToast('âœ… å·²åŠ å…¥è´­ç‰©è½¦');\n            // ç®€å•çš„åŠ¨ç”»æ•ˆæœï¼Œè®©è´­ç‰©è½¦å›¾æ ‡è·³åŠ¨\n            const cartBtn = document.querySelector('.cart-btn');\n            cartBtn.style.transform = 'scale(1.3)';\n            setTimeout(() => cartBtn.style.transform = 'scale(1)', 200);\n        }\n\n        function removeFromCart(id) {\n            cart = cart.filter(item => item.id !== id);\n            saveCart();\n            renderCart();\n        }\n\n        function changeQty(id, change) {\n            const item = cart.find(i => i.id === id);\n            const product = products.find(p => p.id === id);\n\n            if (!item) return;\n\n            const newQty = item.qty + change;\n\n            if (newQty > 0 && newQty <= product.stock) {\n                item.qty = newQty;\n            } else if (newQty > product.stock) {\n                showToast('âš ï¸ åº“å­˜ä¸è¶³');\n            } else if (newQty <= 0) {\n                // å¯é€‰ï¼šæ•°é‡ä¸º0æ—¶åˆ é™¤\n                // removeFromCart(id);\n                // return; \n            }\n            saveCart();\n            renderCart();\n        }\n\n        function saveCart() {\n            localStorage.setItem('shopCart', JSON.stringify(cart));\n            updateBadge();\n        }\n\n        function updateBadge() {\n            const count = cart.reduce((sum, item) => sum + item.qty, 0);\n            document.getElementById('cartBadge').innerText = count;\n        }\n\n        function renderCart() {\n            const cartContainer = document.getElementById('cartItems');\n            cartContainer.innerHTML = '';\n\n            let subTotal = 0;\n            let originalTotal = 0;\n\n            if (cart.length === 0) {\n                cartContainer.innerHTML = '<div class=\"empty-cart-msg\">è´­ç‰©è½¦æ˜¯ç©ºçš„<br>å¿«å»é€‰è´­å–œæ¬¢çš„å•†å“å§ï¼</div>';\n            } else {\n                cart.forEach(item => {\n                    subTotal += item.price * item.qty;\n                    originalTotal += item.originalPrice * item.qty;\n                    \n                    const html = `\n                        <div class=\"cart-item\">\n                            <img src=\"${item.image}\" alt=\"${item.name}\" class=\"cart-item-img\">\n                            <div class=\"cart-item-details\">\n                                <div class=\"cart-item-title\">${item.name}</div>\n                                <div class=\"cart-item-price\">Â¥${item.price}</div>\n                                <div class=\"cart-controls\">\n                                    <div class=\"qty-selector\">\n                                        <button class=\"qty-btn\" onclick=\"changeQty(${item.id}, -1)\">-</button>\n                                        <span>${item.qty}</span>\n                                        <button class=\"qty-btn\" onclick=\"changeQty(${item.id}, 1)\">+</button>\n                                    </div>\n                                    <button class=\"remove-item\" onclick=\"removeFromCart(${item.id})\">åˆ é™¤</button>\n                                </div>\n                            </div>\n                        </div>\n                    `;\n                    cartContainer.innerHTML += html;\n                });\n            }\n\n            // æ›´æ–°é‡‘é¢æ‘˜è¦\n            const discount = originalTotal - subTotal;\n            document.getElementById('subTotal').innerText = 'Â¥' + originalTotal.toFixed(2);\n            document.getElementById('discountTotal').innerText = '-Â¥' + discount.toFixed(2);\n            document.getElementById('finalTotal').innerText = 'Â¥' + subTotal.toFixed(2);\n            updateBadge();\n        }\n\n        function toggleCart() {\n            document.body.classList.toggle('cart-active');\n            if (document.body.classList.contains('cart-active')) {\n                renderCart();\n            }\n        }\n\n        // 7. å·¥å…·å‡½æ•°\n        function showToast(msg) {\n            const toast = document.getElementById('toast');\n            toast.innerText = msg;\n            toast.classList.add('show');\n            setTimeout(() => {\n                toast.classList.remove('show');\n            }, 3000);\n        }\n\n        function checkout() {\n            if (cart.length === 0) {\n                showToast('âš ï¸ è´­ç‰©è½¦æ˜¯ç©ºçš„');\n                return;\n            }\n            alert(`æ„Ÿè°¢è´­ä¹°ï¼æ€»é‡‘é¢: Â¥${document.getElementById('finalTotal').innerText}\\nè®¢å•å·²ç”Ÿæˆã€‚`);\n            cart = [];\n            saveCart();\n            toggleCart();\n        }\n\n        // åˆå§‹åŒ–\n        window.addEventListener('DOMContentLoaded', () => {\n            renderProducts();\n            updateBadge();\n            startCountdown();\n        });\n\n    </script>\n</body>\n</html>"
    }
  ]
}