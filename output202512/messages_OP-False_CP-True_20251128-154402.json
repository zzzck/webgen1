{
  "brief": [
    {
      "topic": "brief",
      "sender": "User",
      "content": "\n请创建一个包含 HTML、CSS 和 JavaScript 的**单文件（Single HTML File）**电商产品详情页。该网页必须是一个完整的、可交互的原型。\n\n# Product Context\n我们需要为一款春节热销零食制作落地页，模仿京东（JD.com）的移动端/PC端响应式布局风格。\n* **品牌**：LYF\n* **商品名称**：新疆原产葵花籽（30g 独立小包装）\n* **价格策略**：10包组合装，售价 16.9 元。\n\n# Functional Requirements (功能需求)\n1.  **布局结构**：\n    * **顶部**：简单的导航栏（包含 Logo 占位符和搜索框占位符）。\n    * **左侧/顶部（视宽度而定）**：产品主图展示区。包含 1 张大图和 4 张缩略图。点击缩略图需切换大图。\n    图片链接1“https://detail.1688.com/offer/988089985291.html?spm=a261b.8768355.pic-list.30.432360cd4VYDtD”\n    图片链接2“https://detail.1688.com/offer/981519203786.html?spm=a261b.8768355.pic-list.16.424760cd9rabYd”\n    图片链接3“https://detail.1688.com/offer/990628769471.html?spm=a261b.8768355.pic-list.7.667160cdECaV86”\n    * **右侧/底部（视宽度而定）**：产品信息区。包含标题、红色价格高亮、促销标签（“春节特惠”、“包邮”）。\n    * **交互区**：数量选择器（支持 +/-，且数量不能小于 1），以及“立即购买”和“加入购物车”两个按钮。\n    * **详情区**：页面底部需包含 Tab 切换功能（“商品介绍” vs “售后保障”），点击 Tab 切换显示不同文本内容。\n\n2.  **核心逻辑 (JavaScript)**：\n    * **数量联动**：默认数量为 1。点击 +/- 按钮更新数量，并实时更新“总价”（Total Price = 16.9 * 数量）。结果保留 1 位小数。\n    * **购物车反馈**：点击“加入购物车”后，弹出轻提示（Toast Notification）：\"已成功加入购物车：LYF葵花籽 x [数量]\"，2秒后自动消失。\n    * **图片切换**：鼠标悬停或点击缩略图时，主图需平滑切换。\n\n3.  **UI/Design Requirements (设计规范)**：\n    * **配色**：主色调使用京东红（#f23030 或类似），背景色为浅灰（#f6f6f6），内容区为白色。\n    * **图片处理**：由于无法访问外部图库，请使用 placeholder 图片服务（如 `https://via.placeholder.com/400x400?text=LYF+Product`）来生成不同颜色的占位图，确保页面不出现破图。\n    * **响应式**：页面需适配手机端和 PC 端（使用 Flexbox 或 Grid 布局）。\n4.营销倒计时系统 (Complex Logic)\n在价格旁显示“春节限时抢购倒计时”。\n逻辑要求：倒计时设定为 2 小时 0 分 0 秒。必须实时跳动（每秒 -1）。\n边界状态：当倒计时归零时，按钮变为灰色“活动已结束”，且不可点击。\n\n5. 优惠券与价格计算 (State Management)\n界面中间需展示两张优惠券：\nA券：满 10 减 2 元\nB券：满 20 减 5 元\n\n6.交互逻辑：\n用户点击优惠券可“领取”（变为高亮状态，只能选一张）。\n数量选择器调整商品数量时，**总价（Total Price）**必须根据（单价 * 数量 - 优惠券金额）实时重新计算。\n如果总价不满足优惠券门槛，优惠券自动失效（取消高亮）。\n\n7. 评论区筛选器 (DOM Manipulation)\n展示评论列表。\n顶部有 Filter 按钮：“全部”、“好评”、“中评”。\n交互逻辑：点击不同按钮，下方评论列表必须根据 productData.reviews 数组进行实时过滤并重新渲染 DOM。\n\n8. 模态框购物车 (UI Interaction)\n点击底部的“立即购买”按钮，不跳转，而是从底部弹出一个半透明遮罩层 + 确认面板（Slide-up Modal）。\n面板内显示：已选商品信息、最终计算后的价格。\n包含“确认支付”按钮，点击后 alert 输出最终订单信息对象。\n\n# Technical Constraints (技术约束)\n* 所有代码（HTML, CSS, JS）必须包含在一个 HTML 文件中，CSS 放 `<style>`，JS 放 `<script>`。\n* 代码结构清晰，有注释，不依赖 React/Vue 等外部框架，使用原生 Vanilla JS。\n* CSS 需处理好按钮的 hover 状态和阴影细节，体现电商的高级感。\n"
    }
  ],
  "tasks": [
    {
      "topic": "tasks",
      "sender": "TeamLeader",
      "content": {
        "available_roles": [
          "TeamLeader",
          "Engineer"
        ],
        "tasks": [
          {
            "role": "TeamLeader",
            "tasks": [
              "梳理客户需求，确认为单文件电商产品详情页原型",
              "明确交付物包含响应式HTML结构、CSS样式和JavaScript交互逻辑",
              "拆解功能需求为布局、图片切换、数量联动、购物车反馈、倒计时系统、优惠券与价格计算、评论过滤器和模态框购买交互",
              "分配实现任务给Engineer"
            ]
          },
          {
            "role": "Engineer",
            "tasks": [
              "编写包含HTML、CSS、JavaScript的单文件，包含导航栏、产品图片展示区、产品信息区、数量选择器、按钮、详情Tab切换区域",
              "实现JavaScript逻辑：数量增减、实时总价计算（含优惠券）、图片切换、购物车Toast提示、优惠券领取/失效逻辑、评论过滤器、倒计时系统、活动结束按钮禁用、模态框确认购买交互",
              "使用placeholder图片链接替代无法访问的外部图片",
              "设计京东红为主色调的响应式布局，包含按钮hover和阴影细节",
              "保证代码结构清晰、注释完善，使用原生JavaScript与CSS/Flexbox或Grid实现"
            ]
          }
        ]
      }
    }
  ],
  "html": [
    {
      "topic": "html",
      "sender": "Engineer",
      "content": "<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n<meta charset=\"UTF-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n<title>LYF新疆葵花籽详情页</title>\n<style>\n*{margin:0;padding:0;box-sizing:border-box;}\nbody{font-family:\"Microsoft YaHei\",sans-serif;background:#f6f6f6;color:#333;}\nheader{background:#fff;box-shadow:0 2px 4px rgba(0,0,0,0.1);padding:10px 20px;display:flex;justify-content:space-between;align-items:center;}\n.logo{font-size:20px;font-weight:bold;color:#f23030;}\n.search{flex:1;margin-left:20px;}\n.search input{width:100%;padding:5px;border:1px solid #ccc;border-radius:4px;}\nmain{display:flex;flex-wrap:wrap;max-width:1200px;margin:20px auto;background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.1);}\n.product-images{flex:1 1 400px;display:flex;flex-direction:column;align-items:center;}\n.main-img img{width:100%;max-width:400px;border-radius:8px;transition:opacity 0.3s;}\n.thumb-list{display:flex;margin-top:10px;gap:10px;}\n.thumb-list img{width:60px;height:60px;cursor:pointer;border:2px solid transparent;border-radius:4px;}\n.thumb-list img:hover{border-color:#f23030;}\n.product-info{flex:1 1 400px;padding:20px;}\n.product-info h1{font-size:24px;margin-bottom:10px;}\n.price{color:#f23030;font-size:28px;font-weight:bold;}\n.promo-tags{margin:10px 0;}\n.promo-tags span{display:inline-block;background:#f23030;color:#fff;padding:4px 8px;border-radius:4px;margin-right:5px;font-size:14px;}\n.countdown{font-size:14px;color:#f23030;margin-top:5px;}\n.coupons{margin:15px 0;display:flex;gap:10px;}\n.coupon{flex:1;background:#ffecec;border:2px dashed #f23030;padding:10px;text-align:center;cursor:pointer;border-radius:4px;}\n.coupon.active{background:#f23030;color:#fff;}\n.quantity-control{display:flex;align-items:center;margin:15px 0;}\n.quantity-control button{width:30px;height:30px;border:none;background:#f23030;color:#fff;cursor:pointer;font-size:20px;border-radius:4px;}\n.quantity-control span{display:inline-block;width:40px;text-align:center;}\n.total-price{font-size:18px;margin-top:10px;}\n.actions{margin-top:20px;display:flex;gap:10px;}\n.actions button{flex:1;padding:10px;border:none;border-radius:4px;cursor:pointer;font-size:16px;color:#fff;background:#f23030;box-shadow:0 2px 4px rgba(0,0,0,0.2);transition:background 0.3s;}\n.actions button:hover{background:#d42f2f;}\n.actions button.disabled{background:#ccc;cursor:not-allowed;box-shadow:none;}\n.tabs{margin-top:30px;border-top:1px solid #ddd;}\n.tab-buttons{display:flex;}\n.tab-buttons button{flex:1;padding:10px;background:#f6f6f6;border:none;cursor:pointer;}\n.tab-buttons button.active{background:#fff;border-bottom:2px solid #f23030;color:#f23030;font-weight:bold;}\n.tab-content{padding:15px;}\n.toast{position:fixed;top:20px;left:50%;transform:translateX(-50%);background:#333;color:#fff;padding:10px 20px;border-radius:4px;opacity:0;transition:opacity 0.3s;pointer-events:none;z-index:1000;}\n.toast.show{opacity:1;}\n.reviews{margin-top:30px;}\n.review-filters{margin-bottom:10px;}\n.review-filters button{margin-right:5px;padding:6px 12px;border:none;background:#eee;cursor:pointer;border-radius:4px;}\n.review-filters button.active{background:#f23030;color:#fff;}\n.review-list{border-top:1px solid #ddd;padding-top:10px;}\n.review-item{padding:8px 0;border-bottom:1px solid #f1f1f1;}\n.modal-overlay{position:fixed;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:none;align-items:flex-end;z-index:9999;}\n.modal{background:#fff;width:100%;padding:20px;border-top-left-radius:10px;border-top-right-radius:10px;}\n.modal h2{margin-bottom:10px;}\n.modal button{padding:10px;width:100%;background:#f23030;color:#fff;border:none;border-radius:4px;cursor:pointer;}\n@media(max-width:768px){\n  main{flex-direction:column;}\n  .actions{flex-direction:column;}\n}\n</style>\n</head>\n<body>\n<header>\n  <div class=\"logo\">LYF</div>\n  <div class=\"search\"><input type=\"text\" placeholder=\"搜索商品...\"></div>\n</header>\n<main>\n  <div class=\"product-images\">\n    <div class=\"main-img\"><img src=\"https://via.placeholder.com/400x400?text=LYF+Product+1\" alt=\"主图\" id=\"mainImage\"></div>\n    <div class=\"thumb-list\">\n      <img src=\"https://via.placeholder.com/60x60/ff9999?text=1\" data-src=\"https://via.placeholder.com/400x400/ff9999?text=LYF+Product+1\">\n      <img src=\"https://via.placeholder.com/60x60/99ff99?text=2\" data-src=\"https://via.placeholder.com/400x400/99ff99?text=LYF+Product+2\">\n      <img src=\"https://via.placeholder.com/60x60/9999ff?text=3\" data-src=\"https://via.placeholder.com/400x400/9999ff?text=LYF+Product+3\">\n      <img src=\"https://via.placeholder.com/60x60/f0f099?text=4\" data-src=\"https://via.placeholder.com/400x400/f0f099?text=LYF+Product+4\">\n    </div>\n  </div>\n  <div class=\"product-info\">\n    <h1>新疆原产葵花籽（30g 独立小包装） 10包组合</h1>\n    <div class=\"price\">￥16.9</div>\n    <div class=\"countdown\" id=\"countdown\">春节限时抢购倒计时：02:00:00</div>\n    <div class=\"promo-tags\"><span>春节特惠</span><span>包邮</span></div>\n    <div class=\"coupons\">\n      <div class=\"coupon\" data-threshold=\"10\" data-discount=\"2\">满10减2元</div>\n      <div class=\"coupon\" data-threshold=\"20\" data-discount=\"5\">满20减5元</div>\n    </div>\n    <div class=\"quantity-control\">\n      <button id=\"minusBtn\">-</button>\n      <span id=\"quantity\">1</span>\n      <button id=\"plusBtn\">+</button>\n    </div>\n    <div class=\"total-price\">总价：<span id=\"totalPrice\">16.9</span> 元</div>\n    <div class=\"actions\">\n      <button id=\"buyBtn\">立即购买</button>\n      <button id=\"cartBtn\">加入购物车</button>\n    </div>\n  </div>\n</main>\n<div class=\"tabs\">\n  <div class=\"tab-buttons\">\n    <button class=\"active\" data-tab=\"introduce\">商品介绍</button>\n    <button data-tab=\"service\">售后保障</button>\n  </div>\n  <div class=\"tab-content\" id=\"tabContent\">优质新疆葵花籽，粒粒饱满，独立包装，春节送礼佳品。</div>\n</div>\n<div class=\"reviews\">\n  <div class=\"review-filters\">\n    <button class=\"active\" data-filter=\"all\">全部</button>\n    <button data-filter=\"good\">好评</button>\n    <button data-filter=\"medium\">中评</button>\n  </div>\n  <div class=\"review-list\" id=\"reviewList\"></div>\n</div>\n<div class=\"toast\" id=\"toast\"></div>\n<div class=\"modal-overlay\" id=\"modalOverlay\">\n  <div class=\"modal\">\n    <h2>确认订单</h2>\n    <p>商品：LYF葵花籽 x <span id=\"modalQuantity\"></span></p>\n    <p>总价：<span id=\"modalPrice\"></span> 元</p>\n    <button id=\"confirmPay\">确认支付</button>\n  </div>\n</div>\n<script>\nconst unitPrice=16.9;\nlet quantity=1;\nlet selectedCoupon=null;\nlet remaining=2*60*60; // 2 hours in seconds\nconst quantityEl=document.getElementById('quantity');\nconst totalPriceEl=document.getElementById('totalPrice');\nconst minusBtn=document.getElementById('minusBtn');\nconst plusBtn=document.getElementById('plusBtn');\nconst cartBtn=document.getElementById('cartBtn');\nconst buyBtn=document.getElementById('buyBtn');\nconst countdownEl=document.getElementById('countdown');\nconst toast=document.getElementById('toast');\nconst modalOverlay=document.getElementById('modalOverlay');\nconst modalQuantity=document.getElementById('modalQuantity');\nconst modalPrice=document.getElementById('modalPrice');\nconst confirmPay=document.getElementById('confirmPay');\nconst coupons=document.querySelectorAll('.coupon');\n\nfunction renderPrice(){\n  let discount=0;\n  if(selectedCoupon){\n    const threshold=parseFloat(selectedCoupon.dataset.threshold);\n    const currTotal=unitPrice*quantity;\n    if(currTotal>=threshold){\n      discount=parseFloat(selectedCoupon.dataset.discount);\n    }else{\n      selectedCoupon.classList.remove('active');\n      selectedCoupon=null;\n    }\n  }\n  const total=(unitPrice*quantity-discount).toFixed(1);\n  totalPriceEl.textContent=total;\n}\n\nminusBtn.onclick=function(){\n  if(quantity>1){quantity--;quantityEl.textContent=quantity;renderPrice();}\n};\nplusBtn.onclick=function(){\n  quantity++;quantityEl.textContent=quantity;renderPrice();\n};\ncartBtn.onclick=function(){\n  showToast(`已成功加入购物车：LYF葵花籽 x ${quantity}`);\n};\nfunction showToast(msg){\n  toast.textContent=msg;toast.classList.add('show');\n  setTimeout(()=>{toast.classList.remove('show');},2000);\n}\ndocument.querySelectorAll('.thumb-list img').forEach(img=>{\n  img.addEventListener('click',()=>switchImage(img.dataset.src));\n  img.addEventListener('mouseover',()=>switchImage(img.dataset.src));\n});\nfunction switchImage(src){\n  const mainImage=document.getElementById('mainImage');\n  mainImage.style.opacity=0;\n  setTimeout(()=>{mainImage.src=src;mainImage.style.opacity=1;},300);\n}\ndocument.querySelectorAll('.tab-buttons button').forEach(btn=>{\n  btn.addEventListener('click',()=>{\n    document.querySelectorAll('.tab-buttons button').forEach(b=>b.classList.remove('active'));\n    btn.classList.add('active');\n    if(btn.dataset.tab==='introduce'){\n      document.getElementById('tabContent').textContent=\"优质新疆葵花籽，粒粒饱满，独立包装，春节送礼佳品。\";\n    }else{\n      document.getElementById('tabContent').textContent=\"本商品享受7天无理由退货服务，质量问题包退包换。\";\n    }\n  });\n});\ncoupons.forEach(c=>{\n  c.addEventListener('click',()=>{\n    coupons.forEach(cc=>cc.classList.remove('active'));\n    c.classList.add('active');\n    selectedCoupon=c;\n    renderPrice();\n  });\n});\nfunction updateCountdown(){\n  if(remaining>0){\n    remaining--;\n    const h=String(Math.floor(remaining/3600)).padStart(2,'0');\n    const m=String(Math.floor((remaining%3600)/60)).padStart(2,'0');\n    const s=String(remaining%60).padStart(2,'0');\n    countdownEl.textContent=`春节限时抢购倒计时：${h}:${m}:${s}`;\n    if(remaining===0){\n      buyBtn.classList.add('disabled');\n      cartBtn.classList.add('disabled');\n      buyBtn.disabled=true;\n      cartBtn.disabled=true;\n      buyBtn.textContent=\"活动已结束\";\n    }\n  }\n}\nsetInterval(updateCountdown,1000);\n\nconst productData={\n  reviews:[\n    {type:\"good\",text:\"非常好，颗粒饱满，味道香！\"},\n    {type:\"good\",text:\"包装精美，送礼很合适。\"},\n    {type:\"medium\",text:\"味道一般，偏咸。\"},\n    {type:\"good\",text:\"新鲜程度很好，没有坏籽。\"},\n    {type:\"medium\",text:\"包装有些破损，但客服处理及时。\"}\n  ]\n};\nfunction renderReviews(filter){\n  document.querySelectorAll('.review-filters button').forEach(btn=>btn.classList.remove('active'));\n  document.querySelector(`.review-filters button[data-filter=\"${filter}\"]`).classList.add('active');\n  let list=document.getElementById('reviewList');\n  list.innerHTML='';\n  productData.reviews.filter(r=>filter==='all' || r.type===filter).forEach(r=>{\n    const div=document.createElement('div');\n    div.className='review-item';\n    div.textContent=r.text;\n    list.appendChild(div);\n  });\n}\nrenderReviews('all');\ndocument.querySelectorAll('.review-filters button').forEach(btn=>{\n  btn.addEventListener('click',()=>{renderReviews(btn.dataset.filter);});\n});\nbuyBtn.onclick=function(){\n  if(buyBtn.disabled) return;\n  modalOverlay.style.display='flex';\n  modalQuantity.textContent=quantity;\n  modalPrice.textContent=totalPriceEl.textContent;\n};\nmodalOverlay.addEventListener('click',e=>{\n  if(e.target===modalOverlay){modalOverlay.style.display='none';}\n});\nconfirmPay.onclick=function(){\n  const order={\n    product:\"LYF葵花籽\",\n    quantity:quantity,\n    total:parseFloat(totalPriceEl.textContent)\n  };\n  alert(`订单信息：${JSON.stringify(order)}`);\n};\n</script>\n</body>\n</html>"
    }
  ]
}