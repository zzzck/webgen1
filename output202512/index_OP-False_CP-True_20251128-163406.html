<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>LYF 新疆葵花籽 - 春节热销</title>
<style>
body {font-family: Arial, sans-serif; margin:0; background:#f9f9f9;}
header {background:#d32f2f; color:#fff; padding:10px;}
header h1 {margin:0; font-size:20px;}
.search-bar {padding:10px; background:#fff;}
.search-bar input {width:80%; padding:8px;}
nav {background:#f44336; padding:10px;}
nav a {color:#fff; margin-right:15px; text-decoration:none;}
.container {display:flex; flex-wrap:wrap; padding:15px;}
.product-images {flex:1; min-width:250px; padding:10px;}
.product-images img {max-width:100%; border:1px solid #ccc; margin-bottom:10px;}
.thumbnails img {width:70px; height:70px; cursor:pointer; margin-right:5px; border:2px solid transparent;}
.thumbnails img.active {border-color:#f44336;}
.product-info {flex:1; min-width:250px; padding:10px;}
.price {color:#d32f2f; font-size:24px;}
.old-price {text-decoration:line-through; color:#777; margin-left:10px;}
.countdown {color:#f44336; font-weight:bold;}
.coupons {margin:15px 0;}
.coupon {background:#fff3cd; padding:10px; margin-right:10px; display:inline-block; cursor:pointer; border:1px solid #ffeeba;}
.coupon.active {background:#ffe082;}
.btn-buy {background:#f44336; color:#fff; padding:15px; text-align:center; font-size:18px; position:fixed; bottom:0; left:0; right:0; cursor:pointer;}
.details, .comments {background:#fff; padding:15px; margin-top:10px;}
.comments-filter {margin-bottom:10px;}
.modal-overlay {position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.5); display:none;}
.modal {position:fixed; bottom:-300px; left:0; right:0; background:#fff; padding:20px; transition:bottom 0.3s;}
.modal.show {bottom:0;}
.modal h2 {margin-top:0;}
.modal .btn-confirm {background:#4caf50; color:#fff; padding:10px; text-align:center; margin-top:15px; cursor:pointer;}
</style>
</head>
<body>
<header>
    <h1>LYF 新疆葵花籽 (春节热销)</h1>
</header>
<div class="search-bar">
    <input type="text" placeholder="搜索商品...">
    <button>搜索</button>
</div>
<nav>
    <a href="#">首页</a>
    <a href="#">零食</a>
    <a href="#">坚果</a>
    <a href="#">促销</a>
</nav>
<div class="container">
    <div class="product-images">
        <img id="mainImage" src="https://www.foodnext.net/dispPageBox/getFile/GetImg.aspx?FileLocation=%2FPJ-FOODNEXT%2FFiles%2F&FileName=photo-44541-i.jpg" alt="新疆葵花籽">
        <div class="thumbnails">
            <img src="https://pic1.zhimg.com/v2-0a72a4246fde463055bbcd021d58d6b0_1440w.jpg?source=172ae18b" data-src="https://pic1.zhimg.com/v2-0a72a4246fde463055bbcd021d58d6b0_1440w.jpg?source=172ae18b" class="active">
            <img src="https://www.foodnext.net/dispPageBox/getFile/GetImg.aspx?FileLocation=%2FPJ-FOODNEXT%2FFiles%2F&FileName=photo-44541-i.jpg" data-src="https://www.foodnext.net/dispPageBox/getFile/GetImg.aspx?FileLocation=%2FPJ-FOODNEXT%2FFiles%2F&FileName=photo-44541-i.jpg">
        </div>
    </div>
    <div class="product-info">
        <h2>LYF 新疆葵花籽（30g 小包装，10包）</h2>
        <p>吐鲁番优质葵瓜子，颗粒饱满，口感醇香，春节必备零食。</p>
        <div>
            <span class="price">￥16.9</span>
            <span class="old-price">￥22.9</span>
        </div>
        <div class="countdown">春节限时抢购剩余：<span id="countdownTimer"></span></div>
        <div class="coupons">
            <div class="coupon" data-type="A" data-min="10" data-discount="2">A券：满10减2元</div>
            <div class="coupon" data-type="B" data-min="20" data-discount="5">B券：满20减5元</div>
        </div>
        <p>库存充足 | 促销标签：节日特惠</p>
    </div>
</div>
<div class="details">
    <h3>产品详情</h3>
    <p>品牌：LYF<br>产地：新疆<br>配料：优质葵花籽<br>储存方法：请置于阴凉干燥处</p>
</div>
<div class="comments">
    <h3>用户评论</h3>
    <div class="comments-filter">
        <select id="filterSelect">
            <option value="all">全部</option>
            <option value="good">好评</option>
            <option value="medium">中评</option>
            <option value="bad">差评</option>
        </select>
    </div>
    <ul id="commentsList">
        <li data-type="good">好评：味道很香，颗粒大！</li>
        <li data-type="medium">中评：包装有点松散</li>
        <li data-type="bad">差评：有几颗坏籽</li>
        <li data-type="good">好评：非常适合过年佐餐</li>
    </ul>
</div>
<div class="btn-buy" id="btnBuy">立即购买</div>

<div class="modal-overlay" id="modalOverlay"></div>
<div class="modal" id="modalCart">
    <h2>确认订单</h2>
    <p id="orderInfo"></p>
    <div class="btn-confirm" id="btnConfirm">确认支付</div>
</div>

<script>
// 切换缩略图
document.querySelectorAll('.thumbnails img').forEach(img => {
    img.addEventListener('click', () => {
        document.getElementById('mainImage').src = img.dataset.src;
        document.querySelectorAll('.thumbnails img').forEach(th => th.classList.remove('active'));
        img.classList.add('active');
    });
});

// 倒计时
function startCountdown(endTime) {
    function update() {
        let now = new Date();
        let diff = endTime - now;
        if (diff <= 0) {
            document.getElementById('countdownTimer').textContent = "已结束";
            clearInterval(timer);
            return;
        }
        let h = Math.floor(diff / 1000 / 60 / 60);
        let m = Math.floor((diff / 1000 / 60) % 60);
        let s = Math.floor((diff / 1000) % 60);
        document.getElementById('countdownTimer').textContent = `${h}小时${m}分${s}秒`;
    }
    update();
    let timer = setInterval(update, 1000);
}
// 设置截止时间为今日23:59
let endOfDay = new Date();
endOfDay.setHours(23,59,59,999);
startCountdown(endOfDay);

// 优惠券选择
let selectedCoupon = null;
document.querySelectorAll('.coupon').forEach(c => {
    c.addEventListener('click', () => {
        document.querySelectorAll('.coupon').forEach(cc => cc.classList.remove('active'));
        c.classList.add('active');
        selectedCoupon = {
            type: c.dataset.type,
            min: parseFloat(c.dataset.min),
            discount: parseFloat(c.dataset.discount)
        };
    });
});

// 评论过滤
document.getElementById('filterSelect').addEventListener('change', function(){
    let val = this.value;
    document.querySelectorAll('#commentsList li').forEach(li => {
        if (val === 'all' || li.dataset.type === val){
            li.style.display = '';
        } else {
            li.style.display = 'none';
        }
    });
});

// 购买按钮触发模态
document.getElementById('btnBuy').addEventListener('click', () => {
    let basePrice = 16.9;
    let finalPrice = basePrice;
    if (selectedCoupon && basePrice >= selectedCoupon.min){
        finalPrice = basePrice - selectedCoupon.discount;
    }
    document.getElementById('orderInfo').textContent = `商品：LYF 新疆葵花籽 | 原价 ￥${basePrice.toFixed(2)} | 优惠后价格 ￥${finalPrice.toFixed(2)}`;
    document.getElementById('modalOverlay').style.display = 'block';
    document.getElementById('modalCart').classList.add('show');
});

// 关闭模态 overlay 点击
document.getElementById('modalOverlay').addEventListener('click', () => {
    document.getElementById('modalOverlay').style.display = 'none';
    document.getElementById('modalCart').classList.remove('show');
});

// 确认支付
document.getElementById('btnConfirm').addEventListener('click', () => {
    let basePrice = 16.9;
    let finalPrice = basePrice;
    let couponType = null;
    if (selectedCoupon && basePrice >= selectedCoupon.min){
        finalPrice = basePrice - selectedCoupon.discount;
        couponType = selectedCoupon.type;
    }
    let order = {
        product: "LYF 新疆葵花籽（30g 小包装，10包）",
        quantity: 1,
        basePrice: basePrice,
        coupon: couponType,
        finalPrice: finalPrice
    };
    alert(JSON.stringify(order, null, 2));
    document.getElementById('modalOverlay').style.display = 'none';
    document.getElementById('modalCart').classList.remove('show');
});
</script>
</body>
</html>