{
  "brief": [
    {
      "topic": "brief",
      "sender": "User",
      "content": "\nä¸ºç½‘ç«™åˆ›å»ºä¸€ä¸ªå“åº”å¼ä¸”è§†è§‰æ•ˆæœå¸å¼•äººçš„ç”µå•†äº§å“é”€å”®é¡µé¢å°éƒ¨ä»¶ã€‚\nç”¨æˆ·åº”èƒ½å¤Ÿæµè§ˆå•†å“åˆ—è¡¨ã€æŸ¥çœ‹å•†å“è¯¦æƒ…ã€é€‰æ‹©æ•°é‡å¹¶åŠ å…¥è´­ç‰©è½¦ï¼Œä»¥åŠä»è´­ç‰©è½¦ä¸­åˆ é™¤å•†å“ã€‚é¡µé¢åº”æ”¯æŒæ˜¾ç¤ºå•†å“ä»·æ ¼ã€æŠ˜æ‰£ä¿¡æ¯ã€åº“å­˜çŠ¶æ€å’ŒæŒ‰åˆ†ç±»æµè§ˆç­‰åŠŸèƒ½ã€‚\næ‚¨è¿˜å¯ä»¥æ·»åŠ ä»»ä½•å…¶ä»–åˆ›æ„åŠŸèƒ½æ¥æé«˜è½¬åŒ–ç‡å’Œè¶£å‘³æ€§ï¼Œä¾‹å¦‚é™æ—¶å€’è®¡æ—¶ã€çƒ­é”€æ ‡è®°æˆ–ç®€æ˜“è®¢å•æ‘˜è¦ã€‚\nä»…ä½¿ç”¨ HTMLã€CSS å’Œ JavaScript â€” ä¸è¦ä½¿ç”¨ Vueã€React æˆ–ä»»ä½•ç¬¬ä¸‰æ–¹åº“ã€‚ä½¿ç”¨ localStorage å­˜å‚¨è´­ç‰©è½¦ç­‰æ•°æ®ï¼Œç¡®ä¿ä¿¡æ¯åœ¨é¡µé¢åˆ·æ–°åä»èƒ½ä¿ç•™ã€‚ä¿æŒæ•´ä½“è®¾è®¡ç®€æ´ã€ç”¨æˆ·å‹å¥½ä¸”å¼•äººå…¥èƒœã€‚\n"
    }
  ],
  "tasks": [
    {
      "topic": "tasks",
      "sender": "TeamLeader",
      "content": {
        "available_roles": [
          "TeamLeader",
          "Engineer"
        ],
        "tasks": [
          {
            "role": "TeamLeader",
            "tasks": [
              "æ¢³ç†ç”µå•†å°éƒ¨ä»¶åŠŸèƒ½éœ€æ±‚ï¼ˆå•†å“æµè§ˆã€è´­ç‰©è½¦ã€æ•°æ®æŒä¹…åŒ–ï¼‰",
              "ç¡®ç«‹æŠ€æœ¯æ ˆä¸ºåŸç”Ÿ HTML/CSS/JS",
              "è§„åˆ’äº¤äº’æµç¨‹ä¸ localStorage æ•°æ®ç»“æ„"
            ]
          },
          {
            "role": "Engineer",
            "tasks": [
              "æ„å»ºå“åº”å¼ HTML é¡µé¢ç»“æ„",
              "ç¼–å†™ CSS æ ·å¼ç¡®ä¿è§†è§‰å¸å¼•åŠ›ä¸é€‚é…æ€§",
              "å®ç°å•†å“å±•ç¤ºã€åˆ†ç±»ç­›é€‰åŠè´­ç‰©è½¦æ ¸å¿ƒé€»è¾‘çš„ JavaScript ä»£ç ",
              "é›†æˆ localStorage æ•°æ®æŒä¹…åŒ–åŠŸèƒ½",
              "æ·»åŠ åˆ›æ„åŠŸèƒ½ï¼ˆå¦‚é™æ—¶å€’è®¡æ—¶æˆ–çƒ­é”€æ ‡è®°ï¼‰"
            ]
          }
        ]
      }
    }
  ],
  "html": [
    {
      "topic": "html",
      "sender": "Engineer",
      "content": "<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>æé€Ÿè´­ | ç°ä»£ç”µå•†å°éƒ¨ä»¶</title>\n    <style>\n        :root {\n            --primary: #FF5722;\n            --primary-hover: #E64A19;\n            --secondary: #2d3436;\n            --bg-color: #f4f7f6;\n            --card-bg: #ffffff;\n            --text-main: #2d3436;\n            --text-light: #636e72;\n            --border-radius: 12px;\n            --shadow: 0 10px 20px rgba(0,0,0,0.05);\n            --transition: all 0.3s ease;\n        }\n\n        * {\n            box-sizing: border-box;\n            margin: 0;\n            padding: 0;\n            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\n        }\n\n        body {\n            background-color: var(--bg-color);\n            color: var(--text-main);\n            line-height: 1.6;\n            overflow-x: hidden;\n        }\n\n        /* --- å¤´éƒ¨å¯¼èˆª --- */\n        header {\n            background: var(--card-bg);\n            padding: 1rem 5%;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            box-shadow: 0 2px 10px rgba(0,0,0,0.05);\n            position: sticky;\n            top: 0;\n            z-index: 100;\n        }\n\n        .logo {\n            font-size: 1.5rem;\n            font-weight: 800;\n            color: var(--secondary);\n            display: flex;\n            align-items: center;\n            gap: 5px;\n        }\n\n        .logo span {\n            color: var(--primary);\n        }\n\n        .cart-icon-wrapper {\n            position: relative;\n            cursor: pointer;\n            padding: 8px;\n            transition: var(--transition);\n        }\n\n        .cart-icon-wrapper:hover {\n            transform: scale(1.1);\n        }\n\n        .cart-badge {\n            position: absolute;\n            top: 0;\n            right: 0;\n            background: var(--primary);\n            color: white;\n            font-size: 0.7rem;\n            width: 20px;\n            height: 20px;\n            border-radius: 50%;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            font-weight: bold;\n        }\n\n        /* --- æ¨ªå¹…ä¸å€’è®¡æ—¶ --- */\n        .hero {\n            background: linear-gradient(135deg, #2d3436 0%, #000000 100%);\n            color: white;\n            padding: 3rem 5%;\n            display: flex;\n            flex-wrap: wrap;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 2rem;\n        }\n\n        .hero-text h1 {\n            font-size: 2.5rem;\n            margin-bottom: 0.5rem;\n        }\n\n        .countdown-box {\n            background: rgba(255, 255, 255, 0.1);\n            padding: 1rem 2rem;\n            border-radius: var(--border-radius);\n            backdrop-filter: blur(5px);\n            border: 1px solid rgba(255,255,255,0.2);\n            text-align: center;\n        }\n\n        .countdown-timer {\n            font-size: 2rem;\n            font-weight: bold;\n            color: var(--primary);\n            font-family: monospace;\n        }\n\n        /* --- åˆ†ç±»ä¸å¸ƒå±€ --- */\n        .container {\n            max-width: 1200px;\n            margin: 0 auto;\n            padding: 0 1rem 4rem;\n        }\n\n        .filter-bar {\n            display: flex;\n            gap: 1rem;\n            margin-bottom: 2rem;\n            overflow-x: auto;\n            padding-bottom: 0.5rem;\n        }\n\n        .filter-btn {\n            background: var(--card-bg);\n            border: 1px solid #ddd;\n            padding: 0.5rem 1.5rem;\n            border-radius: 30px;\n            cursor: pointer;\n            transition: var(--transition);\n            white-space: nowrap;\n            font-weight: 600;\n        }\n\n        .filter-btn.active, .filter-btn:hover {\n            background: var(--primary);\n            color: white;\n            border-color: var(--primary);\n            box-shadow: 0 4px 10px rgba(255, 87, 34, 0.3);\n        }\n\n        /* --- å•†å“ç½‘æ ¼ --- */\n        .product-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));\n            gap: 2rem;\n        }\n\n        .product-card {\n            background: var(--card-bg);\n            border-radius: var(--border-radius);\n            overflow: hidden;\n            box-shadow: var(--shadow);\n            transition: var(--transition);\n            position: relative;\n            display: flex;\n            flex-direction: column;\n        }\n\n        .product-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 15px 30px rgba(0,0,0,0.1);\n        }\n\n        .card-image {\n            width: 100%;\n            height: 200px;\n            object-fit: cover;\n            background-color: #eee;\n        }\n\n        .badge {\n            position: absolute;\n            top: 10px;\n            left: 10px;\n            padding: 4px 10px;\n            border-radius: 4px;\n            color: white;\n            font-size: 0.8rem;\n            font-weight: bold;\n            text-transform: uppercase;\n        }\n\n        .badge-hot { background: #e74c3c; }\n        .badge-sale { background: #f1c40f; color: #333; }\n\n        .card-body {\n            padding: 1.5rem;\n            display: flex;\n            flex-direction: column;\n            flex-grow: 1;\n        }\n\n        .category-tag {\n            font-size: 0.8rem;\n            color: var(--text-light);\n            margin-bottom: 0.5rem;\n            text-transform: uppercase;\n            letter-spacing: 1px;\n        }\n\n        .product-title {\n            font-size: 1.1rem;\n            margin-bottom: 0.5rem;\n            font-weight: 700;\n        }\n\n        .price-wrapper {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n            margin-bottom: 1rem;\n        }\n\n        .current-price {\n            font-size: 1.3rem;\n            color: var(--primary);\n            font-weight: 800;\n        }\n\n        .original-price {\n            text-decoration: line-through;\n            color: #aaa;\n            font-size: 0.9rem;\n        }\n\n        .stock-status {\n            font-size: 0.8rem;\n            margin-bottom: 1rem;\n        }\n        .in-stock { color: #27ae60; }\n        .low-stock { color: #e67e22; }\n\n        .add-btn {\n            margin-top: auto;\n            width: 100%;\n            padding: 0.8rem;\n            background: var(--secondary);\n            color: white;\n            border: none;\n            border-radius: 8px;\n            cursor: pointer;\n            font-weight: 600;\n            transition: var(--transition);\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            gap: 8px;\n        }\n\n        .add-btn:hover {\n            background: var(--primary);\n        }\n\n        .add-btn:disabled {\n            background: #ccc;\n            cursor: not-allowed;\n        }\n\n        /* --- è´­ç‰©è½¦ä¾§è¾¹æ  --- */\n        .cart-overlay {\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: rgba(0,0,0,0.5);\n            z-index: 999;\n            opacity: 0;\n            visibility: hidden;\n            transition: var(--transition);\n        }\n\n        .cart-overlay.open {\n            opacity: 1;\n            visibility: visible;\n        }\n\n        .cart-sidebar {\n            position: fixed;\n            top: 0;\n            right: -400px;\n            width: 400px;\n            max-width: 100%;\n            height: 100%;\n            background: white;\n            z-index: 1000;\n            transition: var(--transition);\n            display: flex;\n            flex-direction: column;\n            box-shadow: -5px 0 15px rgba(0,0,0,0.1);\n        }\n\n        .cart-overlay.open .cart-sidebar {\n            right: 0;\n        }\n\n        .cart-header {\n            padding: 1.5rem;\n            border-bottom: 1px solid #eee;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n        }\n\n        .close-cart {\n            background: none;\n            border: none;\n            font-size: 1.5rem;\n            cursor: pointer;\n        }\n\n        .cart-items {\n            flex-grow: 1;\n            overflow-y: auto;\n            padding: 1.5rem;\n        }\n\n        .cart-item {\n            display: flex;\n            gap: 1rem;\n            margin-bottom: 1.5rem;\n            border-bottom: 1px solid #f4f4f4;\n            padding-bottom: 1rem;\n        }\n\n        .cart-item-img {\n            width: 70px;\n            height: 70px;\n            border-radius: 8px;\n            object-fit: cover;\n        }\n\n        .cart-item-details {\n            flex-grow: 1;\n        }\n\n        .cart-item-title {\n            font-weight: 600;\n            font-size: 0.9rem;\n            margin-bottom: 4px;\n        }\n\n        .cart-item-price {\n            color: var(--primary);\n            font-weight: 700;\n        }\n\n        .cart-controls {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n            margin-top: 5px;\n        }\n\n        .qty-btn {\n            width: 24px;\n            height: 24px;\n            border-radius: 4px;\n            border: 1px solid #ddd;\n            background: white;\n            cursor: pointer;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n\n        .remove-btn {\n            color: #e74c3c;\n            font-size: 0.8rem;\n            margin-left: auto;\n            cursor: pointer;\n            text-decoration: underline;\n        }\n\n        .cart-footer {\n            padding: 1.5rem;\n            background: #fafafa;\n            border-top: 1px solid #eee;\n        }\n\n        .cart-summary-row {\n            display: flex;\n            justify-content: space-between;\n            margin-bottom: 0.5rem;\n            font-size: 0.9rem;\n        }\n\n        .total-row {\n            font-size: 1.2rem;\n            font-weight: 800;\n            margin-top: 1rem;\n            border-top: 1px solid #ddd;\n            padding-top: 1rem;\n        }\n\n        .checkout-btn {\n            width: 100%;\n            padding: 1rem;\n            background: var(--primary);\n            color: white;\n            border: none;\n            border-radius: 8px;\n            font-size: 1rem;\n            font-weight: bold;\n            cursor: pointer;\n            margin-top: 1rem;\n            transition: var(--transition);\n        }\n\n        .checkout-btn:hover {\n            background: var(--primary-hover);\n        }\n\n        /* --- æç¤ºæ¡† (Toast) --- */\n        .toast {\n            position: fixed;\n            bottom: 20px;\n            left: 50%;\n            transform: translateX(-50%) translateY(100px);\n            background: #333;\n            color: white;\n            padding: 12px 24px;\n            border-radius: 30px;\n            box-shadow: 0 5px 15px rgba(0,0,0,0.2);\n            opacity: 0;\n            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);\n            z-index: 2000;\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        .toast.show {\n            transform: translateX(-50%) translateY(0);\n            opacity: 1;\n        }\n\n        /* å“åº”å¼é€‚é… */\n        @media (max-width: 768px) {\n            .hero {\n                text-align: center;\n                flex-direction: column;\n                gap: 1.5rem;\n            }\n            .cart-sidebar {\n                width: 100%;\n            }\n            .hero-text h1 {\n                font-size: 1.8rem;\n            }\n        }\n    </style>\n</head>\n<body>\n\n    <!-- å¤´éƒ¨ -->\n    <header>\n        <div class=\"logo\">\n            <span>âš¡</span> æé€Ÿè´­\n        </div>\n        <div class=\"cart-icon-wrapper\" onclick=\"toggleCart()\">\n            <svg width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <circle cx=\"9\" cy=\"21\" r=\"1\"></circle>\n                <circle cx=\"20\" cy=\"21\" r=\"1\"></circle>\n                <path d=\"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6\"></path>\n            </svg>\n            <div class=\"cart-badge\" id=\"cart-badge\">0</div>\n        </div>\n    </header>\n\n    <!-- æ¨ªå¹… -->\n    <div class=\"hero\">\n        <div class=\"hero-text\">\n            <h1>å¹´ç»ˆè¶…çº§å¤§ä¿ƒ</h1>\n            <p>å…¨åœºå•†å“ä½è‡³ 5 æŠ˜ï¼Œé™æ—¶ä¼˜æƒ ä¸å®¹é”™è¿‡ï¼</p>\n        </div>\n        <div class=\"countdown-box\">\n            <p>è·æ´»åŠ¨ç»“æŸä»…å‰©</p>\n            <div class=\"countdown-timer\" id=\"timer\">02:14:35</div>\n        </div>\n    </div>\n\n    <!-- ä¸»ä½“å†…å®¹ -->\n    <div class=\"container\">\n        <!-- ç­›é€‰æ  -->\n        <div class=\"filter-bar\" id=\"category-filters\">\n            <button class=\"filter-btn active\" onclick=\"filterProducts('all')\">å…¨éƒ¨å•†å“</button>\n            <button class=\"filter-btn\" onclick=\"filterProducts('electronics')\">æ•°ç ç”µå­</button>\n            <button class=\"filter-btn\" onclick=\"filterProducts('fashion')\">æ½®æµæœé¥°</button>\n            <button class=\"filter-btn\" onclick=\"filterProducts('lifestyle')\">å±…å®¶ç”Ÿæ´»</button>\n        </div>\n\n        <!-- å•†å“åˆ—è¡¨ -->\n        <div class=\"product-grid\" id=\"product-list\">\n            <!-- å•†å“å¡ç‰‡å°†é€šè¿‡ JS æ’å…¥ -->\n        </div>\n    </div>\n\n    <!-- è´­ç‰©è½¦ä¾§è¾¹æ  -->\n    <div class=\"cart-overlay\" id=\"cart-overlay\" onclick=\"toggleCart()\">\n        <div class=\"cart-sidebar\" onclick=\"event.stopPropagation()\">\n            <div class=\"cart-header\">\n                <h2>æˆ‘çš„è´­ç‰©è½¦</h2>\n                <button class=\"close-cart\" onclick=\"toggleCart()\">Ã—</button>\n            </div>\n            <div class=\"cart-items\" id=\"cart-items-container\">\n                <!-- è´­ç‰©è½¦å•†å“é¡¹ -->\n                <div style=\"text-align: center; padding: 2rem; color: #999;\">\n                    è´­ç‰©è½¦æ˜¯ç©ºçš„ï¼Œå¿«å»é€‰è´­å§ï¼\n                </div>\n            </div>\n            <div class=\"cart-footer\">\n                <div class=\"cart-summary-row\">\n                    <span>å°è®¡</span>\n                    <span id=\"cart-subtotal\">Â¥0.00</span>\n                </div>\n                <div class=\"cart-summary-row\" style=\"color: #e74c3c;\">\n                    <span>ä¼˜æƒ </span>\n                    <span id=\"cart-discount\">-Â¥0.00</span>\n                </div>\n                <div class=\"cart-summary-row total-row\">\n                    <span>æ€»è®¡</span>\n                    <span id=\"cart-total\">Â¥0.00</span>\n                </div>\n                <button class=\"checkout-btn\" onclick=\"checkout()\">ç«‹å³ç»“ç®—</button>\n            </div>\n        </div>\n    </div>\n\n    <!-- æç¤ºæ¡† -->\n    <div class=\"toast\" id=\"toast\">\n        <span>âœ…</span> <span id=\"toast-message\">å·²åŠ å…¥è´­ç‰©è½¦</span>\n    </div>\n\n    <script>\n        // --- æ¨¡æ‹Ÿæ•°æ® ---\n        const productsData = [\n            {\n                id: 1,\n                name: \"æ— çº¿é™å™ªè€³æœº Pro\",\n                price: 1299,\n                originalPrice: 1699,\n                category: \"electronics\",\n                image: \"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500&auto=format&fit=crop&q=60\",\n                stock: 15,\n                isHot: true\n            },\n            {\n                id: 2,\n                name: \"æç®€æœºæ¢°é”®ç›˜\",\n                price: 399,\n                originalPrice: 459,\n                category: \"electronics\",\n                image: \"https://images.unsplash.com/photo-1587829741301-dc798b91a603?w=500&auto=format&fit=crop&q=60\",\n                stock: 5,\n                isHot: false\n            },\n            {\n                id: 3,\n                name: \"å¤å¤èƒ¶ç‰‡ç›¸æœº\",\n                price: 2499,\n                originalPrice: 2899,\n                category: \"electronics\",\n                image: \"https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?w=500&auto=format&fit=crop&q=60\",\n                stock: 2,\n                isHot: false\n            },\n            {\n                id: 4,\n                name: \"è®¾è®¡å¸ˆæ¬¾ä¸¹å®å¤¹å…‹\",\n                price: 599,\n                originalPrice: 899,\n                category: \"fashion\",\n                image: \"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500&auto=format&fit=crop&q=60\",\n                stock: 20,\n                isHot: true\n            },\n            {\n                id: 5,\n                name: \"ç»å…¸å¸†å¸ƒè¿åŠ¨é‹\",\n                price: 299,\n                originalPrice: 399,\n                category: \"fashion\",\n                image: \"https://images.unsplash.com/photo-1491553895911-0055eca6402d?w=500&auto=format&fit=crop&q=60\",\n                stock: 10,\n                isHot: false\n            },\n            {\n                id: 6,\n                name: \"åŒ—æ¬§é£é™¶ç“·èŠ±ç“¶\",\n                price: 89,\n                originalPrice: 129,\n                category: \"lifestyle\",\n                image: \"https://images.unsplash.com/photo-1581783342308-f792ca93be17?w=500&auto=format&fit=crop&q=60\",\n                stock: 30,\n                isHot: false\n            },\n            {\n                id: 7,\n                name: \"æ‰‹å†²å’–å•¡å¥—è£…\",\n                price: 350,\n                originalPrice: 420,\n                category: \"lifestyle\",\n                image: \"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=500&auto=format&fit=crop&q=60\",\n                stock: 8,\n                isHot: true\n            },\n            {\n                id: 8,\n                name: \"æ™ºèƒ½è¿åŠ¨æ‰‹è¡¨\",\n                price: 899,\n                originalPrice: 1299,\n                category: \"electronics\",\n                image: \"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500&auto=format&fit=crop&q=60\",\n                stock: 0,\n                isHot: false\n            }\n        ];\n\n        // --- çŠ¶æ€ç®¡ç† ---\n        let cart = JSON.parse(localStorage.getItem('shopCart')) || [];\n        let currentCategory = 'all';\n\n        // --- åˆå§‹åŒ– ---\n        document.addEventListener('DOMContentLoaded', () => {\n            renderProducts();\n            updateCartUI();\n            startTimer();\n        });\n\n        // --- æ¸²æŸ“å•†å“ ---\n        function renderProducts() {\n            const grid = document.getElementById('product-list');\n            grid.innerHTML = '';\n\n            const filtered = currentCategory === 'all' \n                ? productsData \n                : productsData.filter(p => p.category === currentCategory);\n\n            filtered.forEach(product => {\n                const discount = Math.round((1 - product.price / product.originalPrice) * 100);\n                const stockHtml = product.stock > 0 \n                    ? (product.stock < 10 ? `<span class=\"stock-status low-stock\">ä»…å‰© ${product.stock} ä»¶</span>` : `<span class=\"stock-status in-stock\">åº“å­˜å……è¶³</span>`) \n                    : `<span class=\"stock-status\" style=\"color:red\">æš‚æ—¶ç¼ºè´§</span>`;\n                \n                const disabled = product.stock === 0 ? 'disabled' : '';\n                const btnText = product.stock === 0 ? 'ç¼ºè´§' : 'åŠ å…¥è´­ç‰©è½¦';\n                const hotBadge = product.isHot ? `<div class=\"badge badge-hot\">çƒ­é”€</div>` : '';\n                const saleBadge = discount > 0 ? `<div class=\"badge badge-sale\" style=\"${product.isHot ? 'left: 60px' : ''}\">-${discount}%</div>` : '';\n\n                const card = document.createElement('div');\n                card.className = 'product-card';\n                card.innerHTML = `\n                    ${hotBadge}\n                    ${saleBadge}\n                    <img src=\"${product.image}\" class=\"card-image\" alt=\"${product.name}\">\n                    <div class=\"card-body\">\n                        <div class=\"category-tag\">${getCategoryName(product.category)}</div>\n                        <h3 class=\"product-title\">${product.name}</h3>\n                        <div class=\"price-wrapper\">\n                            <span class=\"current-price\">Â¥${product.price}</span>\n                            <span class=\"original-price\">Â¥${product.originalPrice}</span>\n                        </div>\n                        ${stockHtml}\n                        <button class=\"add-btn\" onclick=\"addToCart(${product.id})\" ${disabled}>\n                            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                                <path d=\"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z\"></path>\n                                <line x1=\"3\" y1=\"6\" x2=\"21\" y2=\"6\"></line>\n                                <path d=\"M16 10a4 4 0 0 1-8 0\"></path>\n                            </svg>\n                            ${btnText}\n                        </button>\n                    </div>\n                `;\n                grid.appendChild(card);\n            });\n        }\n\n        // --- è¾…åŠ©å‡½æ•° ---\n        function getCategoryName(cat) {\n            const map = { 'electronics': 'æ•°ç ', 'fashion': 'æœé¥°', 'lifestyle': 'ç”Ÿæ´»' };\n            return map[cat] || 'å…¶ä»–';\n        }\n\n        function filterProducts(category) {\n            currentCategory = category;\n            \n            // æ›´æ–°æŒ‰é’®æ ·å¼\n            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));\n            event.target.classList.add('active');\n\n            renderProducts();\n        }\n\n        // --- è´­ç‰©è½¦é€»è¾‘ ---\n        function addToCart(id) {\n            const product = productsData.find(p => p.id === id);\n            const existingItem = cart.find(item => item.id === id);\n\n            if (product.stock <= 0) return;\n\n            // æ£€æŸ¥æœ¬åœ°åº“å­˜é™åˆ¶\n            const currentQty = existingItem ? existingItem.qty : 0;\n            if (currentQty >= product.stock) {\n                showToast('âŒ åº“å­˜ä¸è¶³ï¼Œæ— æ³•æ·»åŠ æ›´å¤š');\n                return;\n            }\n\n            if (existingItem) {\n                existingItem.qty++;\n            } else {\n                cart.push({ ...product, qty: 1 });\n            }\n\n            saveCart();\n            updateCartUI();\n            showToast(`å·²å°† ${product.name} åŠ å…¥è´­ç‰©è½¦`);\n            \n            // æ‰“å¼€è´­ç‰©è½¦ä»¥å±•ç¤ºåé¦ˆ (å¯é€‰ï¼Œè¿™é‡Œä»…ç”¨çº¢ç‚¹å’ŒToast)\n            // toggleCart(); \n        }\n\n        function removeFromCart(id) {\n            cart = cart.filter(item => item.id !== id);\n            saveCart();\n            updateCartUI();\n        }\n\n        function changeQty(id, change) {\n            const item = cart.find(item => item.id === id);\n            const product = productsData.find(p => p.id === id);\n            \n            if (!item) return;\n\n            const newQty = item.qty + change;\n            \n            if (newQty > product.stock) {\n                showToast('åº“å­˜ä¸è¶³');\n                return;\n            }\n\n            if (newQty > 0) {\n                item.qty = newQty;\n            } else {\n                // æ•°é‡ä¸º0æ—¶ä¸ç›´æ¥åˆ é™¤ï¼Œéœ€ç‚¹å‡»ç§»é™¤æŒ‰é’®ï¼Œæˆ–è€…è®¾ä¸º1 (æ­¤å¤„è®¾ä¸º1)\n                item.qty = 1;\n            }\n            \n            saveCart();\n            updateCartUI();\n        }\n\n        function saveCart() {\n            localStorage.setItem('shopCart', JSON.stringify(cart));\n        }\n\n        function updateCartUI() {\n            const container = document.getElementById('cart-items-container');\n            const badge = document.getElementById('cart-badge');\n            const subtotalEl = document.getElementById('cart-subtotal');\n            const discountEl = document.getElementById('cart-discount');\n            const totalEl = document.getElementById('cart-total');\n\n            // æ›´æ–°å¾½ç« \n            const totalCount = cart.reduce((sum, item) => sum + item.qty, 0);\n            badge.textContent = totalCount;\n            badge.style.display = totalCount > 0 ? 'flex' : 'none';\n\n            // æ¸²æŸ“åˆ—è¡¨\n            if (cart.length === 0) {\n                container.innerHTML = `<div style=\"text-align: center; padding: 3rem 0; color: #999;\">\n                    <svg width=\"50\" height=\"50\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1\" style=\"margin-bottom:10px\">\n                        <circle cx=\"9\" cy=\"21\" r=\"1\"></circle>\n                        <circle cx=\"20\" cy=\"21\" r=\"1\"></circle>\n                        <path d=\"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6\"></path>\n                    </svg><br>è´­ç‰©è½¦ç©ºç©ºå¦‚ä¹Ÿ</div>`;\n                subtotalEl.textContent = 'Â¥0.00';\n                discountEl.textContent = '-Â¥0.00';\n                totalEl.textContent = 'Â¥0.00';\n                return;\n            }\n\n            container.innerHTML = '';\n            let subtotal = 0;\n            let total = 0;\n\n            cart.forEach(item => {\n                const itemOriginalTotal = item.originalPrice * item.qty;\n                const itemTotal = item.price * item.qty;\n                \n                subtotal += itemOriginalTotal;\n                total += itemTotal;\n\n                const el = document.createElement('div');\n                el.className = 'cart-item';\n                el.innerHTML = `\n                    <img src=\"${item.image}\" class=\"cart-item-img\" alt=\"${item.name}\">\n                    <div class=\"cart-item-details\">\n                        <div class=\"cart-item-title\">${item.name}</div>\n                        <div class=\"cart-item-price\">Â¥${item.price} <span style=\"font-size:0.8em; color:#aaa; text-decoration:line-through\">Â¥${item.originalPrice}</span></div>\n                        <div class=\"cart-controls\">\n                            <button class=\"qty-btn\" onclick=\"changeQty(${item.id}, -1)\">-</button>\n                            <span>${item.qty}</span>\n                            <button class=\"qty-btn\" onclick=\"changeQty(${item.id}, 1)\">+</button>\n                            <span class=\"remove-btn\" onclick=\"removeFromCart(${item.id})\">åˆ é™¤</span>\n                        </div>\n                    </div>\n                `;\n                container.appendChild(el);\n            });\n\n            subtotalEl.textContent = `Â¥${subtotal.toFixed(2)}`;\n            discountEl.textContent = `-Â¥${(subtotal - total).toFixed(2)}`;\n            totalEl.textContent = `Â¥${total.toFixed(2)}`;\n        }\n\n        function toggleCart() {\n            document.getElementById('cart-overlay').classList.toggle('open');\n        }\n\n        function checkout() {\n            if (cart.length === 0) {\n                showToast('è´­ç‰©è½¦æ˜¯ç©ºçš„');\n                return;\n            }\n            if (confirm(`ç¡®è®¤æ”¯ä»˜ Â¥${document.getElementById('cart-total').textContent.replace('Â¥','')} å—ï¼Ÿ`)) {\n                cart = [];\n                saveCart();\n                updateCartUI();\n                toggleCart();\n                showToast('ğŸ‰ è®¢å•æ”¯ä»˜æˆåŠŸï¼');\n            }\n        }\n\n        // --- äº¤äº’ç‰¹æ•ˆ ---\n        function showToast(msg) {\n            const toast = document.getElementById('toast');\n            const msgEl = document.getElementById('toast-message');\n            msgEl.textContent = msg;\n            toast.classList.add('show');\n            setTimeout(() => {\n                toast.classList.remove('show');\n            }, 3000);\n        }\n\n        // --- å€’è®¡æ—¶é€»è¾‘ ---\n        function startTimer() {\n            // è®¾ç½®ä¸€ä¸ªæœªæ¥çš„æ—¶é—´ç‚¹ (24å°æ—¶å)\n            let duration = 24 * 60 * 60; \n            // å°è¯•ä»sessionStorageè¯»å–ï¼Œä¿æŒåˆ·æ–°åè¿è´¯æ€§\n            const savedTime = sessionStorage.getItem('timerEnd');\n            let endTime;\n\n            if (savedTime && new Date(savedTime) > new Date()) {\n                endTime = new Date(savedTime);\n            } else {\n                endTime = new Date();\n                endTime.setSeconds(endTime.getSeconds() + duration);\n                sessionStorage.setItem('timerEnd', endTime);\n            }\n\n            const timerEl = document.getElementById('timer');\n\n            setInterval(() => {\n                const now = new Date();\n                const diff = endTime - now;\n\n                if (diff <= 0) {\n                    timerEl.textContent = \"00:00:00\";\n                    return;\n                }\n\n                const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n                const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\n                const s = Math.floor((diff % (1000 * 60)) / 1000);\n\n                timerEl.textContent = `${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;\n            }, 1000);\n        }\n    </script>\n</body>\n</html>"
    }
  ]
}