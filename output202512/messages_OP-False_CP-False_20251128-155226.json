{
  "brief": [
    {
      "topic": "brief",
      "sender": "User",
      "content": "\n请创建一个包含 HTML、CSS 和 JavaScript 的**单文件（Single HTML File）**电商产品详情页。该网页必须是一个完整的、可交互的原型。\n\n# Product Context\n我们需要为一款春节热销零食制作落地页，模仿京东（JD.com）的移动端/PC端响应式布局风格。\n* **品牌**：LYF\n* **商品名称**：新疆原产葵花籽（30g 独立小包装）\n* **价格策略**：10包组合装，售价 16.9 元。\n\n# Functional Requirements (功能需求)\n1.  **布局结构**：\n    * **顶部**：简单的导航栏（包含 Logo 占位符和搜索框占位符）。\n    * **左侧/顶部（视宽度而定）**：产品主图展示区。包含 1 张大图和 2 张缩略图。点击缩略图需切换大图。\n     1 张大图链接“https://detail.1688.com/offer/988089985291.html?spm=a261b.8768355.pic-list.30.432360cd4VYDtD”\n    缩略图1“https://detail.1688.com/offer/981519203786.html?spm=a261b.8768355.pic-list.16.424760cd9rabYd”\n    缩略图2“https://detail.1688.com/offer/990628769471.html?spm=a261b.8768355.pic-list.7.667160cdECaV86”\n    * **右侧/底部（视宽度而定）**：产品信息区。包含标题、红色价格高亮、促销标签（“春节特惠”、“包邮”）。\n    * **交互区**：数量选择器（支持 +/-，且数量不能小于 1），以及“立即购买”和“加入购物车”两个按钮。\n    * **详情区**：页面底部需包含 Tab 切换功能（“商品介绍” vs “售后保障”），点击 Tab 切换显示不同文本内容。\n\n2.  **核心逻辑 (JavaScript)**：\n    * **数量联动**：默认数量为 1。点击 +/- 按钮更新数量，并实时更新“总价”（Total Price = 16.9 * 数量）。结果保留 1 位小数。\n    * **购物车反馈**：点击“加入购物车”后，弹出轻提示（Toast Notification）：\"已成功加入购物车：LYF葵花籽 x [数量]\"，2秒后自动消失。\n    * **图片切换**：鼠标悬停或点击缩略图时，主图需平滑切换。\n\n3.  **UI/Design Requirements (设计规范)**：\n    * **配色**：主色调使用京东红（#f23030 或类似），背景色为浅灰（#f6f6f6），内容区为白色。\n    * **图片处理**：由于无法访问外部图库，请使用 placeholder 图片服务（如 `https://via.placeholder.com/400x400?text=LYF+Product`）来生成不同颜色的占位图，确保页面不出现破图。\n    * **响应式**：页面需适配手机端和 PC 端（使用 Flexbox 或 Grid 布局）。\n4.营销倒计时系统 (Complex Logic)\n在价格旁显示“春节限时抢购倒计时”。\n逻辑要求：倒计时设定为 2 小时 0 分 0 秒。必须实时跳动（每秒 -1）。\n边界状态：当倒计时归零时，按钮变为灰色“活动已结束”，且不可点击。\n\n5. 优惠券与价格计算 (State Management)\n界面中间需展示两张优惠券：\nA券：满 10 减 2 元\nB券：满 20 减 5 元\n\n6.交互逻辑：\n用户点击优惠券可“领取”（变为高亮状态，只能选一张）。\n数量选择器调整商品数量时，**总价（Total Price）**必须根据（单价 * 数量 - 优惠券金额）实时重新计算。\n如果总价不满足优惠券门槛，优惠券自动失效（取消高亮）。\n\n7. 评论区筛选器 (DOM Manipulation)\n展示评论列表。\n顶部有 Filter 按钮：“全部”、“好评”、“中评”。\n交互逻辑：点击不同按钮，下方评论列表必须根据 productData.reviews 数组进行实时过滤并重新渲染 DOM。\n\n8. 模态框购物车 (UI Interaction)\n点击底部的“立即购买”按钮，不跳转，而是从底部弹出一个半透明遮罩层 + 确认面板（Slide-up Modal）。\n面板内显示：已选商品信息、最终计算后的价格。\n包含“确认支付”按钮，点击后 alert 输出最终订单信息对象。\n\n# Technical Constraints (技术约束)\n* 所有代码（HTML, CSS, JS）必须包含在一个 HTML 文件中，CSS 放 `<style>`，JS 放 `<script>`。\n* 代码结构清晰，有注释，不依赖 React/Vue 等外部框架，使用原生 Vanilla JS。\n* CSS 需处理好按钮的 hover 状态和阴影细节，体现电商的高级感。\n"
    }
  ],
  "tasks": [
    {
      "topic": "tasks",
      "sender": "TeamLeader",
      "content": {
        "available_roles": [
          "TeamLeader",
          "Engineer"
        ],
        "tasks": [
          {
            "role": "TeamLeader",
            "tasks": [
              "梳理客户需求",
              "确定交付物为单文件 HTML 电商产品详情页（包含 HTML/CSS/JS，响应式布局，交互逻辑）",
              "划分功能模块：布局结构（导航栏、产品图展示区、信息区、详情Tab）、核心交互逻辑（数量选择器、总价计算、优惠券领取与失效、购物车提示、图片切换、倒计时、评论筛选、购买模态框）",
              "明确 UI 设计规范（配色、背景、按钮样式、响应式设计）",
              "制定技术约束（单文件、CSS 在<style>、JS 在<script>、Vanilla JS、结构清晰、有注释）"
            ]
          },
          {
            "role": "Engineer",
            "tasks": [
              "编写完整的单文件 HTML 页面，包含产品详情页布局与样式",
              "使用 Flexbox 或 Grid 实现响应式布局，适配 PC 和移动端",
              "实现主图与缩略图平滑切换（hover/click）",
              "实现数量选择器（+/- 按钮)联动总价功能（保留 1 位小数）",
              "实现优惠券选择与失效逻辑（满减条件判断，自动取消高亮）",
              "实现购物车弹出 Toast 提示，2 秒后自动消失",
              "在价格区显示倒计时系统（2 小时实时跳动，倒计时结束按钮禁用并显示“活动已结束”）",
              "实现评论区筛选功能（根据评论数组过滤并渲染 DOM）",
              "实现“立即购买”按钮弹出模态框，显示订单信息并包含确认支付按钮（alert 输出订单对象）",
              "使用 placeholder 图片生成不同颜色的占位图，保证无破图",
              "添加按钮 hover 状态与阴影效果，体现高级感",
              "保证所有 CSS 置于<style>，JS 置于<script>，结构清晰并加注释"
            ]
          }
        ]
      }
    }
  ],
  "html": [
    {
      "topic": "html",
      "sender": "Engineer",
      "content": "<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n<meta charset=\"UTF-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n<title>LYF新疆葵花籽详情页</title>\n<style>\nbody { margin:0; font-family:Arial, sans-serif; background:#f6f6f6; }\nheader { background:#fff; box-shadow:0 2px 4px rgba(0,0,0,0.1); padding:10px 20px; display:flex; align-items:center; justify-content:space-between; }\n.logo { font-weight:bold; color:#f23030; font-size:20px; }\n.search-box input { padding:5px; border:1px solid #ccc; border-radius:4px; }\nmain { display:flex; flex-wrap:wrap; max-width:1200px; margin:20px auto; background:#fff; padding:20px; border-radius:6px; }\n.product-images { flex:1 1 400px; display:flex; flex-direction:column; align-items:center; }\n.product-images img { max-width:100%; border-radius:4px; transition:opacity 0.3s ease; }\n.thumbnails { display:flex; gap:10px; margin-top:10px; }\n.thumbnails img { width:80px; height:80px; object-fit:cover; cursor:pointer; border:2px solid transparent; }\n.thumbnails img:hover { border-color:#f23030; }\n.product-info { flex:1 1 400px; padding:10px 20px; }\n.product-info h1 { font-size:24px; margin:0 0 10px; }\n.price { font-size:24px; color:#f23030; font-weight:bold; }\n.tags { margin:10px 0; }\n.tag { display:inline-block; background:#f23030; color:#fff; padding:2px 8px; border-radius:4px; font-size:12px; margin-right:5px; }\n.countdown { color:#666; margin:10px 0; }\n.quantity-selector { display:flex; align-items:center; margin:10px 0; }\n.quantity-selector button { width:30px; height:30px; border:none; background:#eee; font-size:18px; cursor:pointer; }\n.quantity-selector input { width:50px; text-align:center; margin:0 5px; border:1px solid #ccc; border-radius:4px; }\n.coupons { display:flex; gap:10px; margin:10px 0; }\n.coupon { flex:1; background:#ffeeee; padding:10px; border:2px dashed #f23030; border-radius:4px; cursor:pointer; text-align:center; }\n.coupon.active { background:#f23030; color:#fff; }\n.actions button { padding:10px 20px; margin-right:10px; border:none; border-radius:4px; color:#fff; cursor:pointer; font-size:16px; box-shadow:0 2px 4px rgba(0,0,0,0.2); }\n.buy-now { background:#f23030; }\n.add-cart { background:#ff6a00; }\n.actions button:disabled { background:#ccc; cursor:not-allowed; }\n.total-price { margin-top:10px; font-size:18px; font-weight:bold; }\n.tabs { margin-top:20px; border-top:1px solid #ddd; }\n.tab-buttons { display:flex; }\n.tab-buttons button { flex:1; padding:10px; background:#f6f6f6; border:none; cursor:pointer; }\n.tab-buttons button.active { background:#fff; border-bottom:2px solid #f23030; }\n.tab-content { padding:10px; }\n.toast { position:fixed; bottom:20px; left:50%; transform:translateX(-50%); background:rgba(0,0,0,0.8); color:#fff; padding:10px 20px; border-radius:4px; display:none; }\n.reviews { background:#fff; margin:20px auto; max-width:1200px; padding:20px; border-radius:6px; }\n.review-filters { display:flex; gap:10px; margin-bottom:10px; }\n.review-filters button { padding:6px 12px; border:none; background:#eee; cursor:pointer; border-radius:4px; }\n.review-filters button.active { background:#f23030; color:#fff; }\n.review-list { list-style:none; padding:0; margin:0; }\n.review-list li { padding:10px; border-bottom:1px solid #ddd; }\n.modal-overlay { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); display:none; align-items:flex-end; justify-content:center; }\n.modal { background:#fff; width:100%; max-height:50%; padding:20px; border-top-left-radius:10px; border-top-right-radius:10px; }\n.modal button { margin-top:10px; padding:10px 20px; border:none; border-radius:4px; background:#f23030; color:#fff; cursor:pointer; }\n@media(max-width:768px){\n  main { flex-direction:column; }\n}\n</style>\n</head>\n<body>\n<header>\n<div class=\"logo\">LYF</div>\n<div class=\"search-box\"><input type=\"text\" placeholder=\"搜索商品\"></div>\n</header>\n<main>\n<div class=\"product-images\">\n<a href=\"https://detail.1688.com/offer/988089985291.html?spm=a261b.8768355.pic-list.30.432360cd4VYDtD\" target=\"_blank\">\n<img id=\"mainImage\" src=\"https://via.placeholder.com/400x400?text=LYF+Product+Main\" alt=\"主图\">\n</a>\n<div class=\"thumbnails\">\n<img data-src=\"https://via.placeholder.com/400x400/ffcccc?text=Thumb1\" alt=\"缩略图1\">\n<img data-src=\"https://via.placeholder.com/400x400/ccffcc?text=Thumb2\" alt=\"缩略图2\">\n</div>\n</div>\n<div class=\"product-info\">\n<h1>新疆原产葵花籽（30g 独立小包装）</h1>\n<div class=\"price\">￥<span id=\"unitPrice\">16.9</span></div>\n<div class=\"tags\">\n<span class=\"tag\">春节特惠</span>\n<span class=\"tag\">包邮</span>\n</div>\n<div class=\"countdown\">春节限时抢购倒计时：<span id=\"countdown\">02:00:00</span></div>\n<div class=\"quantity-selector\">\n<button id=\"minusBtn\">-</button>\n<input type=\"number\" id=\"quantityInput\" value=\"1\" min=\"1\">\n<button id=\"plusBtn\">+</button>\n</div>\n<div class=\"coupons\">\n<div class=\"coupon\" data-threshold=\"10\" data-discount=\"2\">满10减2元</div>\n<div class=\"coupon\" data-threshold=\"20\" data-discount=\"5\">满20减5元</div>\n</div>\n<div class=\"actions\">\n<button id=\"buyNowBtn\" class=\"buy-now\">立即购买</button>\n<button id=\"addCartBtn\" class=\"add-cart\">加入购物车</button>\n</div>\n<div class=\"total-price\">总价：￥<span id=\"totalPrice\">16.9</span></div>\n</div>\n</main>\n<div class=\"tabs\">\n<div class=\"tab-buttons\">\n<button class=\"active\" data-tab=\"intro\">商品介绍</button>\n<button data-tab=\"warranty\">售后保障</button>\n</div>\n<div class=\"tab-content\" id=\"tabContent\">LYF新疆原产葵花籽，新鲜美味，独立包装方便携带，春节亲朋好友分享佳品。</div>\n</div>\n<div class=\"reviews\">\n<div class=\"review-filters\">\n<button class=\"active\" data-filter=\"all\">全部</button>\n<button data-filter=\"good\">好评</button>\n<button data-filter=\"medium\">中评</button>\n</div>\n<ul class=\"review-list\" id=\"reviewList\"></ul>\n</div>\n<div class=\"toast\" id=\"toast\"></div>\n<div class=\"modal-overlay\" id=\"modalOverlay\">\n<div class=\"modal\">\n<div>已选商品：LYF葵花籽 x <span id=\"modalQuantity\">1</span></div>\n<div>最终价格：￥<span id=\"modalTotal\">16.9</span></div>\n<button id=\"confirmPayBtn\">确认支付</button>\n</div>\n</div>\n<script>\nconst unitPrice = 16.9;\nlet quantity = 1;\nlet selectedCoupon = null;\nconst quantityInput = document.getElementById('quantityInput');\nconst totalPriceEl = document.getElementById('totalPrice');\nconst coupons = document.querySelectorAll('.coupon');\nconst countdownEl = document.getElementById('countdown');\nconst buyNowBtn = document.getElementById('buyNowBtn');\nconst addCartBtn = document.getElementById('addCartBtn');\nconst toastEl = document.getElementById('toast');\nconst modalOverlay = document.getElementById('modalOverlay');\nconst modalQuantity = document.getElementById('modalQuantity');\nconst modalTotal = document.getElementById('modalTotal');\nconst reviews = [\n { user:\"张三\", rating:\"good\", text:\"非常好吃，酥脆香浓！\" },\n { user:\"李四\", rating:\"good\", text:\"物美价廉，包装精美\" },\n { user:\"王五\", rating:\"medium\", text:\"味道还行，就是有点咸\" }\n];\nfunction renderReviews(filter){\n const list = document.getElementById('reviewList');\n list.innerHTML = '';\n reviews.filter(r => filter === 'all' ? true : r.rating === filter)\n .forEach(r => {\n   const li = document.createElement('li');\n   li.textContent = `${r.user}: ${r.text}`;\n   list.appendChild(li);\n });\n}\nrenderReviews('all');\ndocument.querySelectorAll('.review-filters button').forEach(btn=>{\n btn.addEventListener('click',()=>{\n   document.querySelectorAll('.review-filters button').forEach(b=>b.classList.remove('active'));\n   btn.classList.add('active');\n   renderReviews(btn.dataset.filter);\n });\n});\nfunction updateTotalPrice(){\n let price = unitPrice * quantity;\n if(selectedCoupon && price >= selectedCoupon.threshold){\n   price -= selectedCoupon.discount;\n } else {\n   selectedCoupon = null;\n   coupons.forEach(c=>c.classList.remove('active'));\n }\n totalPriceEl.textContent = price.toFixed(1);\n}\ndocument.getElementById('plusBtn').addEventListener('click',()=>{\n quantity++;\n quantityInput.value = quantity;\n updateTotalPrice();\n});\ndocument.getElementById('minusBtn').addEventListener('click',()=>{\n if(quantity>1){ quantity--; quantityInput.value = quantity; updateTotalPrice(); }\n});\nquantityInput.addEventListener('input',()=>{\n quantity = parseInt(quantityInput.value) || 1;\n if(quantity<1){ quantity=1; }\n quantityInput.value = quantity;\n updateTotalPrice();\n});\ncoupons.forEach(c=>{\n c.addEventListener('click',()=>{\n   const threshold = parseFloat(c.dataset.threshold);\n   const discount = parseFloat(c.dataset.discount);\n   if(unitPrice * quantity >= threshold){\n     coupons.forEach(cc=>cc.classList.remove('active'));\n     c.classList.add('active');\n     selectedCoupon = {threshold, discount};\n     updateTotalPrice();\n   } else {\n     alert('当前价格未达到优惠券使用门槛');\n   }\n });\n});\nfunction showToast(msg){\n toastEl.textContent = msg;\n toastEl.style.display='block';\n setTimeout(()=>{ toastEl.style.display='none'; },2000);\n}\naddCartBtn.addEventListener('click',()=>{\n showToast(`已成功加入购物车：LYF葵花籽 x ${quantity}`);\n});\ndocument.querySelectorAll('.thumbnails img').forEach(img=>{\n img.addEventListener('mouseenter',()=>{ document.getElementById('mainImage').src = img.dataset.src; });\n img.addEventListener('click',()=>{ document.getElementById('mainImage').src = img.dataset.src; });\n});\nlet countdownSeconds = 2*60*60;\nfunction updateCountdown(){\n let h = String(Math.floor(countdownSeconds/3600)).padStart(2,'0');\n let m = String(Math.floor((countdownSeconds%3600)/60)).padStart(2,'0');\n let s = String(countdownSeconds%60).padStart(2,'0');\n countdownEl.textContent = `${h}:${m}:${s}`;\n if(countdownSeconds <=0){\n   buyNowBtn.disabled = true;\n   buyNowBtn.textContent = '活动已结束';\n   addCartBtn.disabled = true;\n   clearInterval(countdownTimer);\n }\n countdownSeconds--;\n}\nconst countdownTimer = setInterval(updateCountdown,1000);\ndocument.querySelectorAll('.tab-buttons button').forEach(btn=>{\n btn.addEventListener('click',()=>{\n   document.querySelectorAll('.tab-buttons button').forEach(b=>b.classList.remove('active'));\n   btn.classList.add('active');\n   const tab = btn.dataset.tab;\n   document.getElementById('tabContent').textContent = tab==='intro' ? \n     'LYF新疆原产葵花籽，新鲜美味，独立包装方便携带，春节亲朋好友分享佳品。' : \n     '我们提供7天无理由退换货服务，确保您的购物无忧。';\n });\n});\nbuyNowBtn.addEventListener('click',()=>{\n modalQuantity.textContent = quantity;\n modalTotal.textContent = totalPriceEl.textContent;\n modalOverlay.style.display='flex';\n});\nmodalOverlay.addEventListener('click',(e)=>{\n if(e.target===modalOverlay){\n   modalOverlay.style.display='none';\n }\n});\ndocument.getElementById('confirmPayBtn').addEventListener('click',()=>{\n const order = {\n   product:'LYF葵花籽',\n   quantity,\n   unitPrice,\n   coupon: selectedCoupon,\n   total: parseFloat(totalPriceEl.textContent)\n };\n alert('订单信息：'+JSON.stringify(order));\n});\nupdateTotalPrice();\nupdateCountdown();\n</script>\n</body>\n</html>"
    }
  ]
}