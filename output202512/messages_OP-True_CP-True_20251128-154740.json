{
  "brief": [
    {
      "topic": "brief",
      "sender": "User",
      "content": "\n请创建一个包含 HTML、CSS 和 JavaScript 的**单文件（Single HTML File）**电商产品详情页。该网页必须是一个完整的、可交互的原型。\n\n# Product Context\n我们需要为一款春节热销零食制作落地页，模仿京东（JD.com）的移动端/PC端响应式布局风格。\n* **品牌**：LYF\n* **商品名称**：新疆原产葵花籽（30g 独立小包装）\n* **价格策略**：10包组合装，售价 16.9 元。\n\n# Functional Requirements (功能需求)\n1.  **布局结构**：\n    * **顶部**：简单的导航栏（包含 Logo 占位符和搜索框占位符）。\n    * **左侧/顶部（视宽度而定）**：产品主图展示区。包含 1 张大图和 2 张缩略图。点击缩略图需切换大图。\n     1 张大图链接“https://detail.1688.com/offer/988089985291.html?spm=a261b.8768355.pic-list.30.432360cd4VYDtD”\n    缩略图1“https://detail.1688.com/offer/981519203786.html?spm=a261b.8768355.pic-list.16.424760cd9rabYd”\n    缩略图2“https://detail.1688.com/offer/990628769471.html?spm=a261b.8768355.pic-list.7.667160cdECaV86”\n    * **右侧/底部（视宽度而定）**：产品信息区。包含标题、红色价格高亮、促销标签（“春节特惠”、“包邮”）。\n    * **交互区**：数量选择器（支持 +/-，且数量不能小于 1），以及“立即购买”和“加入购物车”两个按钮。\n    * **详情区**：页面底部需包含 Tab 切换功能（“商品介绍” vs “售后保障”），点击 Tab 切换显示不同文本内容。\n\n2.  **核心逻辑 (JavaScript)**：\n    * **数量联动**：默认数量为 1。点击 +/- 按钮更新数量，并实时更新“总价”（Total Price = 16.9 * 数量）。结果保留 1 位小数。\n    * **购物车反馈**：点击“加入购物车”后，弹出轻提示（Toast Notification）：\"已成功加入购物车：LYF葵花籽 x [数量]\"，2秒后自动消失。\n    * **图片切换**：鼠标悬停或点击缩略图时，主图需平滑切换。\n\n3.  **UI/Design Requirements (设计规范)**：\n    * **配色**：主色调使用京东红（#f23030 或类似），背景色为浅灰（#f6f6f6），内容区为白色。\n    * **图片处理**：由于无法访问外部图库，请使用 placeholder 图片服务（如 `https://via.placeholder.com/400x400?text=LYF+Product`）来生成不同颜色的占位图，确保页面不出现破图。\n    * **响应式**：页面需适配手机端和 PC 端（使用 Flexbox 或 Grid 布局）。\n4.营销倒计时系统 (Complex Logic)\n在价格旁显示“春节限时抢购倒计时”。\n逻辑要求：倒计时设定为 2 小时 0 分 0 秒。必须实时跳动（每秒 -1）。\n边界状态：当倒计时归零时，按钮变为灰色“活动已结束”，且不可点击。\n\n5. 优惠券与价格计算 (State Management)\n界面中间需展示两张优惠券：\nA券：满 10 减 2 元\nB券：满 20 减 5 元\n\n6.交互逻辑：\n用户点击优惠券可“领取”（变为高亮状态，只能选一张）。\n数量选择器调整商品数量时，**总价（Total Price）**必须根据（单价 * 数量 - 优惠券金额）实时重新计算。\n如果总价不满足优惠券门槛，优惠券自动失效（取消高亮）。\n\n7. 评论区筛选器 (DOM Manipulation)\n展示评论列表。\n顶部有 Filter 按钮：“全部”、“好评”、“中评”。\n交互逻辑：点击不同按钮，下方评论列表必须根据 productData.reviews 数组进行实时过滤并重新渲染 DOM。\n\n8. 模态框购物车 (UI Interaction)\n点击底部的“立即购买”按钮，不跳转，而是从底部弹出一个半透明遮罩层 + 确认面板（Slide-up Modal）。\n面板内显示：已选商品信息、最终计算后的价格。\n包含“确认支付”按钮，点击后 alert 输出最终订单信息对象。\n\n# Technical Constraints (技术约束)\n* 所有代码（HTML, CSS, JS）必须包含在一个 HTML 文件中，CSS 放 `<style>`，JS 放 `<script>`。\n* 代码结构清晰，有注释，不依赖 React/Vue 等外部框架，使用原生 Vanilla JS。\n* CSS 需处理好按钮的 hover 状态和阴影细节，体现电商的高级感。\n"
    }
  ],
  "tasks": [
    {
      "topic": "tasks",
      "sender": "TeamLeader",
      "content": {
        "available_roles": [
          "TeamLeader",
          "PM",
          "Architect",
          "Engineer"
        ],
        "tasks": [
          {
            "role": "TeamLeader",
            "tasks": [
              "梳理客户需求",
              "划分交付物",
              "分配任务给各角色"
            ]
          },
          {
            "role": "PM",
            "tasks": [
              "整理结构化 PRD，包括功能需求、UI规范、技术约束等"
            ]
          },
          {
            "role": "Architect",
            "tasks": [
              "设计页面信息架构",
              "确定响应式布局方案（PC/移动端）",
              "定义组件结构及交互逻辑"
            ]
          },
          {
            "role": "Engineer",
            "tasks": [
              "根据架构方案实现单文件 HTML（包含 CSS 和 JS）",
              "实现顶部导航栏、主图及缩略图切换",
              "开发数量选择器与总价计算逻辑",
              "实现优惠券状态管理与联动价格计算",
              "编码倒计时系统及按钮状态切换",
              "实现评论筛选器的DOM操作",
              "开发购物车反馈Toast组件",
              "实现立即购买的Slide-up Modal及确认支付逻辑",
              "编写响应式样式与视觉效果（京东红、背景色、阴影等）",
              "确保代码结构清晰、注释完善"
            ]
          }
        ]
      }
    }
  ],
  "prd": [
    {
      "topic": "prd",
      "sender": "PM",
      "content": {
        "product": "LYF春节零食电商详情页——响应式单文件原型",
        "goals": [
          "实现符合京东风格的响应式产品详情布局，支持PC和移动端",
          "提供完整的电商交互逻辑：数量选择器、价格计算、优惠券领取",
          "增加营销功能：春节限时倒计时及活动状态管理",
          "实现多媒体交互：主图与缩略图切换、评论筛选器",
          "提升用户体验：Toast购物车提示、Slide-up Modal确认购买",
          "确保单文件实现（HTML/CSS/JS）并结构清晰，无外部框架依赖",
          "视觉风格统一：京东红主色、白色内容区、浅灰背景"
        ],
        "target_users": [
          "春节期间线上零食消费者：希望在移动/PC端快速浏览产品信息并下单，关注促销价格与倒计时活动",
          "价格敏感型用户：希望领取并使用优惠券来获得更低的成交价，需要实时看到总价变化",
          "电商购物习惯用户：习惯使用评论筛选功能以判断商品质量真实性",
          "移动端快速下单用户：希望通过简洁交互（数量调整、立即购买）快速完成订单"
        ],
        "page_sections": [
          {
            "id": "navbar",
            "purpose": "显示Logo和搜索框的顶部导航栏，提供品牌识别和快速搜索入口"
          },
          {
            "id": "gallery",
            "purpose": "展示商品主图和缩略图，支持点击或悬停切换主图，实现产品视觉吸引"
          },
          {
            "id": "product-info",
            "purpose": "展示商品标题、红色高亮价格、促销标签及倒计时，营造购买紧迫感"
          },
          {
            "id": "coupon-section",
            "purpose": "展示可领取的优惠券并实现状态管理及价格联动，增强促销效果"
          },
          {
            "id": "quantity-selector",
            "purpose": "提供数量调整按钮，实时更新总价并受优惠券影响"
          },
          {
            "id": "action-buttons",
            "purpose": "包含立即购买与加入购物车按钮，连接核心交易流程"
          },
          {
            "id": "tabs-detail",
            "purpose": "商品详情与售后保障的Tab切换内容，提升信息层次与浏览体验"
          },
          {
            "id": "reviews",
            "purpose": "评论区，包含筛选按钮，可根据评价类型动态过滤渲染评论列表"
          },
          {
            "id": "toast",
            "purpose": "轻提示组件，购物车操作反馈，提升交互即时报知性"
          },
          {
            "id": "modal-buy",
            "purpose": "Slide-up底部弹出购买确认面板，显示所选商品与计算后价格，提供确认支付"
          }
        ]
      }
    }
  ],
  "page_spec": [
    {
      "topic": "page_spec",
      "sender": "Architect",
      "content": {
        "layout": "two-column",
        "colors": [
          "#f23030",
          "#f6f6f6",
          "#ffffff",
          "#333333",
          "#ffcc00"
        ],
        "components": [
          {
            "id": "navbar",
            "html": "header",
            "children": [
              {
                "tag": "div",
                "content_hint": "Logo占位符"
              },
              {
                "tag": "input",
                "content_hint": "搜索框占位符"
              }
            ]
          },
          {
            "id": "gallery",
            "html": "section",
            "children": [
              {
                "tag": "img",
                "content_hint": "产品主图"
              },
              {
                "tag": "div",
                "content_hint": "缩略图列表"
              }
            ]
          },
          {
            "id": "product-info",
            "html": "section",
            "children": [
              {
                "tag": "h1",
                "content_hint": "商品标题"
              },
              {
                "tag": "p",
                "content_hint": "红色高亮价格、促销标签、倒计时"
              }
            ]
          },
          {
            "id": "coupon-section",
            "html": "section",
            "children": [
              {
                "tag": "div",
                "content_hint": "优惠券A信息（满10减2）"
              },
              {
                "tag": "div",
                "content_hint": "优惠券B信息（满20减5）"
              }
            ]
          },
          {
            "id": "quantity-selector",
            "html": "section",
            "children": [
              {
                "tag": "button",
                "content_hint": "数量-按钮"
              },
              {
                "tag": "span",
                "content_hint": "当前数量显示"
              },
              {
                "tag": "button",
                "content_hint": "数量+按钮"
              },
              {
                "tag": "p",
                "content_hint": "总价显示"
              }
            ]
          },
          {
            "id": "action-buttons",
            "html": "section",
            "children": [
              {
                "tag": "button",
                "content_hint": "立即购买按钮"
              },
              {
                "tag": "button",
                "content_hint": "加入购物车按钮"
              }
            ]
          },
          {
            "id": "tabs-detail",
            "html": "section",
            "children": [
              {
                "tag": "nav",
                "content_hint": "Tabs切换按钮（商品介绍/售后保障）"
              },
              {
                "tag": "div",
                "content_hint": "当前Tab内容展示区"
              }
            ]
          },
          {
            "id": "reviews",
            "html": "section",
            "children": [
              {
                "tag": "div",
                "content_hint": "筛选按钮组（全部/好评/中评）"
              },
              {
                "tag": "ul",
                "content_hint": "评论列表"
              }
            ]
          },
          {
            "id": "toast",
            "html": "div",
            "children": [
              {
                "tag": "p",
                "content_hint": "购物车反馈轻提示文本"
              }
            ]
          },
          {
            "id": "modal-buy",
            "html": "div",
            "children": [
              {
                "tag": "div",
                "content_hint": "遮罩层"
              },
              {
                "tag": "div",
                "content_hint": "确认购买面板（商品信息、最终价格、确认支付按钮）"
              }
            ]
          }
        ]
      }
    }
  ],
  "html": [
    {
      "topic": "html",
      "sender": "Engineer",
      "content": "<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n<meta charset=\"UTF-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n<title>LYF 新疆原产葵花籽详情页</title>\n<style>\nbody {margin:0;background:#f6f6f6;font-family:Arial, sans-serif;color:#333;}\nheader {background:#f23030;color:#fff;display:flex;justify-content:space-between;align-items:center;padding:10px;}\nheader .logo {font-weight:bold;font-size:18px;}\nheader input {padding:5px;border:none;border-radius:4px;width:200px;}\nmain {display:flex;flex-wrap:wrap;max-width:1200px;margin:auto;padding:10px;}\n#gallery, #product-info {background:#fff;padding:10px;box-shadow:0 2px 5px rgba(0,0,0,0.1);}\n#gallery {flex:1 1 400px;text-align:center;}\n#gallery img {width:100%;max-width:400px;transition:opacity 0.3s;}\n#gallery .thumbs {display:flex;justify-content:center;margin-top:10px;}\n#gallery .thumbs img {width:60px;height:60px;margin:0 5px;cursor:pointer;border:2px solid transparent;}\n#gallery .thumbs img.active {border-color:#f23030;}\n#product-info {flex:1 1 300px;margin-left:10px;}\n#product-info h1 {font-size:20px;margin:0;}\n.price {color:#f23030;font-size:24px;font-weight:bold;}\n.tags span {display:inline-block;background:#ffcc00;padding:3px 6px;margin:5px; border-radius:4px;}\n.countdown {color:#f23030;margin-top:5px;}\n#coupon-section {background:#fff;padding:10px;margin-top:10px;display:flex;gap:10px;}\n.coupon {flex:1;background:#ffecec;padding:10px;text-align:center;border:2px dashed #f23030;cursor:pointer;}\n.coupon.active {background:#fff1f1;border-color:#ffcc00;}\n#quantity-selector {background:#fff;padding:10px;margin-top:10px;display:flex;align-items:center;gap:10px;}\n#quantity-selector button {padding:6px 10px;}\n.total-price {margin-left:auto;font-weight:bold;color:#f23030;}\n#action-buttons {background:#fff;padding:10px;margin-top:10px;display:flex;gap:10px;}\n.btn {flex:1;padding:10px;border:none;border-radius:4px;color:#fff;cursor:pointer;font-size:16px;}\n.buy-now {background:#f23030;}\n.add-cart {background:#ffcc00;color:#333;}\n.btn.disabled {background:gray;cursor:not-allowed;}\n#tabs-detail {background:#fff;margin-top:10px;}\n#tabs-detail nav {display:flex;}\n#tabs-detail nav button {flex:1;padding:10px;border:none;background:#f6f6f6;cursor:pointer;font-weight:bold;}\n#tabs-detail nav button.active {background:#fff;color:#f23030;}\n#tabs-detail .tab-content {padding:10px;}\n#reviews {background:#fff;margin-top:10px;padding:10px;}\n.filter-btns {display:flex;gap:10px;margin-bottom:10px;}\n.filter-btns button {flex:1;padding:6px;cursor:pointer;}\n#reviews ul {list-style:none;padding:0;margin:0;}\n#reviews li {border-bottom:1px solid #eee;padding:5px 0;}\n#toast {position:fixed;top:20px;left:50%;transform:translateX(-50%);background:#333;color:#fff;padding:10px 20px;border-radius:4px;opacity:0;transition:opacity 0.3s;}\n#toast.show {opacity:1;}\n#modal-buy {position:fixed;left:0;bottom:-100%;width:100%;background:rgba(0,0,0,0.4);transition:bottom 0.3s;}\n.modal-panel {background:#fff;padding:20px;border-radius:8px 8px 0 0;max-height:50%;overflow:auto;}\n.modal-panel h2 {margin-top:0;}\n.modal-panel button {margin-top:10px;width:100%;padding:10px;background:#f23030;color:#fff;border:none;border-radius:4px;cursor:pointer;}\n@media(max-width:768px){\n  main {flex-direction:column;}\n  #product-info {margin-left:0;margin-top:10px;}\n}\n</style>\n</head>\n<body>\n<header id=\"navbar\">\n  <div class=\"logo\">LYF</div>\n  <input type=\"text\" placeholder=\"搜索商品\">\n</header>\n<main>\n  <section id=\"gallery\">\n    <img id=\"main-img\" src=\"https://via.placeholder.com/400x400?text=LYF+Product\" alt=\"主图\">\n    <div class=\"thumbs\">\n      <img data-src=\"https://via.placeholder.com/400x400/ffaaaa?text=Thumb1\" class=\"active\" alt=\"缩略图1\">\n      <img data-src=\"https://via.placeholder.com/400x400/aaffaa?text=Thumb2\" alt=\"缩略图2\">\n    </div>\n  </section>\n  <section id=\"product-info\">\n    <h1>新疆原产葵花籽（30g 独立小包装，10包组合）</h1>\n    <div class=\"price\">¥16.9</div>\n    <div class=\"tags\">\n      <span>春节特惠</span>\n      <span>包邮</span>\n    </div>\n    <div class=\"countdown\">限时抢购倒计时：<span id=\"timer\">02:00:00</span></div>\n  </section>\n</main>\n<section id=\"coupon-section\">\n  <div class=\"coupon\" data-threshold=\"10\" data-discount=\"2\">满10减2元</div>\n  <div class=\"coupon\" data-threshold=\"20\" data-discount=\"5\">满20减5元</div>\n</section>\n<section id=\"quantity-selector\">\n  <button id=\"minus\">-</button>\n  <span id=\"quantity\">1</span>\n  <button id=\"plus\">+</button>\n  <div class=\"total-price\">总价：¥<span id=\"total\">16.9</span></div>\n</section>\n<section id=\"action-buttons\">\n  <button id=\"buy-now\" class=\"btn buy-now\">立即购买</button>\n  <button id=\"add-cart\" class=\"btn add-cart\">加入购物车</button>\n</section>\n<section id=\"tabs-detail\">\n  <nav>\n    <button class=\"active\" data-tab=\"intro\">商品介绍</button>\n    <button data-tab=\"service\">售后保障</button>\n  </nav>\n  <div class=\"tab-content\" id=\"tab-content\">这是商品介绍的详细内容...</div>\n</section>\n<section id=\"reviews\">\n  <div class=\"filter-btns\">\n    <button data-filter=\"all\">全部</button>\n    <button data-filter=\"good\">好评</button>\n    <button data-filter=\"average\">中评</button>\n  </div>\n  <ul id=\"review-list\"></ul>\n</section>\n<div id=\"toast\"><p></p></div>\n<div id=\"modal-buy\">\n  <div class=\"modal-panel\">\n    <h2>确认订单</h2>\n    <p id=\"modal-info\"></p>\n    <button id=\"confirm-pay\">确认支付</button>\n  </div>\n</div>\n<script>\nconst unitPrice = 16.9;\nlet quantity = 1;\nlet discount = 0;\nlet activeCoupon = null;\nconst totalEl = document.getElementById('total');\nconst quantityEl = document.getElementById('quantity');\nfunction updateTotal(){\n  let total = unitPrice * quantity;\n  if(activeCoupon){\n    const threshold = parseFloat(activeCoupon.dataset.threshold);\n    const dis = parseFloat(activeCoupon.dataset.discount);\n    if(total >= threshold){\n      discount = dis;\n    }else{\n      activeCoupon.classList.remove('active');\n      activeCoupon = null;\n      discount = 0;\n    }\n  }else{\n    discount = 0;\n  }\n  total = total - discount;\n  total = Math.max(total, 0);\n  totalEl.textContent = total.toFixed(1);\n}\ndocument.getElementById('minus').onclick = function(){\n  if(quantity>1){quantity--;quantityEl.textContent=quantity;updateTotal();}\n};\ndocument.getElementById('plus').onclick = function(){\n  quantity++;quantityEl.textContent=quantity;updateTotal();\n};\ndocument.querySelectorAll('.coupon').forEach(c=>{\n  c.onclick = function(){\n    document.querySelectorAll('.coupon').forEach(cc=>cc.classList.remove('active'));\n    this.classList.add('active');\n    activeCoupon = this;\n    updateTotal();\n  };\n});\nconst toast = document.getElementById('toast');\nfunction showToast(msg){\n  toast.querySelector('p').textContent = msg;\n  toast.classList.add('show');\n  setTimeout(()=>{toast.classList.remove('show');},2000);\n}\ndocument.getElementById('add-cart').onclick = function(){\n  showToast(`已成功加入购物车：LYF葵花籽 x ${quantity}`);\n};\ndocument.querySelectorAll('.thumbs img').forEach(t=>{\n  t.onclick = function(){\n    document.querySelectorAll('.thumbs img').forEach(tt=>tt.classList.remove('active'));\n    t.classList.add('active');\n    const mainImg = document.getElementById('main-img');\n    mainImg.style.opacity = 0;\n    setTimeout(()=>{\n      mainImg.src = this.dataset.src;\n      mainImg.style.opacity = 1;\n    },300);\n  };\n});\nlet timer = 2*60*60;\nconst timerEl = document.getElementById('timer');\nconst buyBtn = document.getElementById('buy-now');\nfunction updateTimer(){\n  let h = String(Math.floor(timer/3600)).padStart(2,'0');\n  let m = String(Math.floor((timer%3600)/60)).padStart(2,'0');\n  let s = String(timer%60).padStart(2,'0');\n  timerEl.textContent = `${h}:${m}:${s}`;\n  if(timer<=0){\n    buyBtn.textContent = '活动已结束';\n    buyBtn.classList.add('disabled');\n    buyBtn.disabled = true;\n    document.getElementById('add-cart').disabled = true;\n    clearInterval(timerInt);\n  }\n  timer--;\n}\nconst timerInt = setInterval(updateTimer,1000);\nupdateTimer();\nconst tabBtns = document.querySelectorAll('#tabs-detail nav button');\nconst tabContent = document.getElementById('tab-content');\ntabBtns.forEach(btn=>{\n  btn.onclick=function(){\n    tabBtns.forEach(b=>b.classList.remove('active'));\n    this.classList.add('active');\n    tabContent.textContent = this.dataset.tab==='intro'?'这是商品介绍的详细内容...':'售后保障说明...';\n  };\n});\nconst productData = {reviews:[\n  {type:'good',text:'好评！味道非常棒'},\n  {type:'average',text:'中评，包装一般'},\n  {type:'good',text:'好评！快递很快'},\n]};\nfunction renderReviews(filter='all'){\n  const list = document.getElementById('review-list');\n  list.innerHTML='';\n  productData.reviews.filter(r=>filter==='all'||r.type===filter).forEach(r=>{\n    const li=document.createElement('li');li.textContent=r.text;list.appendChild(li);\n  });\n}\ndocument.querySelectorAll('.filter-btns button').forEach(btn=>{\n  btn.onclick = ()=>renderReviews(btn.dataset.filter);\n});\nrenderReviews();\nconst modal = document.getElementById('modal-buy');\nbuyBtn.onclick = function(){\n  if(buyBtn.disabled) return;\n  modal.style.bottom = 0;\n  document.getElementById('modal-info').textContent = `LYF葵花籽 x ${quantity}，总价 ¥${totalEl.textContent}`;\n};\nmodal.onclick = function(e){\n  if(e.target===modal){modal.style.bottom='-100%';}\n};\ndocument.getElementById('confirm-pay').onclick = function(){\n  const order = {product:'LYF葵花籽',quantity,total:parseFloat(totalEl.textContent)};\n  alert(JSON.stringify(order));\n};\n</script>\n</body>\n</html>"
    }
  ]
}