{
  "brief": [
    {
      "topic": "brief",
      "sender": "User",
      "content": "\n请创建一个包含 HTML、CSS 和 JavaScript 的**单文件（Single HTML File）**电商产品详情页。该网页必须是一个完整的、可交互的原型。\n\n# Product Context\n我们需要为一款春节热销零食制作落地页，模仿京东（JD.com）的移动端/PC端响应式布局风格。\n* **品牌**：LYF\n* **商品名称**：新疆原产葵花籽（30g 独立小包装）\n* **价格策略**：10包组合装，售价 16.9 元。\n\n# Functional Requirements (功能需求)\n1.  **布局结构**：\n    * **顶部**：简单的导航栏（包含 Logo 占位符和搜索框占位符）。\n    * **左侧/顶部（视宽度而定）**：产品主图展示区。包含 1 张大图和 4 张缩略图。点击缩略图需切换大图。\n    图片链接1“https://detail.1688.com/offer/988089985291.html?spm=a261b.8768355.pic-list.30.432360cd4VYDtD”\n    图片链接2“https://detail.1688.com/offer/981519203786.html?spm=a261b.8768355.pic-list.16.424760cd9rabYd”\n    图片链接3“https://detail.1688.com/offer/990628769471.html?spm=a261b.8768355.pic-list.7.667160cdECaV86”\n    * **右侧/底部（视宽度而定）**：产品信息区。包含标题、红色价格高亮、促销标签（“春节特惠”、“包邮”）。\n    * **交互区**：数量选择器（支持 +/-，且数量不能小于 1），以及“立即购买”和“加入购物车”两个按钮。\n    * **详情区**：页面底部需包含 Tab 切换功能（“商品介绍” vs “售后保障”），点击 Tab 切换显示不同文本内容。\n\n2.  **核心逻辑 (JavaScript)**：\n    * **数量联动**：默认数量为 1。点击 +/- 按钮更新数量，并实时更新“总价”（Total Price = 16.9 * 数量）。结果保留 1 位小数。\n    * **购物车反馈**：点击“加入购物车”后，弹出轻提示（Toast Notification）：\"已成功加入购物车：LYF葵花籽 x [数量]\"，2秒后自动消失。\n    * **图片切换**：鼠标悬停或点击缩略图时，主图需平滑切换。\n\n3.  **UI/Design Requirements (设计规范)**：\n    * **配色**：主色调使用京东红（#f23030 或类似），背景色为浅灰（#f6f6f6），内容区为白色。\n    * **图片处理**：由于无法访问外部图库，请使用 placeholder 图片服务（如 `https://via.placeholder.com/400x400?text=LYF+Product`）来生成不同颜色的占位图，确保页面不出现破图。\n    * **响应式**：页面需适配手机端和 PC 端（使用 Flexbox 或 Grid 布局）。\n4.营销倒计时系统 (Complex Logic)\n在价格旁显示“春节限时抢购倒计时”。\n逻辑要求：倒计时设定为 2 小时 0 分 0 秒。必须实时跳动（每秒 -1）。\n边界状态：当倒计时归零时，按钮变为灰色“活动已结束”，且不可点击。\n\n5. 优惠券与价格计算 (State Management)\n界面中间需展示两张优惠券：\nA券：满 10 减 2 元\nB券：满 20 减 5 元\n\n6.交互逻辑：\n用户点击优惠券可“领取”（变为高亮状态，只能选一张）。\n数量选择器调整商品数量时，**总价（Total Price）**必须根据（单价 * 数量 - 优惠券金额）实时重新计算。\n如果总价不满足优惠券门槛，优惠券自动失效（取消高亮）。\n\n7. 评论区筛选器 (DOM Manipulation)\n展示评论列表。\n顶部有 Filter 按钮：“全部”、“好评”、“中评”。\n交互逻辑：点击不同按钮，下方评论列表必须根据 productData.reviews 数组进行实时过滤并重新渲染 DOM。\n\n8. 模态框购物车 (UI Interaction)\n点击底部的“立即购买”按钮，不跳转，而是从底部弹出一个半透明遮罩层 + 确认面板（Slide-up Modal）。\n面板内显示：已选商品信息、最终计算后的价格。\n包含“确认支付”按钮，点击后 alert 输出最终订单信息对象。\n\n# Technical Constraints (技术约束)\n* 所有代码（HTML, CSS, JS）必须包含在一个 HTML 文件中，CSS 放 `<style>`，JS 放 `<script>`。\n* 代码结构清晰，有注释，不依赖 React/Vue 等外部框架，使用原生 Vanilla JS。\n* CSS 需处理好按钮的 hover 状态和阴影细节，体现电商的高级感。\n"
    }
  ],
  "tasks": [
    {
      "topic": "tasks",
      "sender": "TeamLeader",
      "content": {
        "available_roles": [
          "TeamLeader",
          "Engineer",
          "PM"
        ],
        "tasks": [
          {
            "role": "TeamLeader",
            "tasks": [
              "梳理需求",
              "识别可交付成果：单文件 HTML 页面（包含完整 HTML、CSS、JavaScript），可交互电商产品详情页",
              "划分交付物为：布局结构、样式设计、交互逻辑、倒计时系统、优惠券系统、评论区筛选、购物车模态框",
              "分配任务至 Engineer 实现全部功能逻辑"
            ]
          },
          {
            "role": "Engineer",
            "tasks": [
              "实现响应式布局（顶部导航栏、产品图、信息区、交互区、详情区）",
              "使用 placeholder 图片实现主图与缩略图切换交互",
              "编写数量选择器、总价计算逻辑",
              "实现倒计时系统及活动结束状态",
              "优惠券领取与总价计算逻辑（含门槛判断与自动失效）",
              "评论区筛选器及 DOM 动态渲染",
              "加入购物车的 Toast 提示",
              "立即购买按钮的模态框弹出与确认支付交互",
              "CSS 配色与细节设计（京东红、浅灰背景、白色内容区、阴影与 hover 效果）",
              "确保所有 HTML、CSS、JS 代码在同一文件中并有清晰注释"
            ]
          },
          {
            "role": "PM",
            "tasks": [
              "无任务（当前需求为一次性原型交付，无需项目计划与进度管理）"
            ]
          }
        ]
      }
    }
  ],
  "html": [
    {
      "topic": "html",
      "sender": "Engineer",
      "content": "<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n<meta charset=\"UTF-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n<title>LYF新疆原产葵花籽 - 春节热销</title>\n<style>\n    body { margin: 0; font-family: Arial, sans-serif; background-color: #f6f6f6; color: #333; }\n    header { background-color: #f23030; color: #fff; padding: 10px; display: flex; align-items: center; justify-content: space-between; }\n    header .logo { font-size: 18px; font-weight: bold; }\n    header input { padding: 5px; border: none; border-radius: 4px; }\n    main { display: flex; flex-wrap: wrap; background-color: #fff; margin: 10px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);}\n    .product-images, .product-info { flex: 1; padding: 20px; min-width: 300px; }\n    .main-image img { width: 100%; border-radius: 5px; transition: opacity 0.5s; }\n    .thumbnails { display: flex; margin-top: 10px; }\n    .thumbnails img { width: 60px; height: 60px; margin-right: 10px; cursor: pointer; border: 2px solid transparent; border-radius: 5px; }\n    .thumbnails img:hover { border-color: #f23030; }\n    .product-title { font-size: 20px; font-weight: bold; margin-bottom: 10px; }\n    .price { font-size: 24px; color: #f23030; font-weight: bold; }\n    .promo-labels span { background-color: #ffecec; color: #f23030; padding: 3px 6px; margin-right: 5px; border-radius: 3px; font-size: 12px; }\n    .countdown { margin: 10px 0; font-size: 14px; color: #f23030; }\n    .quantity-selector { display: flex; align-items: center; margin: 10px 0; }\n    .quantity-selector button { width: 30px; height: 30px; border: 1px solid #ccc; background-color: #fff; cursor: pointer; }\n    .quantity-selector input { width: 40px; text-align: center; border: 1px solid #ccc; height: 30px; }\n    .coupons { display: flex; margin: 10px 0; }\n    .coupon { border: 1px dashed #f23030; padding: 5px 10px; margin-right: 10px; cursor: pointer; border-radius: 5px; font-size: 12px; }\n    .coupon.active { background-color: #f23030; color: #fff; }\n    .total-price { margin: 10px 0; font-size: 16px; }\n    .buttons button { padding: 10px; margin-right: 10px; border: none; cursor: pointer; border-radius: 4px; font-size: 16px; transition: background-color 0.3s, box-shadow 0.3s; }\n    .buy-now { background-color: #f23030; color: #fff; }\n    .add-cart { background-color: #ff9900; color: #fff; }\n    .buttons button:hover { box-shadow: 0 2px 5px rgba(0,0,0,0.3); }\n    .buttons button.disabled { background-color: #ccc; cursor: not-allowed; }\n    .tabs { margin: 10px; display: flex; background-color: #fff; border-radius: 5px; }\n    .tab-buttons { display: flex; flex-direction: column; min-width: 120px; }\n    .tab-buttons button { padding: 10px; border: none; background-color: #eee; cursor: pointer; }\n    .tab-buttons button.active { background-color: #f23030; color: #fff; }\n    .tab-content { flex: 1; padding: 20px; }\n    /* 评论区 */\n    .reviews { background-color: #fff; margin: 10px; padding: 10px; border-radius: 5px;}\n    .filter-buttons { margin-bottom: 10px;}\n    .filter-buttons button { margin-right: 10px; padding: 5px 10px; border: none; background-color: #eee; cursor: pointer; }\n    .filter-buttons button.active { background-color: #f23030; color: #fff;}\n    .review-item { padding: 5px; border-bottom: 1px solid #ddd; }\n    /* Toast */\n    .toast { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background-color: rgba(0,0,0,0.8); color: #fff; padding: 10px 20px; border-radius: 5px; display: none; }\n    /* Modal */\n    .modal-overlay { position: fixed; bottom: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); display: none; align-items: flex-end; }\n    .modal { background-color: #fff; width: 100%; padding: 20px; border-top-left-radius: 10px; border-top-right-radius: 10px; animation: slideUp 0.3s;}\n    @keyframes slideUp { from { transform: translateY(100%);} to { transform: translateY(0);} }\n</style>\n</head>\n<body>\n<header>\n    <div class=\"logo\">LYF Logo</div>\n    <input type=\"text\" placeholder=\"搜索商品...\">\n</header>\n<main>\n    <div class=\"product-images\">\n        <div class=\"main-image\"><img id=\"mainImage\" src=\"https://via.placeholder.com/400x400?text=LYF+Product+1\"></div>\n        <div class=\"thumbnails\">\n            <img src=\"https://via.placeholder.com/60?text=1\" data-src=\"https://via.placeholder.com/400x400?text=LYF+Product+1\">\n            <img src=\"https://via.placeholder.com/60?text=2\" data-src=\"https://via.placeholder.com/400x400?text=LYF+Product+2\">\n            <img src=\"https://via.placeholder.com/60?text=3\" data-src=\"https://via.placeholder.com/400x400?text=LYF+Product+3\">\n            <img src=\"https://via.placeholder.com/60?text=4\" data-src=\"https://via.placeholder.com/400x400?text=LYF+Product+4\">\n        </div>\n    </div>\n    <div class=\"product-info\">\n        <div class=\"product-title\">LYF 新疆原产葵花籽（30g 独立小包装） - 10包组合装</div>\n        <div class=\"price\">¥16.9</div>\n        <div class=\"promo-labels\">\n            <span>春节特惠</span><span>包邮</span>\n        </div>\n        <div class=\"countdown\">春节限时抢购倒计时: <span id=\"countdown\">02:00:00</span></div>\n        <div class=\"quantity-selector\">\n            <button id=\"minusBtn\">-</button>\n            <input type=\"text\" id=\"quantity\" value=\"1\" readonly>\n            <button id=\"plusBtn\">+</button>\n        </div>\n        <div class=\"coupons\">\n            <div class=\"coupon\" data-threshold=\"10\" data-discount=\"2\">满10减2元</div>\n            <div class=\"coupon\" data-threshold=\"20\" data-discount=\"5\">满20减5元</div>\n        </div>\n        <div class=\"total-price\">总价: ¥<span id=\"totalPrice\">16.9</span></div>\n        <div class=\"buttons\">\n            <button class=\"buy-now\" id=\"buyNowBtn\">立即购买</button>\n            <button class=\"add-cart\" id=\"addCartBtn\">加入购物车</button>\n        </div>\n    </div>\n</main>\n<div class=\"tabs\">\n    <div class=\"tab-buttons\">\n        <button class=\"active\" data-tab=\"intro\">商品介绍</button>\n        <button data-tab=\"warranty\">售后保障</button>\n    </div>\n    <div class=\"tab-content\" id=\"tabContent\">\n        <p>LYF新疆原产葵花籽，香脆可口，独立小包装，春节伴手礼佳选。</p>\n    </div>\n</div>\n<div class=\"reviews\">\n    <div class=\"filter-buttons\">\n        <button class=\"active\" data-filter=\"all\">全部</button>\n        <button data-filter=\"good\">好评</button>\n        <button data-filter=\"medium\">中评</button>\n    </div>\n    <div id=\"reviewList\"></div>\n</div>\n<div class=\"toast\" id=\"toast\"></div>\n<div class=\"modal-overlay\" id=\"modalOverlay\">\n    <div class=\"modal\">\n        <h3>确认订单</h3>\n        <p id=\"orderInfo\"></p>\n        <button id=\"confirmPayBtn\" class=\"buy-now\">确认支付</button>\n    </div>\n</div>\n<script>\n    // 产品数据\n    const productData = {\n        name: 'LYF葵花籽',\n        unitPrice: 16.9,\n        reviews: [\n            {text: '很好吃，物流快', type: 'good'},\n            {text: '挺不错的，包装精美', type: 'good'},\n            {text: '一般般吧', type: 'medium'}\n        ]\n    };\n\n    const quantityInput = document.getElementById('quantity');\n    const totalPriceEl = document.getElementById('totalPrice');\n    const coupons = document.querySelectorAll('.coupon');\n    let selectedCoupon = null;\n\n    function updateTotalPrice() {\n        let qty = parseInt(quantityInput.value);\n        let total = productData.unitPrice * qty;\n        if (selectedCoupon && total >= selectedCoupon.threshold) {\n            total -= selectedCoupon.discount;\n        } else {\n            selectedCoupon = null;\n            coupons.forEach(c => c.classList.remove('active'));\n        }\n        totalPriceEl.textContent = total.toFixed(1);\n        return total;\n    }\n\n    document.getElementById('minusBtn').onclick = () => {\n        let qty = parseInt(quantityInput.value);\n        if (qty > 1) {\n            quantityInput.value = qty - 1;\n            updateTotalPrice();\n        }\n    };\n    document.getElementById('plusBtn').onclick = () => {\n        quantityInput.value = parseInt(quantityInput.value) + 1;\n        updateTotalPrice();\n    };\n\n    coupons.forEach(coupon => {\n        coupon.addEventListener('click', () => {\n            let threshold = parseFloat(coupon.dataset.threshold);\n            let discount = parseFloat(coupon.dataset.discount);\n            let total = productData.unitPrice * parseInt(quantityInput.value);\n            if (total >= threshold) {\n                selectedCoupon = {threshold, discount};\n                coupons.forEach(c => c.classList.remove('active'));\n                coupon.classList.add('active');\n                updateTotalPrice();\n            }\n        });\n    });\n\n    // 缩略图图片切换\n    const mainImage = document.getElementById('mainImage');\n    document.querySelectorAll('.thumbnails img').forEach(thumb => {\n        thumb.addEventListener('mouseenter', () => {\n            mainImage.style.opacity = 0.5;\n            setTimeout(() => {\n                mainImage.src = thumb.dataset.src;\n                mainImage.style.opacity = 1;\n            }, 200);\n        });\n        thumb.addEventListener('click', () => {\n            mainImage.src = thumb.dataset.src;\n        });\n    });\n\n    // Tabs\n    const tabButtons = document.querySelectorAll('.tab-buttons button');\n    const tabContent = document.getElementById('tabContent');\n    tabButtons.forEach(btn => {\n        btn.addEventListener('click', () => {\n            tabButtons.forEach(b => b.classList.remove('active'));\n            btn.classList.add('active');\n            if (btn.dataset.tab === 'intro') {\n                tabContent.innerHTML = '<p>LYF新疆原产葵花籽，香脆可口，独立小包装，春节伴手礼佳选。</p>';\n            } else {\n                tabContent.innerHTML = '<p>我们提供无忧售后保障，收到商品有任何问题请及时联系我们。</p>';\n            }\n        });\n    });\n\n    // 评论\n    const reviewList = document.getElementById('reviewList');\n    function renderReviews(filter) {\n        reviewList.innerHTML = '';\n        let filtered = productData.reviews.filter(r => filter === 'all' ? true : r.type === filter);\n        filtered.forEach(r => {\n            let div = document.createElement('div');\n            div.className = 'review-item';\n            div.textContent = r.text;\n            reviewList.appendChild(div);\n        });\n    }\n    renderReviews('all');\n    const filterButtons = document.querySelectorAll('.filter-buttons button');\n    filterButtons.forEach(btn => {\n        btn.addEventListener('click', () => {\n            filterButtons.forEach(b => b.classList.remove('active'));\n            btn.classList.add('active');\n            renderReviews(btn.dataset.filter);\n        });\n    });\n\n    // Toast\n    const toast = document.getElementById('toast');\n    document.getElementById('addCartBtn').onclick = () => {\n        if (activityEnded) return;\n        toast.textContent = `已成功加入购物车：${productData.name} x ${quantityInput.value}`;\n        toast.style.display = 'block';\n        setTimeout(() => { toast.style.display = 'none'; }, 2000);\n    };\n\n    // Modal 购买\n    const modalOverlay = document.getElementById('modalOverlay');\n    document.getElementById('buyNowBtn').onclick = () => {\n        if (activityEnded) return;\n        let finalPrice = updateTotalPrice();\n        document.getElementById('orderInfo').textContent = `${productData.name} x ${quantityInput.value}，总价：¥${finalPrice.toFixed(1)}`;\n        modalOverlay.style.display = 'flex';\n    };\n    modalOverlay.onclick = e => {\n        if (e.target === modalOverlay) {\n            modalOverlay.style.display = 'none';\n        }\n    };\n    document.getElementById('confirmPayBtn').onclick = () => {\n        let finalPrice = updateTotalPrice();\n        let order = {product: productData.name, quantity: parseInt(quantityInput.value), price: finalPrice};\n        alert('订单信息：' + JSON.stringify(order));\n        modalOverlay.style.display = 'none';\n    };\n\n    // 倒计时\n    let countdownSeconds = 2 * 60 * 60;\n    let activityEnded = false;\n    function formatTime(sec) {\n        let h = Math.floor(sec/3600);\n        let m = Math.floor(sec%3600/60);\n        let s = sec%60;\n        return `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;\n    }\n    function tickCountdown() {\n        if (countdownSeconds > 0) {\n            countdownSeconds--;\n            document.getElementById('countdown').textContent = formatTime(countdownSeconds);\n        } else {\n            activityEnded = true;\n            document.querySelectorAll('.buttons button').forEach(btn => {\n                btn.classList.add('disabled');\n                btn.disabled = true;\n                btn.textContent = '活动已结束';\n            });\n            clearInterval(cdInterval);\n        }\n    }\n    document.getElementById('countdown').textContent = formatTime(countdownSeconds);\n    const cdInterval = setInterval(tickCountdown, 1000);\n</script>\n</body>\n</html>"
    }
  ]
}