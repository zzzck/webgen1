<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlashShop - ÊûÅÈÄüÁîµÂïÜÂ∞èÈÉ®‰ª∂</title>
    <style>
        :root {
            --primary-color: #FF4757;
            --secondary-color: #2F3542;
            --bg-color: #F1F2F6;
            --success-color: #2ED573;
            --white: #FFFFFF;
            --gray-light: #dfe4ea;
            --shadow: 0 4px 12px rgba(0,0,0,0.1);
            --transition: all 0.3s ease;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--secondary-color);
            padding-bottom: 50px;
            overflow-x: hidden;
        }

        /* È°∂ÈÉ®‰øÉÈîÄÊ†è */
        .promo-banner {
            background-color: var(--secondary-color);
            color: var(--white);
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .countdown span {
            color: var(--primary-color);
            font-weight: bold;
            margin-left: 5px;
            font-family: monospace;
            font-size: 1.1rem;
        }

        /* ÂØºËà™Ê†è */
        .nav-bar {
            background: var(--white);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            position: sticky;
            top: 40px;
            z-index: 99;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary-color);
            letter-spacing: -1px;
        }

        .filters button {
            border: none;
            background: transparent;
            padding: 8px 16px;
            margin: 0 5px;
            cursor: pointer;
            font-weight: 600;
            color: #747d8c;
            border-radius: 20px;
            transition: var(--transition);
        }

        .filters button.active, .filters button:hover {
            background-color: var(--secondary-color);
            color: var(--white);
        }

        .cart-trigger {
            position: relative;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
        }

        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--primary-color);
            color: var(--white);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.75rem;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
        }

        /* ÂïÜÂìÅÁΩëÊ†º */
        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 25px;
        }

        .product-card {
            background: var(--white);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .tag-hot {
            position: absolute;
            top: 10px;
            left: 10px;
            background: var(--primary-color);
            color: var(--white);
            padding: 4px 8px;
            font-size: 0.7rem;
            font-weight: bold;
            border-radius: 4px;
            z-index: 2;
        }

        .tag-discount {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--success-color);
            color: var(--white);
            padding: 4px 8px;
            font-size: 0.7rem;
            font-weight: bold;
            border-radius: 4px;
            z-index: 2;
        }

        .product-image {
            width: 100%;
            height: 200px;
            background-color: #dfe4ea;
            object-fit: cover;
            cursor: pointer;
        }

        .product-info {
            padding: 15px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .product-title {
            font-size: 1rem;
            margin-bottom: 8px;
            color: var(--secondary-color);
            cursor: pointer;
        }

        .product-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }

        .price-group {
            display: flex;
            flex-direction: column;
        }

        .current-price {
            color: var(--primary-color);
            font-weight: bold;
            font-size: 1.1rem;
        }

        .original-price {
            text-decoration: line-through;
            color: #a4b0be;
            font-size: 0.8rem;
        }

        .btn-add {
            background-color: var(--secondary-color);
            color: var(--white);
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
        }

        .btn-add:hover {
            background-color: var(--primary-color);
        }

        .btn-add:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        /* Ë¥≠Áâ©ËΩ¶‰æßËæπÊ†è */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 350px;
            height: 100%;
            background: var(--white);
            box-shadow: -5px 0 15px rgba(0,0,0,0.1);
            z-index: 200;
            transition: right 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            flex-direction: column;
        }

        .cart-sidebar.open {
            right: 0;
        }

        .cart-header {
            padding: 20px;
            border-bottom: 1px solid var(--bg-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--secondary-color);
            color: var(--white);
        }

        .cart-close {
            background: none;
            border: none;
            color: var(--white);
            font-size: 1.5rem;
            cursor: pointer;
        }

        .cart-items {
            flex-grow: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .cart-item {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 1px solid var(--bg-color);
            padding-bottom: 15px;
        }

        .cart-item img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 6px;
            background: #eee;
            margin-right: 10px;
        }

        .cart-item-details {
            flex-grow: 1;
        }

        .cart-item-title {
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .cart-item-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 5px;
        }

        .qty-btn {
            width: 24px;
            height: 24px;
            border: 1px solid #ccc;
            background: white;
            border-radius: 4px;
            cursor: pointer;
        }

        .cart-footer {
            padding: 20px;
            border-top: 1px solid var(--bg-color);
            background: #f8f9fa;
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .btn-checkout {
            width: 100%;
            padding: 12px;
            background: var(--success-color);
            color: var(--white);
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 150;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s;
        }

        .overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* ËØ¶ÊÉÖÂºπÁ™ó */
        .modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: var(--white);
            width: 90%;
            max-width: 800px;
            border-radius: 12px;
            z-index: 300;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            display: flex;
            overflow: hidden;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        .modal-img {
            width: 50%;
            background: #eee;
            object-fit: cover;
        }

        .modal-content {
            width: 50%;
            padding: 30px;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .stock-status {
            margin: 10px 0;
            font-size: 0.9rem;
        }

        .stock-low { color: var(--primary-color); }
        .stock-ok { color: var(--success-color); }

        /* Ê∂àÊÅØÊèêÁ§∫ Toast */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--secondary-color);
            color: var(--white);
            padding: 12px 24px;
            border-radius: 30px;
            z-index: 1000;
            transition: transform 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .toast.show {
            transform: translateX(-50%) translateY(0);
        }

        /* ÂìçÂ∫îÂºè */
        @media (max-width: 768px) {
            .modal { flex-direction: column; height: 90vh; overflow-y: auto; }
            .modal-img { width: 100%; height: 250px; }
            .modal-content { width: 100%; }
            .cart-sidebar { width: 100%; right: -100%; }
            .nav-bar { flex-direction: row; flex-wrap: wrap; }
            .filters { width: 100%; display: flex; overflow-x: auto; padding: 10px 0; white-space: nowrap; }
        }
    </style>
</head>
<body>

<!-- ‰øÉÈîÄÊ†è -->
<header class="promo-banner" id="promo-header">
    <div>üî• ÈôêÊó∂Èó™Ë¥≠ - ÂÖ®Âú∫ÂïÜÂìÅ5ÊäòËµ∑ÔºåÈîôËøáÁ≠â‰∏ÄÂπ¥ÔºÅ</div>
    <div class="countdown">Ë∑ùÁªìÊùü: <span id="timer">02:00:00</span></div>
</header>

<!-- ÂØºËà™Ê†è -->
<nav class="nav-bar">
    <div class="logo">FlashShop.</div>
    <div class="filters" id="category-filters">
        <button class="active" data-category="all">ÂÖ®ÈÉ®</button>
        <button data-category="electronics">Êï∞Á†ÅÁîµÂ≠ê</button>
        <button data-category="fashion">ÊΩÆÊµÅÊúçÈ•∞</button>
        <button data-category="home">Êô∫ËÉΩÂÆ∂Â±Ö</button>
    </div>
    <button class="cart-trigger" id="cart-btn">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="9" cy="21" r="1"></circle>
            <circle cx="20" cy="21" r="1"></circle>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
        <span class="cart-badge" id="cart-count">0</span>
    </button>
</nav>

<!-- ÂïÜÂìÅÂàóË°® -->
<main class="container">
    <div class="product-grid" id="product-list">
        <!-- ÂïÜÂìÅÂç°ÁâáÂ∞ÜÈÄöËøá JS Âä®ÊÄÅÊèíÂÖ• -->
    </div>
</main>

<!-- Ë¥≠Áâ©ËΩ¶‰æßËæπÊ†è -->
<div class="overlay" id="overlay"></div>
<aside class="cart-sidebar" id="cart-sidebar">
    <header class="cart-header">
        <h2>ÊàëÁöÑË¥≠Áâ©ËΩ¶</h2>
        <button class="cart-close" id="close-cart">√ó</button>
    </header>
    <ul class="cart-items" id="cart-items-container">
        <!-- Ë¥≠Áâ©ËΩ¶È°πÁõÆ -->
    </ul>
    <footer class="cart-footer">
        <div class="cart-total">
            <span>ÊÄªËÆ°:</span>
            <span id="cart-total-price">¬•0.00</span>
        </div>
        <button class="btn-checkout" onclick="alert('ÊÑüË∞¢ÊÇ®ÁöÑ‰ΩìÈ™åÔºÅËøôÊòØ‰∏Ä‰∏™ÊºîÁ§∫È°µÈù¢„ÄÇ')">ÂéªÁªìÁÆó</button>
    </footer>
</aside>

<!-- ËØ¶ÊÉÖÂºπÁ™ó -->
<div class="modal" id="product-modal">
    <button class="modal-close" id="close-modal">√ó</button>
    <img src="" alt="" class="modal-img" id="modal-img">
    <div class="modal-content">
        <h2 id="modal-title">ÂïÜÂìÅÊ†áÈ¢ò</h2>
        <div class="stock-status" id="modal-stock">Â∫ìÂ≠òÂÖÖË∂≥</div>
        <p style="color: #777; margin: 10px 0; line-height: 1.6;" id="modal-desc">ÂïÜÂìÅÊèèËø∞ÂÜÖÂÆπ...</p>
        <div class="price-group" style="margin: 20px 0;">
            <span class="current-price" id="modal-price" style="font-size: 1.5rem;">¬•0.00</span>
            <span class="original-price" id="modal-old-price">¬•0.00</span>
        </div>
        <div style="margin-top: auto;">
            <button class="btn-add" style="width: 100%; padding: 15px; font-size: 1.1rem;" id="modal-add-btn">Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶</button>
        </div>
    </div>
</div>

<!-- ÊèêÁ§∫‰ø°ÊÅØ -->
<div class="toast" id="toast">ÂïÜÂìÅÂ∑≤Ê∑ªÂä†Âà∞Ë¥≠Áâ©ËΩ¶ÔºÅ</div>

<script>
    // ================= Êï∞ÊçÆÂ±Ç =================
    const products = [
        {
            id: 1,
            name: "Êó†Á∫øÈôçÂô™ËÄ≥Êú∫ Pro",
            category: "electronics",
            price: 1299,
            originalPrice: 1999,
            image: "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?auto=format&fit=crop&w=500&q=60",
            hot: true,
            discount: "-35%",
            stock: 15,
            description: "Ê≤âÊµ∏ÂºèÈü≥Êïà‰ΩìÈ™åÔºå40Â∞èÊó∂Ë∂ÖÈïøÁª≠Ëà™ÔºåÊô∫ËÉΩ‰∏ªÂä®ÈôçÂô™Ôºå‰∏∫ÊÇ®Â∏¶Êù•ÂΩïÈü≥ÂÆ§Á∫ßÂà´ÁöÑÂê¨Ëßâ‰∫´Âèó„ÄÇ"
        },
        {
            id: 2,
            name: "Â§çÂè§ËÉ∂ÁâáÁõ∏Êú∫",
            category: "electronics",
            price: 3499,
            originalPrice: 4200,
            image: "https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?auto=format&fit=crop&w=500&q=60",
            hot: false,
            discount: "-15%",
            stock: 5,
            description: "ÁªèÂÖ∏Â§çÂè§ËÆæËÆ°ÔºåÁªìÂêàÁé∞‰ª£Êï∞Á†ÅÊäÄÊúØ„ÄÇËÆ∞ÂΩïÁîüÊ¥ª‰∏≠ÁöÑÊØè‰∏Ä‰∏™ÁæéÂ•ΩÁû¨Èó¥„ÄÇ"
        },
        {
            id: 3,
            name: "ÊûÅÁÆÄËÆæËÆ°TÊÅ§",
            category: "fashion",
            price: 99,
            originalPrice: 199,
            image: "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?auto=format&fit=crop&w=500&q=60",
            hot: true,
            discount: "-50%",
            stock: 100,
            description: "100%Á∫ØÊ£âÊùêË¥®ÔºåÈÄèÊ∞î‰∫≤ËÇ§„ÄÇÊûÅÁÆÄÂâ™Ë£ÅÔºåÈÄÇÂêàÂêÑÁßçÂú∫ÂêàÁöÑÁôæÊê≠ÂçïÂìÅ„ÄÇ"
        },
        {
            id: 4,
            name: "Êô∫ËÉΩÊ∏©ÊéßÂíñÂï°ÊùØ",
            category: "home",
            price: 259,
            originalPrice: 399,
            image: "https://images.unsplash.com/photo-1514228742587-6b1558fcca3d?auto=format&fit=crop&w=500&q=60",
            hot: false,
            discount: "-35%",
            stock: 20,
            description: "APPÊô∫ËÉΩÊéßÂà∂Ôºå‰øùÊåÅÈ•ÆÂìÅÊúÄ‰Ω≥Ê∏©Â∫¶„ÄÇ‰∏ç‰ªÖÊòØÊùØÂ≠êÔºåÊõ¥ÊòØÊÇ®ÁöÑÁîüÊ¥ªÂä©Êâã„ÄÇ"
        },
        {
            id: 5,
            name: "Êú∫Ê¢∞ÈîÆÁõò RGBÁâà",
            category: "electronics",
            price: 599,
            originalPrice: 899,
            image: "https://images.unsplash.com/photo-1511467687858-23d96c32e4ae?auto=format&fit=crop&w=500&q=60",
            hot: true,
            discount: "-33%",
            stock: 8,
            description: "ÈùíËΩ¥ÊâãÊÑüÔºåÂÖ®ÈîÆÊó†ÂÜ≤„ÄÇÁÇ´ÈÖ∑RGBÁÅØÊïàÔºå‰∏∫ÊÇ®ÁöÑÁîµÁ´ûÊ°åÈù¢Â¢ûÊ∑ªÂÖâÂΩ©„ÄÇ"
        },
        {
            id: 6,
            name: "ÂåóÊ¨ßÈ£éÂè∞ÁÅØ",
            category: "home",
            price: 189,
            originalPrice: 299,
            image: "https://images.unsplash.com/photo-1507473888900-52e1adad5481?auto=format&fit=crop&w=500&q=60",
            hot: false,
            discount: "-30%",
            stock: 45,
            description: "ÁÆÄÁ∫¶Á∫øÊù°ËÆæËÆ°ÔºåÊüîÂíåÂÖâÁ∫øÊä§Áúº„ÄÇÊòØÈòÖËØªÂíåÂ∑•‰ΩúÁöÑÁêÜÊÉ≥‰º¥‰æ£„ÄÇ"
        }
    ];

    // ÂàùÂßãÂåñË¥≠Áâ©ËΩ¶Áä∂ÊÄÅ
    let cart = JSON.parse(localStorage.getItem('flashShopCart')) || [];

    // ================= DOM ÂÖÉÁ¥† =================
    const productListEl = document.getElementById('product-list');
    const cartItemsEl = document.getElementById('cart-items-container');
    const cartCountEl = document.getElementById('cart-count');
    const cartTotalEl = document.getElementById('cart-total-price');
    const cartSidebar = document.getElementById('cart-sidebar');
    const overlay = document.getElementById('overlay');
    const modal = document.getElementById('product-modal');
    const toast = document.getElementById('toast');

    // ================= Ê†∏ÂøÉÈÄªËæë =================

    // Ê∏≤ÊüìÂïÜÂìÅÂàóË°®
    function renderProducts(filter = 'all') {
        productListEl.innerHTML = '';
        const filtered = filter === 'all' ? products : products.filter(p => p.category === filter);

        filtered.forEach(product => {
            const card = document.createElement('article');
            card.className = 'product-card';
            card.innerHTML = `
                ${product.hot ? '<span class="tag-hot">HOT</span>' : ''}
                ${product.discount ? `<span class="tag-discount">${product.discount}</span>` : ''}
                <img src="${product.image}" class="product-image" onclick="openModal(${product.id})" alt="${product.name}">
                <div class="product-info">
                    <h3 class="product-title" onclick="openModal(${product.id})">${product.name}</h3>
                    <div class="product-meta">
                        <div class="price-group">
                            <span class="current-price">¬•${product.price}</span>
                            <span class="original-price">¬•${product.originalPrice}</span>
                        </div>
                        <button class="btn-add" onclick="addToCart(${product.id})">
                            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 5v14M5 12h14"/></svg>
                            Âä†Ë¥≠
                        </button>
                    </div>
                </div>
            `;
            productListEl.appendChild(card);
        });
    }

    // Êõ¥Êñ∞Ë¥≠Áâ©ËΩ¶ UI
    function updateCartUI() {
        cartItemsEl.innerHTML = '';
        let total = 0;
        let count = 0;

        if (cart.length === 0) {
            cartItemsEl.innerHTML = '<p style="text-align:center; color:#999; margin-top:20px;">Ë¥≠Áâ©ËΩ¶Á©∫Á©∫Â¶Ç‰πü</p>';
        }

        cart.forEach(item => {
            const product = products.find(p => p.id === item.id);
            if (product) {
                total += product.price * item.qty;
                count += item.qty;
                
                const li = document.createElement('li');
                li.className = 'cart-item';
                li.innerHTML = `
                    <img src="${product.image}" alt="${product.name}">
                    <div class="cart-item-details">
                        <div class="cart-item-title">${product.name}</div>
                        <div style="color:var(--primary-color); font-weight:bold;">¬•${product.price}</div>
                        <div class="cart-item-controls">
                            <div>
                                <button class="qty-btn" onclick="changeQty(${item.id}, -1)">-</button>
                                <span style="margin:0 5px; font-size:0.9rem;">${item.qty}</span>
                                <button class="qty-btn" onclick="changeQty(${item.id}, 1)">+</button>
                            </div>
                            <button onclick="removeFromCart(${item.id})" style="border:none; background:none; color:#ff4757; cursor:pointer; font-size:0.8rem;">Âà†Èô§</button>
                        </div>
                    </div>
                `;
                cartItemsEl.appendChild(li);
            }
        });

        cartCountEl.innerText = count;
        cartTotalEl.innerText = '¬•' + total.toFixed(2);
        
        // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®
        localStorage.setItem('flashShopCart', JSON.stringify(cart));
    }

    // Ê∑ªÂä†Âà∞Ë¥≠Áâ©ËΩ¶
    window.addToCart = function(id, qty = 1) {
        const product = products.find(p => p.id === id);
        const existingItem = cart.find(item => item.id === id);
        
        // ÁÆÄÂçïÂ∫ìÂ≠òÊ£ÄÊü•
        const currentQty = existingItem ? existingItem.qty : 0;
        if (currentQty + qty > product.stock) {
            showToast('Â∫ìÂ≠ò‰∏çË∂≥ÔºÅ', true);
            return;
        }

        if (existingItem) {
            existingItem.qty += qty;
        } else {
            cart.push({ id: id, qty: qty });
        }

        updateCartUI();
        showToast('Â∑≤Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶');
        
        // ÁÆÄÂçïÁöÑÊ∑ªÂä†Âä®ÁîªÊïàÊûúÔºàÂ¶ÇÊûúÊòØ‰ªéÊ®°ÊÄÅÊ°ÜÊ∑ªÂä†ÔºåÂÖ≥Èó≠Ê®°ÊÄÅÊ°ÜÔºâ
        if(modal.classList.contains('active')) {
            closeModalFn();
        }
        // Ëá™Âä®ÊâìÂºÄ‰æßËæπÊ†èÁªôÂèçÈ¶à
        cartSidebar.classList.add('open');
        overlay.classList.add('active');
    };

    // ‰øÆÊîπÊï∞Èáè
    window.changeQty = function(id, delta) {
        const item = cart.find(i => i.id === id);
        const product = products.find(p => p.id === id);
        
        if (item) {
            const newQty = item.qty + delta;
            if (newQty > product.stock) {
                showToast('ËææÂà∞Â∫ìÂ≠ò‰∏äÈôê', true);
                return;
            }
            if (newQty > 0) {
                item.qty = newQty;
            } else {
                // Â¶ÇÊûúÂáèÂà∞0ÔºåËØ¢ÈóÆÂà†Èô§ÊàñÁõ¥Êé•Âà†Èô§
                removeFromCart(id);
                return;
            }
        }
        updateCartUI();
    };

    // Âà†Èô§ÂïÜÂìÅ
    window.removeFromCart = function(id) {
        cart = cart.filter(item => item.id !== id);
        updateCartUI();
    };

    // ================= ‰∫§‰∫íÈÄªËæë =================

    // Á≠õÈÄâÂô®ÈÄªËæë
    document.getElementById('category-filters').addEventListener('click', (e) => {
        if (e.target.tagName === 'BUTTON') {
            document.querySelectorAll('#category-filters button').forEach(b => b.classList.remove('active'));
            e.target.classList.add('active');
            renderProducts(e.target.dataset.category);
        }
    });

    // ÊâìÂºÄÊ®°ÊÄÅÊ°Ü
    window.openModal = function(id) {
        const product = products.find(p => p.id === id);
        if (!product) return;

        document.getElementById('modal-img').src = product.image;
        document.getElementById('modal-title').innerText = product.name;
        document.getElementById('modal-price').innerText = '¬•' + product.price;
        document.getElementById('modal-old-price').innerText = '¬•' + product.originalPrice;
        document.getElementById('modal-desc').innerText = product.description;
        
        const stockEl = document.getElementById('modal-stock');
        if (product.stock < 10) {
            stockEl.innerText = `‰ªÖÂâ© ${product.stock} ‰ª∂ - Ê¨≤Ë¥≠‰ªéÈÄü`;
            stockEl.className = 'stock-status stock-low';
        } else {
            stockEl.innerText = `Â∫ìÂ≠òÂÖÖË∂≥ (${product.stock}‰ª∂)`;
            stockEl.className = 'stock-status stock-ok';
        }

        // ÁªëÂÆöÊ®°ÊÄÅÊ°ÜÁöÑÊ∑ªÂä†ÊåâÈíÆ
        const addBtn = document.getElementById('modal-add-btn');
        // ÁßªÈô§ÊóßÁöÑ‰∫ã‰ª∂ÁõëÂê¨Âô®ÔºåÈÅøÂÖçÈáçÂ§çÊ∑ªÂä†Ôºà‰ΩøÁî®ÂÖãÈöÜËäÇÁÇπÊ≥ïÊ∏ÖÈô§Ôºâ
        const newBtn = addBtn.cloneNode(true);
        addBtn.parentNode.replaceChild(newBtn, addBtn);
        newBtn.addEventListener('click', () => addToCart(product.id));

        modal.classList.add('active');
        overlay.classList.add('active');
    };

    function closeModalFn() {
        modal.classList.remove('active');
        cartSidebar.classList.remove('open');
        overlay.classList.remove('active');
    }

    document.getElementById('close-modal').addEventListener('click', closeModalFn);
    document.getElementById('close-cart').addEventListener('click', closeModalFn);
    overlay.addEventListener('click', closeModalFn);

    document.getElementById('cart-btn').addEventListener('click', () => {
        cartSidebar.classList.add('open');
        overlay.classList.add('active');
    });

    // Toast ÊèêÁ§∫
    function showToast(msg, isError = false) {
        toast.innerText = msg;
        toast.style.background = isError ? '#ff4757' : '#2F3542';
        toast.classList.add('show');
        setTimeout(() => {
            toast.classList.remove('show');
        }, 2000);
    }

    // ÂÄíËÆ°Êó∂ÈÄªËæë
    function startTimer() {
        let time = 7200; // 2Â∞èÊó∂ÁßíÊï∞
        const timerEl = document.getElementById('timer');
        
        setInterval(() => {
            time--;
            if (time < 0) time = 7200; // Âæ™ÁéØÈáçÁΩÆ
            
            const h = Math.floor(time / 3600).toString().padStart(2, '0');
            const m = Math.floor((time % 3600) / 60).toString().padStart(2, '0');
            const s = (time % 60).toString().padStart(2, '0');
            
            timerEl.innerText = `${h}:${m}:${s}`;
        }, 1000);
    }

    // ÂàùÂßãÂåñ
    renderProducts();
    updateCartUI();
    startTimer();

</script>
</body>
</html>