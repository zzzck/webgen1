{
  "brief": [
    {
      "topic": "brief",
      "sender": "User",
      "content": "\nä¸ºç½‘ç«™åˆ›å»ºä¸€ä¸ªå“åº”å¼ä¸”è§†è§‰æ•ˆæœå¸å¼•äººçš„ç”µå•†äº§å“é”€å”®é¡µé¢å°éƒ¨ä»¶ã€‚\nç”¨æˆ·åº”èƒ½å¤Ÿæµè§ˆå•†å“åˆ—è¡¨ã€æŸ¥çœ‹å•†å“è¯¦æƒ…ã€é€‰æ‹©æ•°é‡å¹¶åŠ å…¥è´­ç‰©è½¦ï¼Œä»¥åŠä»è´­ç‰©è½¦ä¸­åˆ é™¤å•†å“ã€‚é¡µé¢åº”æ”¯æŒæ˜¾ç¤ºå•†å“ä»·æ ¼ã€æŠ˜æ‰£ä¿¡æ¯ã€åº“å­˜çŠ¶æ€å’ŒæŒ‰åˆ†ç±»æµè§ˆç­‰åŠŸèƒ½ã€‚\næ‚¨è¿˜å¯ä»¥æ·»åŠ ä»»ä½•å…¶ä»–åˆ›æ„åŠŸèƒ½æ¥æé«˜è½¬åŒ–ç‡å’Œè¶£å‘³æ€§ï¼Œä¾‹å¦‚é™æ—¶å€’è®¡æ—¶ã€çƒ­é”€æ ‡è®°æˆ–ç®€æ˜“è®¢å•æ‘˜è¦ã€‚\nä»…ä½¿ç”¨ HTMLã€CSS å’Œ JavaScript â€” ä¸è¦ä½¿ç”¨ Vueã€React æˆ–ä»»ä½•ç¬¬ä¸‰æ–¹åº“ã€‚ä½¿ç”¨ localStorage å­˜å‚¨è´­ç‰©è½¦ç­‰æ•°æ®ï¼Œç¡®ä¿ä¿¡æ¯åœ¨é¡µé¢åˆ·æ–°åä»èƒ½ä¿ç•™ã€‚ä¿æŒæ•´ä½“è®¾è®¡ç®€æ´ã€ç”¨æˆ·å‹å¥½ä¸”å¼•äººå…¥èƒœã€‚\n"
    }
  ],
  "tasks": [
    {
      "topic": "tasks",
      "sender": "TeamLeader",
      "content": {
        "available_roles": [
          "TeamLeader",
          "Engineer"
        ],
        "tasks": [
          {
            "role": "TeamLeader",
            "tasks": [
              "æ¢³ç†ç”µå•†äº§å“é”€å”®å°éƒ¨ä»¶éœ€æ±‚",
              "æ˜ç¡®åŠŸèƒ½æ¨¡å—ï¼ˆå•†å“å±•ç¤ºã€è´­ç‰©è½¦é€»è¾‘ã€localStorageå­˜å‚¨ã€åˆ†ç±»ç­›é€‰ï¼‰åŠåˆ›æ„åŠ åˆ†é¡¹"
            ]
          },
          {
            "role": "Engineer",
            "tasks": [
              "æ„å»º HTML é¡µé¢ç»“æ„ï¼ˆå•†å“åˆ—è¡¨åŒºã€è´­ç‰©è½¦é¢æ¿/æ¨¡æ€æ¡†ï¼‰",
              "ç¼–å†™ CSS å®ç°å“åº”å¼å¸ƒå±€ä¸è§†è§‰è®¾è®¡ï¼ˆå«çƒ­é”€æ ‡è®°ã€äº¤äº’åŠ¨ç”»ï¼‰",
              "å¼€å‘åŸç”Ÿ JavaScript é€»è¾‘ï¼ˆæ•°æ®æ¸²æŸ“ã€è´­ç‰©è½¦å¢åˆ æ”¹ã€åˆ†ç±»ç­›é€‰ã€åº“å­˜çŠ¶æ€é€»è¾‘ï¼‰",
              "å®ç° localStorage æ•°æ®æŒä¹…åŒ–ä¸é™æ—¶å€’è®¡æ—¶ç­‰åˆ›æ„åŠŸèƒ½"
            ]
          }
        ]
      }
    }
  ],
  "html": [
    {
      "topic": "html",
      "sender": "Engineer",
      "content": "<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>é—ªè´­ä¼˜é€‰ - ç²¾é€‰ç”µå•†å°éƒ¨ä»¶</title>\n    <style>\n        :root {\n            --primary: #2563eb;\n            --primary-dark: #1d4ed8;\n            --secondary: #f97316;\n            --bg-light: #f3f4f6;\n            --white: #ffffff;\n            --text-dark: #1f2937;\n            --text-gray: #6b7280;\n            --danger: #ef4444;\n            --success: #22c55e;\n            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n            --radius: 12px;\n        }\n\n        * {\n            box-sizing: border-box;\n            margin: 0;\n            padding: 0;\n            font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif;\n        }\n\n        body {\n            background-color: var(--bg-light);\n            color: var(--text-dark);\n            padding-bottom: 50px;\n        }\n\n        /* Header */\n        header {\n            background: var(--white);\n            padding: 1rem 2rem;\n            position: sticky;\n            top: 0;\n            z-index: 100;\n            box-shadow: var(--shadow);\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n        }\n\n        .logo {\n            font-size: 1.5rem;\n            font-weight: 800;\n            color: var(--primary);\n            letter-spacing: -0.5px;\n        }\n\n        .cart-btn-wrap {\n            position: relative;\n            cursor: pointer;\n        }\n\n        .cart-icon {\n            font-size: 1.5rem;\n        }\n\n        .cart-count {\n            position: absolute;\n            top: -8px;\n            right: -8px;\n            background: var(--danger);\n            color: var(--white);\n            font-size: 0.75rem;\n            font-weight: bold;\n            height: 20px;\n            width: 20px;\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            transition: transform 0.2s;\n        }\n\n        .cart-count.bump {\n            transform: scale(1.2);\n        }\n\n        /* Hero Banner */\n        .hero {\n            background: linear-gradient(135deg, var(--primary) 0%, #4f46e5 100%);\n            color: var(--white);\n            padding: 2rem;\n            text-align: center;\n            margin: 1rem auto;\n            width: 95%;\n            max-width: 1200px;\n            border-radius: var(--radius);\n            position: relative;\n            overflow: hidden;\n        }\n\n        .hero h2 {\n            margin-bottom: 0.5rem;\n        }\n\n        .countdown {\n            font-weight: bold;\n            font-family: monospace;\n            font-size: 1.2rem;\n            background: rgba(255,255,255,0.2);\n            display: inline-block;\n            padding: 0.5rem 1rem;\n            border-radius: 8px;\n            margin-top: 10px;\n        }\n\n        /* Filters */\n        .filters {\n            display: flex;\n            justify-content: center;\n            gap: 1rem;\n            padding: 1rem;\n            flex-wrap: wrap;\n        }\n\n        .filter-btn {\n            background: var(--white);\n            border: 1px solid #e5e7eb;\n            padding: 0.5rem 1.5rem;\n            border-radius: 20px;\n            cursor: pointer;\n            transition: all 0.3s;\n            font-weight: 500;\n        }\n\n        .filter-btn.active, .filter-btn:hover {\n            background: var(--primary);\n            color: var(--white);\n            border-color: var(--primary);\n        }\n\n        /* Product Grid */\n        .container {\n            max-width: 1200px;\n            margin: 0 auto;\n            padding: 0 1rem;\n        }\n\n        .product-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n            gap: 2rem;\n            padding: 1rem 0;\n        }\n\n        /* Product Card */\n        .card {\n            background: var(--white);\n            border-radius: var(--radius);\n            overflow: hidden;\n            box-shadow: var(--shadow);\n            transition: transform 0.3s ease, box-shadow 0.3s ease;\n            position: relative;\n            display: flex;\n            flex-direction: column;\n        }\n\n        .card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);\n        }\n\n        .badge {\n            position: absolute;\n            top: 10px;\n            left: 10px;\n            background: var(--secondary);\n            color: white;\n            padding: 4px 8px;\n            border-radius: 4px;\n            font-size: 0.8rem;\n            font-weight: bold;\n            z-index: 10;\n        }\n\n        .badge.low-stock {\n            background: var(--danger);\n        }\n\n        .card-img-wrap {\n            height: 200px;\n            background: #e5e7eb;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            overflow: hidden;\n        }\n\n        .card-img {\n            width: 100%;\n            height: 100%;\n            object-fit: cover;\n            transition: transform 0.5s;\n        }\n\n        .card:hover .card-img {\n            transform: scale(1.05);\n        }\n\n        .card-body {\n            padding: 1.5rem;\n            display: flex;\n            flex-direction: column;\n            flex-grow: 1;\n        }\n\n        .card-title {\n            font-size: 1.1rem;\n            font-weight: 600;\n            margin-bottom: 0.5rem;\n        }\n\n        .card-desc {\n            font-size: 0.9rem;\n            color: var(--text-gray);\n            margin-bottom: 1rem;\n            line-height: 1.4;\n            flex-grow: 1;\n        }\n\n        .price-row {\n            display: flex;\n            align-items: flex-end;\n            gap: 8px;\n            margin-bottom: 1rem;\n        }\n\n        .current-price {\n            font-size: 1.25rem;\n            font-weight: 800;\n            color: var(--primary);\n        }\n\n        .old-price {\n            font-size: 0.9rem;\n            text-decoration: line-through;\n            color: var(--text-gray);\n        }\n\n        .discount-tag {\n            font-size: 0.75rem;\n            color: var(--success);\n            background: #dcfce7;\n            padding: 2px 6px;\n            border-radius: 4px;\n        }\n\n        .stock-info {\n            font-size: 0.8rem;\n            color: var(--text-gray);\n            margin-bottom: 1rem;\n        }\n\n        .add-btn {\n            width: 100%;\n            padding: 0.75rem;\n            background: var(--primary);\n            color: var(--white);\n            border: none;\n            border-radius: 8px;\n            font-weight: 600;\n            cursor: pointer;\n            transition: background 0.2s;\n        }\n\n        .add-btn:hover {\n            background: var(--primary-dark);\n        }\n\n        .add-btn:disabled {\n            background: #9ca3af;\n            cursor: not-allowed;\n        }\n\n        /* Sidebar Cart */\n        .cart-sidebar {\n            position: fixed;\n            top: 0;\n            right: -400px;\n            width: 100%;\n            max-width: 400px;\n            height: 100vh;\n            background: var(--white);\n            box-shadow: -5px 0 15px rgba(0,0,0,0.1);\n            z-index: 1000;\n            transition: right 0.3s ease;\n            display: flex;\n            flex-direction: column;\n        }\n\n        .cart-sidebar.open {\n            right: 0;\n        }\n\n        .cart-header {\n            padding: 1.5rem;\n            border-bottom: 1px solid #e5e7eb;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n        }\n\n        .close-cart {\n            background: none;\n            border: none;\n            font-size: 1.5rem;\n            cursor: pointer;\n        }\n\n        .cart-items {\n            flex-grow: 1;\n            overflow-y: auto;\n            padding: 1rem;\n        }\n\n        .cart-item {\n            display: flex;\n            gap: 1rem;\n            padding-bottom: 1rem;\n            border-bottom: 1px solid #f3f4f6;\n            margin-bottom: 1rem;\n        }\n\n        .cart-item-img {\n            width: 60px;\n            height: 60px;\n            border-radius: 8px;\n            background: #e5e7eb;\n            object-fit: cover;\n        }\n\n        .cart-item-details {\n            flex-grow: 1;\n        }\n\n        .cart-item-title {\n            font-size: 0.95rem;\n            font-weight: 600;\n            margin-bottom: 4px;\n        }\n\n        .cart-item-price {\n            font-size: 0.9rem;\n            color: var(--text-gray);\n        }\n\n        .cart-controls {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n            margin-top: 8px;\n        }\n\n        .qty-btn {\n            width: 24px;\n            height: 24px;\n            border-radius: 4px;\n            border: 1px solid #e5e7eb;\n            background: white;\n            cursor: pointer;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n\n        .qty-btn:hover {\n            background: #f9fafb;\n        }\n\n        .remove-btn {\n            margin-left: auto;\n            color: var(--danger);\n            font-size: 0.8rem;\n            background: none;\n            border: none;\n            cursor: pointer;\n            text-decoration: underline;\n        }\n\n        .cart-footer {\n            padding: 1.5rem;\n            border-top: 1px solid #e5e7eb;\n            background: #f9fafb;\n        }\n\n        .cart-summary-row {\n            display: flex;\n            justify-content: space-between;\n            margin-bottom: 0.5rem;\n            font-size: 0.9rem;\n            color: var(--text-gray);\n        }\n\n        .total-row {\n            display: flex;\n            justify-content: space-between;\n            font-size: 1.2rem;\n            font-weight: 800;\n            color: var(--text-dark);\n            margin-top: 10px;\n            margin-bottom: 1rem;\n        }\n\n        .checkout-btn {\n            width: 100%;\n            padding: 1rem;\n            background: var(--secondary);\n            color: white;\n            border: none;\n            border-radius: 8px;\n            font-weight: bold;\n            font-size: 1rem;\n            cursor: pointer;\n            transition: background 0.2s;\n        }\n\n        .checkout-btn:hover {\n            background: #ea580c;\n        }\n\n        .overlay {\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: rgba(0,0,0,0.5);\n            z-index: 900;\n            display: none;\n            opacity: 0;\n            transition: opacity 0.3s;\n        }\n\n        .overlay.active {\n            display: block;\n            opacity: 1;\n        }\n\n        /* Toast Notification */\n        .toast {\n            position: fixed;\n            bottom: 20px;\n            left: 50%;\n            transform: translateX(-50%) translateY(100px);\n            background: #1f2937;\n            color: white;\n            padding: 12px 24px;\n            border-radius: 30px;\n            box-shadow: 0 10px 25px rgba(0,0,0,0.2);\n            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n            z-index: 2000;\n            display: flex;\n            align-items: center;\n            gap: 8px;\n        }\n        \n        .toast.show {\n            transform: translateX(-50%) translateY(0);\n        }\n\n        .empty-cart-msg {\n            text-align: center;\n            padding: 2rem;\n            color: var(--text-gray);\n        }\n\n        @media (max-width: 768px) {\n            .product-grid {\n                grid-template-columns: 1fr;\n            }\n            .cart-sidebar {\n                width: 85%;\n            }\n        }\n    </style>\n</head>\n<body>\n\n    <!-- Navbar -->\n    <header>\n        <div class=\"logo\">âš¡ é—ªè´­ä¼˜é€‰</div>\n        <div class=\"cart-btn-wrap\" onclick=\"toggleCart()\">\n            <div class=\"cart-icon\">ğŸ›’</div>\n            <div class=\"cart-count\" id=\"cartCount\">0</div>\n        </div>\n    </header>\n\n    <!-- Hero Section -->\n    <section class=\"hero\">\n        <h2>ğŸ‰ é™æ—¶ç‰¹æƒ  | å…¨åœºä½è‡³ 5 æŠ˜</h2>\n        <p>ä»Šæ—¥ä¸‹å•ï¼Œæ˜æ—¥é€è¾¾ã€‚ä¸è¦é”™è¿‡è¿™äº›ç²¾é€‰å¥½ç‰©ï¼</p>\n        <div class=\"countdown\" id=\"countdownTimer\">å€’è®¡æ—¶åŠ è½½ä¸­...</div>\n    </section>\n\n    <!-- Filters -->\n    <nav class=\"filters\" id=\"categoryFilters\">\n        <button class=\"filter-btn active\" data-category=\"all\">å…¨éƒ¨å•†å“</button>\n        <button class=\"filter-btn\" data-category=\"tech\">æ•°ç ç§‘æŠ€</button>\n        <button class=\"filter-btn\" data-category=\"clothing\">æ—¶å°šç©¿æ­</button>\n        <button class=\"filter-btn\" data-category=\"home\">å®¶å±…ç”Ÿæ´»</button>\n    </nav>\n\n    <!-- Main Product Grid -->\n    <main class=\"container\">\n        <div class=\"product-grid\" id=\"productGrid\">\n            <!-- Products injected via JS -->\n        </div>\n    </main>\n\n    <!-- Cart Sidebar -->\n    <div class=\"overlay\" id=\"overlay\" onclick=\"toggleCart()\"></div>\n    <div class=\"cart-sidebar\" id=\"cartSidebar\">\n        <div class=\"cart-header\">\n            <h3>æˆ‘çš„è´­ç‰©è½¦</h3>\n            <button class=\"close-cart\" onclick=\"toggleCart()\">Ã—</button>\n        </div>\n        <div class=\"cart-items\" id=\"cartItemsContainer\">\n            <!-- Cart items injected via JS -->\n        </div>\n        <div class=\"cart-footer\">\n            <div class=\"cart-summary-row\">\n                <span>å°è®¡</span>\n                <span id=\"cartSubtotal\">Â¥0.00</span>\n            </div>\n            <div class=\"cart-summary-row\">\n                <span>ä¼˜æƒ </span>\n                <span id=\"cartDiscount\" style=\"color: var(--success);\">-Â¥0.00</span>\n            </div>\n            <div class=\"total-row\">\n                <span>æ€»è®¡</span>\n                <span id=\"cartTotal\">Â¥0.00</span>\n            </div>\n            <button class=\"checkout-btn\" onclick=\"checkout()\">ç«‹å³ç»“ç®—</button>\n        </div>\n    </div>\n\n    <!-- Toast -->\n    <div class=\"toast\" id=\"toast\">\n        <span>âœ…</span> <span id=\"toastMsg\">å·²æ·»åŠ åˆ°è´­ç‰©è½¦</span>\n    </div>\n\n    <script>\n        // --- Data ---\n        const products = [\n            {\n                id: 1,\n                name: \"æ— çº¿é™å™ªè€³æœº Pro\",\n                category: \"tech\",\n                price: 1299,\n                originalPrice: 1599,\n                desc: \"æ²‰æµ¸å¼éŸ³æ•ˆä½“éªŒï¼Œ40å°æ—¶è¶…é•¿ç»­èˆªï¼Œä¸»åŠ¨é™å™ªåŠŸèƒ½ã€‚\",\n                image: \"https://via.placeholder.com/300/2563eb/ffffff?text=Headphones\",\n                stock: 15,\n                isHot: true\n            },\n            {\n                id: 2,\n                name: \"æç®€å¤å¤æœºæ¢°é”®ç›˜\",\n                category: \"tech\",\n                price: 399,\n                originalPrice: 499,\n                desc: \"é’è½´æ‰‹æ„Ÿï¼ŒRGBèƒŒå…‰ï¼Œå¤šè®¾å¤‡è“ç‰™è¿æ¥ã€‚\",\n                image: \"https://via.placeholder.com/300/1d4ed8/ffffff?text=Keyboard\",\n                stock: 8,\n                isHot: false\n            },\n            {\n                id: 3,\n                name: \"çº¯æ£‰oversizeå«è¡£\",\n                category: \"clothing\",\n                price: 199,\n                originalPrice: 299,\n                desc: \"100%æ–°ç–†é•¿ç»’æ£‰ï¼Œäº²è‚¤é€æ°”ï¼Œæ½®æµç‰ˆå‹ã€‚\",\n                image: \"https://via.placeholder.com/300/f97316/ffffff?text=Hoodie\",\n                stock: 50,\n                isHot: true\n            },\n            {\n                id: 4,\n                name: \"æ™ºèƒ½æ¸©æ§å’–å•¡æ¯\",\n                category: \"home\",\n                price: 259,\n                originalPrice: 329,\n                desc: \"Appæ§åˆ¶æ¸©åº¦ï¼Œä¿æŒå’–å•¡æœ€ä½³å£æ„Ÿï¼ŒåŠå…¬ç¥å™¨ã€‚\",\n                image: \"https://via.placeholder.com/300/ea580c/ffffff?text=Smart+Mug\",\n                stock: 3,\n                isHot: false\n            },\n            {\n                id: 5,\n                name: \"è¿åŠ¨æ™ºèƒ½æ‰‹è¡¨ Gen 5\",\n                category: \"tech\",\n                price: 899,\n                originalPrice: 1099,\n                desc: \"å¿ƒç‡ç›‘æµ‹ï¼Œè¡€æ°§æ£€æµ‹ï¼Œ50ç±³é˜²æ°´ã€‚\",\n                image: \"https://via.placeholder.com/300/4f46e5/ffffff?text=Watch\",\n                stock: 12,\n                isHot: true\n            },\n            {\n                id: 6,\n                name: \"åŒ—æ¬§é£æç®€å°ç¯\",\n                category: \"home\",\n                price: 129,\n                originalPrice: 199,\n                desc: \"æŠ¤çœ¼æ— å¯è§†é¢‘é—ªï¼Œä¸‰æ¡£è°ƒå…‰ï¼ŒUSBå……ç”µã€‚\",\n                image: \"https://via.placeholder.com/300/6b7280/ffffff?text=Lamp\",\n                stock: 0,\n                isHot: false\n            }\n        ];\n\n        // --- State ---\n        let cart = JSON.parse(localStorage.getItem('shoppingCart')) || [];\n\n        // --- DOM Elements ---\n        const productGrid = document.getElementById('productGrid');\n        const cartCountEl = document.getElementById('cartCount');\n        const cartSidebar = document.getElementById('cartSidebar');\n        const overlay = document.getElementById('overlay');\n        const cartItemsContainer = document.getElementById('cartItemsContainer');\n        const filters = document.getElementById('categoryFilters');\n        \n        // --- Initialization ---\n        document.addEventListener('DOMContentLoaded', () => {\n            renderProducts('all');\n            updateCartUI();\n            startCountdown();\n        });\n\n        // --- Logic: Products ---\n        function renderProducts(category) {\n            productGrid.innerHTML = '';\n            \n            const filtered = category === 'all' \n                ? products \n                : products.filter(p => p.category === category);\n\n            if (filtered.length === 0) {\n                productGrid.innerHTML = '<div style=\"grid-column:1/-1; text-align:center; padding:2rem;\">æš‚æ— ç›¸å…³å•†å“</div>';\n                return;\n            }\n\n            filtered.forEach(p => {\n                const discount = Math.round((1 - p.price / p.originalPrice) * 100);\n                const isLowStock = p.stock > 0 && p.stock < 5;\n                const isOutOfStock = p.stock === 0;\n\n                const card = document.createElement('div');\n                card.className = 'card';\n                card.innerHTML = `\n                    ${p.isHot ? '<span class=\"badge\">ğŸ”¥ çƒ­é”€</span>' : ''}\n                    ${isLowStock ? '<span class=\"badge low-stock\">ä»…å‰© ' + p.stock + ' ä»¶</span>' : ''}\n                    <div class=\"card-img-wrap\">\n                        <img src=\"${p.image}\" alt=\"${p.name}\" class=\"card-img\">\n                    </div>\n                    <div class=\"card-body\">\n                        <h3 class=\"card-title\">${p.name}</h3>\n                        <p class=\"card-desc\">${p.desc}</p>\n                        <div class=\"stock-info\">\n                            ${isOutOfStock ? '<span style=\"color:var(--danger)\">æš‚æ—¶ç¼ºè´§</span>' : 'åº“å­˜å……è¶³'}\n                        </div>\n                        <div class=\"price-row\">\n                            <span class=\"current-price\">Â¥${p.price}</span>\n                            <span class=\"old-price\">Â¥${p.originalPrice}</span>\n                            <span class=\"discount-tag\">-${discount}%</span>\n                        </div>\n                        <button class=\"add-btn\" \n                            onclick=\"addToCart(${p.id})\" \n                            ${isOutOfStock ? 'disabled' : ''}>\n                            ${isOutOfStock ? 'å·²å”®ç½„' : 'åŠ å…¥è´­ç‰©è½¦'}\n                        </button>\n                    </div>\n                `;\n                productGrid.appendChild(card);\n            });\n        }\n\n        // --- Logic: Filtering ---\n        filters.addEventListener('click', (e) => {\n            if (e.target.classList.contains('filter-btn')) {\n                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));\n                e.target.classList.add('active');\n                renderProducts(e.target.dataset.category);\n            }\n        });\n\n        // --- Logic: Cart ---\n        function addToCart(id) {\n            const product = products.find(p => p.id === id);\n            const existingItem = cart.find(item => item.id === id);\n\n            if (existingItem) {\n                if (existingItem.quantity < product.stock) {\n                    existingItem.quantity++;\n                    showToast(`å·²æ›´æ–° ${product.name} æ•°é‡`);\n                } else {\n                    showToast(`åº“å­˜ä¸è¶³ï¼Œæ— æ³•æ·»åŠ æ›´å¤š`, true);\n                    return;\n                }\n            } else {\n                cart.push({ ...product, quantity: 1 });\n                showToast(`å·²å°† ${product.name} åŠ å…¥è´­ç‰©è½¦`);\n            }\n\n            saveCart();\n            updateCartUI();\n            animateCartIcon();\n        }\n\n        function removeFromCart(id) {\n            cart = cart.filter(item => item.id !== id);\n            saveCart();\n            updateCartUI();\n        }\n\n        function changeQuantity(id, change) {\n            const item = cart.find(item => item.id === id);\n            const product = products.find(p => p.id === id);\n\n            if (item) {\n                const newQty = item.quantity + change;\n                if (newQty > 0 && newQty <= product.stock) {\n                    item.quantity = newQty;\n                } else if (newQty <= 0) {\n                    removeFromCart(id);\n                    return;\n                } else {\n                    showToast('å·²è¾¾åˆ°æœ€å¤§åº“å­˜é™åˆ¶', true);\n                    return;\n                }\n                saveCart();\n                updateCartUI();\n            }\n        }\n\n        function saveCart() {\n            localStorage.setItem('shoppingCart', JSON.stringify(cart));\n        }\n\n        function updateCartUI() {\n            // 1. Update Count\n            const totalCount = cart.reduce((sum, item) => sum + item.quantity, 0);\n            cartCountEl.textContent = totalCount;\n\n            // 2. Render List\n            cartItemsContainer.innerHTML = '';\n            if (cart.length === 0) {\n                cartItemsContainer.innerHTML = '<div class=\"empty-cart-msg\">è´­ç‰©è½¦æ˜¯ç©ºçš„<br>å¿«å»é€‰è´­å¿ƒä»ªçš„å•†å“å§ï¼</div>';\n            } else {\n                cart.forEach(item => {\n                    const div = document.createElement('div');\n                    div.className = 'cart-item';\n                    div.innerHTML = `\n                        <img src=\"${item.image}\" class=\"cart-item-img\" alt=\"${item.name}\">\n                        <div class=\"cart-item-details\">\n                            <div class=\"cart-item-title\">${item.name}</div>\n                            <div class=\"cart-item-price\">Â¥${item.price}</div>\n                            <div class=\"cart-controls\">\n                                <button class=\"qty-btn\" onclick=\"changeQuantity(${item.id}, -1)\">-</button>\n                                <span>${item.quantity}</span>\n                                <button class=\"qty-btn\" onclick=\"changeQuantity(${item.id}, 1)\">+</button>\n                                <button class=\"remove-btn\" onclick=\"removeFromCart(${item.id})\">åˆ é™¤</button>\n                            </div>\n                        </div>\n                    `;\n                    cartItemsContainer.appendChild(div);\n                });\n            }\n\n            // 3. Update Totals\n            const subtotal = cart.reduce((sum, item) => sum + (item.originalPrice * item.quantity), 0);\n            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n            const discount = subtotal - total;\n\n            document.getElementById('cartSubtotal').textContent = `Â¥${subtotal.toFixed(2)}`;\n            document.getElementById('cartDiscount').textContent = `-Â¥${discount.toFixed(2)}`;\n            document.getElementById('cartTotal').textContent = `Â¥${total.toFixed(2)}`;\n        }\n\n        function toggleCart() {\n            cartSidebar.classList.toggle('open');\n            overlay.classList.toggle('active');\n        }\n\n        function checkout() {\n            if (cart.length === 0) {\n                showToast('è´­ç‰©è½¦ä¸ºç©º', true);\n                return;\n            }\n            alert(`æ„Ÿè°¢è´­ä¹°ï¼å…±æ”¯ä»˜ Â¥${document.getElementById('cartTotal').textContent}ã€‚`);\n            cart = [];\n            saveCart();\n            updateCartUI();\n            toggleCart();\n        }\n\n        // --- UI Effects ---\n        function animateCartIcon() {\n            cartCountEl.classList.add('bump');\n            setTimeout(() => cartCountEl.classList.remove('bump'), 200);\n        }\n\n        function showToast(msg, isError = false) {\n            const toast = document.getElementById('toast');\n            const toastMsg = document.getElementById('toastMsg');\n            toastMsg.textContent = msg;\n            toast.querySelector('span').textContent = isError ? 'âš ï¸' : 'âœ…';\n            toast.classList.add('show');\n            \n            setTimeout(() => {\n                toast.classList.remove('show');\n            }, 3000);\n        }\n\n        function startCountdown() {\n            // Set countdown for 2 hours from now for demo purposes\n            let duration = 2 * 60 * 60; \n            const display = document.getElementById('countdownTimer');\n\n            setInterval(() => {\n                let hours = Math.floor(duration / 3600);\n                let minutes = Math.floor((duration % 3600) / 60);\n                let seconds = duration % 60;\n\n                hours = hours < 10 ? \"0\" + hours : hours;\n                minutes = minutes < 10 ? \"0\" + minutes : minutes;\n                seconds = seconds < 10 ? \"0\" + seconds : seconds;\n\n                display.textContent = `â³ ä¼˜æƒ å€’è®¡æ—¶: ${hours}:${minutes}:${seconds}`;\n\n                if (--duration < 0) {\n                    duration = 2 * 60 * 60; // Reset loop\n                }\n            }, 1000);\n        }\n    </script>\n</body>\n</html>"
    }
  ]
}