{
  "brief": [
    {
      "topic": "brief",
      "sender": "User",
      "content": "\n请创建一个包含 HTML、CSS 和 JavaScript 的**单文件（Single HTML File）**电商产品详情页。\n\n# Product Context\n我们需要为一款春节热销零食电商销售网页。\n\n品牌为 LYF 的新疆葵花籽（30g 小包装），售价为 10 包 16.9 元，网页销售场景。\n网页必须包含 4P 营销要素：产品（外观图、规格介绍、卖点文案）、价格（现价、对比价格、优惠信息）、渠道（明确的网页购买入口与购物流程）、促销（促销标签、库存或限时购买激励）。\n\n# Functional Requirements (功能需求)\n1.  实现合理的布局结构：尽量包含搜索栏目、导航栏、产品介绍、交互、详情信息等\n    可插入如下图片作为产品预览图\n     1 张大图链接“https://www.foodnext.net/dispPageBox/getFile/GetImg.aspx?FileLocation=%2FPJ-FOODNEXT%2FFiles%2F&FileName=photo-44541-i.jpg”\n    缩略图1“https://pic1.zhimg.com/v2-0a72a4246fde463055bbcd021d58d6b0_1440w.jpg?source=172ae18b”\n    缩略图2“https://www.foodnext.net/dispPageBox/getFile/GetImg.aspx?FileLocation=%2FPJ-FOODNEXT%2FFiles%2F&FileName=photo-44541-i.jpg”\n\n额外功能：\n1.营销倒计时系统 (Complex Logic)：在价格旁显示“春节限时抢购倒计时”。\n\n2. 优惠券与价格计算 (State Management)界面中间需展示两张优惠券：\nA券：满 10 减 2 元\nB券：满 20 减 5 元\n\n4. 评论区筛选器 (DOM Manipulation)\n展示评论列表。\n\n5. 模态框购物车 (UI Interaction)\n点击底部的“立即购买”按钮，不跳转，而是从底部弹出一个半透明遮罩层 + 确认面板（Slide-up Modal）。\n面板内显示：已选商品信息、最终计算后的价格。\n包含“确认支付”按钮，点击后 alert 输出最终订单信息对象。\n6.随机优化功能\n"
    }
  ],
  "tasks": [
    {
      "topic": "tasks",
      "sender": "TeamLeader",
      "content": {
        "available_roles": [
          "TeamLeader",
          "PM",
          "Architect",
          "Engineer"
        ],
        "tasks": [
          {
            "role": "TeamLeader",
            "tasks": [
              "梳理客户需求，确认交付物为完整单文件电商产品详情页（包含 HTML、CSS、JavaScript）",
              "明确需包含春节限时抢购倒计时、优惠券计算、评论筛选器、底部 slide-up 模态购物车等功能",
              "划分任务并分配至 PM、Architect、Engineer"
            ]
          },
          {
            "role": "PM",
            "tasks": [
              "整理客户需求为结构化 PRD，包括产品信息、4P 营销要素、布局要求、功能需求清单",
              "在 PRD 中明确图片资源链接及其用途",
              "明确优惠券规则和价格计算逻辑",
              "描述评论筛选器交互流程",
              "定义模态购物车的触发方式与数据结构"
            ]
          },
          {
            "role": "Architect",
            "tasks": [
              "根据 PRD 设计页面信息架构",
              "划分主要区域：搜索栏、导航栏、产品图与介绍区、价格与倒计时区、优惠券区、详情描述区、评论区、底部购买按钮",
              "设计组件结构与模块间的数据流",
              "制定 HTML 结构、CSS 模块化方案及 JS 模块分工",
              "考虑响应式布局以适配不同设备"
            ]
          },
          {
            "role": "Engineer",
            "tasks": [
              "根据 Architect 方案编写完整单文件 HTML 包含 CSS 和 JS",
              "实现页面布局及样式",
              "插入大图与缩略图并实现预览切换",
              "实现春节限时抢购倒计时逻辑",
              "编写优惠券选择与价格计算的状态管理代码",
              "实现评论列表与筛选器交互",
              "实现底部“立即购买”按钮触发的 slide-up 模态购物车及确认支付功能",
              "在确认支付时 alert 输出订单信息对象",
              "完成随机优化功能（如随机推荐产品或动态效果）"
            ]
          }
        ]
      }
    }
  ],
  "prd": [
    {
      "topic": "prd",
      "sender": "PM",
      "content": {
        "product": "LYF 新疆葵花籽春节热销单品电商详情页（单文件版）",
        "goals": [
          "在春节期间提升 LYF 新疆葵花籽的线上销量",
          "展示完整的 4P 营销要素以吸引用户购买",
          "提供直观的购买入口和简洁的购物流程",
          "通过限时倒计时和促销优惠券提高转化率",
          "优化用户体验，包括评论筛选和模态购物车交互",
          "实现优惠券与价格的动态计算逻辑",
          "增加随机优化功能提升网页活跃度和趣味性"
        ],
        "target_users": [
          "春节期间寻找高质量零食礼品的消费者，痛点是希望快速了解产品信息和优惠活动",
          "经常网购零食的年轻用户，痛点是希望价格透明、优惠直观、购买流程简便",
          "对新疆特色零食有兴趣的美食爱好者，痛点是需要详细规格和口味介绍以确认购买"
        ],
        "page_sections": [
          {
            "id": "search-bar",
            "purpose": "提供站内搜索入口，便于用户快速找到所需产品"
          },
          {
            "id": "nav-bar",
            "purpose": "呈现主要导航菜单，让用户可以浏览其他相关商品或页面"
          },
          {
            "id": "product-gallery",
            "purpose": "展示产品大图与缩略图，用户可查看不同视角的产品外观"
          },
          {
            "id": "product-info",
            "purpose": "显示产品名称、规格介绍与卖点文案，帮助用户快速理解产品价值"
          },
          {
            "id": "price-and-countdown",
            "purpose": "呈现现价、对比价及春节限时抢购倒计时，制造购买紧迫感"
          },
          {
            "id": "coupon-section",
            "purpose": "提供可选择的优惠券信息，并执行满减价格计算"
          },
          {
            "id": "detail-description",
            "purpose": "产品详细描述、产地、配料、储存方式等信息"
          },
          {
            "id": "review-section",
            "purpose": "展示用户评论列表并支持筛选功能，帮助用户查看真实反馈"
          },
          {
            "id": "buy-button",
            "purpose": "在页面底部提供“立即购买”按钮，触发模态购物车交互"
          },
          {
            "id": "cart-modal",
            "purpose": "slide-up 弹窗展示已选商品信息与最终价格，并提供确认支付操作"
          },
          {
            "id": "random-optimization",
            "purpose": "实现随机优化功能，如随机推荐其他热销产品或动态效果以提升用户参与度"
          }
        ]
      }
    }
  ],
  "page_spec": [
    {
      "topic": "page_spec",
      "sender": "Architect",
      "content": {
        "layout": "two-column",
        "colors": [
          "#D32F2F",
          "#FFEB3B",
          "primary",
          "#F4F4F5",
          "secondary"
        ],
        "components": [
          {
            "id": "search-bar",
            "html": "header",
            "children": [
              {
                "tag": "input",
                "content_hint": "搜索产品输入框"
              },
              {
                "tag": "button",
                "content_hint": "搜索按钮"
              }
            ]
          },
          {
            "id": "nav-bar",
            "html": "nav",
            "children": [
              {
                "tag": "ul",
                "content_hint": "导航菜单列表"
              }
            ]
          },
          {
            "id": "product-gallery",
            "html": "section",
            "children": [
              {
                "tag": "img",
                "content_hint": "产品大图展示"
              },
              {
                "tag": "div",
                "content_hint": "缩略图列表"
              }
            ]
          },
          {
            "id": "product-info",
            "html": "section",
            "children": [
              {
                "tag": "h1",
                "content_hint": "产品标题：LYF 新疆葵花籽（30g*10包）"
              },
              {
                "tag": "p",
                "content_hint": "规格介绍与卖点文案"
              }
            ]
          },
          {
            "id": "price-and-countdown",
            "html": "section",
            "children": [
              {
                "tag": "p",
                "content_hint": "现价显示"
              },
              {
                "tag": "p",
                "content_hint": "对比价格或原价"
              },
              {
                "tag": "div",
                "content_hint": "春节限时抢购倒计时区域"
              }
            ]
          },
          {
            "id": "coupon-section",
            "html": "section",
            "children": [
              {
                "tag": "div",
                "content_hint": "A券：满10减2元"
              },
              {
                "tag": "div",
                "content_hint": "B券：满20减5元"
              }
            ]
          },
          {
            "id": "detail-description",
            "html": "main",
            "children": [
              {
                "tag": "p",
                "content_hint": "产品详细描述：产地、配料、储存方式等"
              }
            ]
          },
          {
            "id": "review-section",
            "html": "section",
            "children": [
              {
                "tag": "select",
                "content_hint": "评论筛选下拉菜单"
              },
              {
                "tag": "ul",
                "content_hint": "评论列表"
              }
            ]
          },
          {
            "id": "buy-button",
            "html": "footer",
            "children": [
              {
                "tag": "button",
                "content_hint": "立即购买按钮"
              }
            ]
          },
          {
            "id": "cart-modal",
            "html": "aside",
            "children": [
              {
                "tag": "div",
                "content_hint": "已选商品信息展示"
              },
              {
                "tag": "p",
                "content_hint": "最终价格"
              },
              {
                "tag": "button",
                "content_hint": "确认支付按钮"
              }
            ]
          },
          {
            "id": "random-optimization",
            "html": "section",
            "children": [
              {
                "tag": "div",
                "content_hint": "随机推荐其他热销产品或动态效果"
              }
            ]
          }
        ]
      }
    }
  ],
  "html": [
    {
      "topic": "html",
      "sender": "Engineer",
      "content": "<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n<meta charset=\"UTF-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n<title>LYF 新疆葵花籽 春节热销详情页</title>\n<style>\nbody{margin:0;font-family:\"微软雅黑\",sans-serif;background:#F4F4F5;color:#333;}\nheader,nav,section,main,footer,aside{padding:10px;}\nheader{background:#D32F2F;color:#fff;display:flex;justify-content:center;align-items:center;}\nheader input{flex:1;padding:8px;border:none;border-radius:4px;}\nheader button{background:#FFEB3B;border:none;padding:8px 12px;margin-left:8px;border-radius:4px;cursor:pointer;}\nnav{background:#fff;}\nnav ul{list-style:none;display:flex;gap:10px;margin:0;padding:0;}\nnav li{padding:5px 10px;background:#FFEB3B;border-radius:4px;cursor:pointer;}\n#product-gallery{display:flex;gap:15px;background:#fff;}\n#product-gallery img.main-image{width:300px;height:auto;border:2px solid #ddd;border-radius:4px;}\n#product-gallery .thumbnails img{width:80px;height:auto;border:1px solid #ccc;cursor:pointer;margin-right:5px;}\n#product-info{background:#fff;}\n#product-info h1{margin:0;color:#D32F2F;}\n.price-box{display:flex;gap:10px;align-items:center;}\n.price-box .current-price{font-size:1.5em;color:#D32F2F;}\n.price-box .old-price{text-decoration:line-through;color:#888;}\n#countdown{font-weight:bold;color:#D32F2F;}\n#coupon-section{display:flex;gap:10px;background:#fff;padding:10px;}\n.coupon{border:2px dashed #D32F2F;padding:10px;border-radius:8px;cursor:pointer;flex:1;text-align:center;}\n.coupon.active{background:#FFEB3B;}\nmain{background:#fff;}\n#review-section{background:#fff;}\n#review-section select{margin-bottom:10px;padding:5px;}\n#review-section ul{list-style:none;padding:0;}\n#review-section li{border-bottom:1px solid #eee;padding:8px 0;}\nfooter{position:fixed;bottom:0;left:0;right:0;background:#D32F2F;text-align:center;padding:10px;}\nfooter button{background:#FFEB3B;border:none;padding:12px 20px;border-radius:4px;font-size:1.2em;cursor:pointer;}\n#cart-modal{position:fixed;left:0;right:0;bottom:-100%;background:rgba(255,255,255,0.95);transition:bottom 0.3s;box-shadow:0 -2px 10px rgba(0,0,0,0.3);padding:20px;}\n#cart-modal.show{bottom:0;}\n#cart-modal .modal-content{max-width:400px;margin:auto;text-align:center;}\n#random-optimization{background:#fff;margin-top:10px;}\n/* Responsive */\n@media(max-width:600px){\n  #product-gallery{flex-direction:column;align-items:center;}\n}\n</style>\n</head>\n<body>\n\n<header id=\"search-bar\">\n  <input type=\"text\" placeholder=\"搜索零食\">\n  <button>搜索</button>\n</header>\n\n<nav id=\"nav-bar\">\n  <ul>\n    <li>首页</li>\n    <li>春节专区</li>\n    <li>零食分类</li>\n    <li>我的订单</li>\n  </ul>\n</nav>\n\n<section id=\"product-gallery\">\n  <img src=\"https://www.foodnext.net/dispPageBox/getFile/GetImg.aspx?FileLocation=%2FPJ-FOODNEXT%2FFiles%2F&FileName=photo-44541-i.jpg\" alt=\"新疆葵花籽\" class=\"main-image\" id=\"mainImage\">\n  <div class=\"thumbnails\">\n    <img src=\"https://pic1.zhimg.com/v2-0a72a4246fde463055bbcd021d58d6b0_1440w.jpg?source=172ae18b\" alt=\"缩略图1\" onclick=\"switchImage(this)\">\n    <img src=\"https://www.foodnext.net/dispPageBox/getFile/GetImg.aspx?FileLocation=%2FPJ-FOODNEXT%2FFiles%2F&FileName=photo-44541-i.jpg\" alt=\"缩略图2\" onclick=\"switchImage(this)\">\n  </div>\n</section>\n\n<section id=\"product-info\">\n  <h1>LYF 新疆葵花籽（30g×10包）</h1>\n  <p>来自新疆优质葵花籽，颗粒饱满，香脆可口，独立小包装，方便分享，春节送礼佳品。</p>\n</section>\n\n<section id=\"price-and-countdown\">\n  <div class=\"price-box\">\n    <span class=\"current-price\" id=\"currentPrice\">￥16.9</span>\n    <span class=\"old-price\">￥22.9</span>\n  </div>\n  <div>春节限时抢购倒计时：<span id=\"countdown\"></span></div>\n</section>\n\n<section id=\"coupon-section\">\n  <div class=\"coupon\" data-discount=\"{\\\"threshold\\\":10,\\\"reduce\\\":2}\">A券：满10减2元</div>\n  <div class=\"coupon\" data-discount=\"{\\\"threshold\\\":20,\\\"reduce\\\":5}\">B券：满20减5元</div>\n</section>\n\n<main id=\"detail-description\">\n  <p>产地：新疆<br>配料：葵花籽、食用盐<br>储存方式：请置于阴凉干燥处，避免阳光直射。</p>\n</main>\n\n<section id=\"review-section\">\n  <select id=\"reviewFilter\">\n    <option value=\"all\">全部评论</option>\n    <option value=\"good\">好评</option>\n    <option value=\"mid\">中评</option>\n    <option value=\"bad\">差评</option>\n  </select>\n  <ul id=\"reviewList\">\n    <li data-type=\"good\">籽香味足，包装干净！</li>\n    <li data-type=\"mid\">味道还行，就是量少。</li>\n    <li data-type=\"bad\">有点潮湿，不太香。</li>\n  </ul>\n</section>\n\n<section id=\"random-optimization\">\n  <div id=\"randomRec\"></div>\n</section>\n\n<footer id=\"buy-button\">\n  <button onclick=\"showCart()\">立即购买</button>\n</footer>\n\n<aside id=\"cart-modal\">\n  <div class=\"modal-content\">\n    <div id=\"cartInfo\">商品：LYF 新疆葵花籽 ×10包</div>\n    <p>最终价格：<span id=\"finalPrice\"></span></p>\n    <button onclick=\"confirmPay()\">确认支付</button>\n  </div>\n</aside>\n\n<script>\nfunction switchImage(el){document.getElementById('mainImage').src=el.src;}\nfunction countdownTimer(){\n  let end=new Date();end.setHours(end.getHours()+2);\n  let timer=setInterval(()=>{\n    let diff=end-new Date();\n    if(diff<=0){clearInterval(timer);document.getElementById('countdown').innerText='活动已结束';return;}\n    let h=Math.floor(diff/1000/60/60);\n    let m=Math.floor((diff/1000/60)%60);\n    let s=Math.floor((diff/1000)%60);\n    document.getElementById('countdown').innerText=`${h}小时${m}分${s}秒`;\n  },1000);\n}\ncountdownTimer();\n\n// 优惠券选择与价格计算\nlet selectedCoupon=null;\ndocument.querySelectorAll('.coupon').forEach(c=>{\n  c.addEventListener('click',()=>{\n    document.querySelectorAll('.coupon').forEach(cc=>cc.classList.remove('active'));\n    c.classList.add('active');\n    selectedCoupon=JSON.parse(c.dataset.discount);\n    updateFinalPrice();\n  });\n});\nfunction updateFinalPrice(){\n  let price=16.9;\n  if(selectedCoupon && price>=selectedCoupon.threshold){\n    price-=selectedCoupon.reduce;\n  }\n  document.getElementById('finalPrice').innerText='￥'+price.toFixed(2);\n}\n\n// 评论筛选\ndocument.getElementById('reviewFilter').addEventListener('change',function(){\n  let type=this.value;\n  document.querySelectorAll('#reviewList li').forEach(li=>{\n    if(type==='all'||li.dataset.type===type){li.style.display='list-item';}\n    else{li.style.display='none';}\n  });\n});\n\n// 模态购物车\nfunction showCart(){\n  updateFinalPrice();\n  document.getElementById('cart-modal').classList.add('show');\n}\nfunction confirmPay(){\n  let order={product:\"LYF 新疆葵花籽 ×10包\",price:document.getElementById('finalPrice').innerText};\n  alert(JSON.stringify(order));\n  document.getElementById('cart-modal').classList.remove('show');\n}\n\n// 随机推荐功能\nfunction randomOptimization(){\n  let products=[\"新疆葡萄干\",\"内蒙古奶片\",\"西北核桃仁\"];\n  let rec=products[Math.floor(Math.random()*products.length)];\n  document.getElementById('randomRec').innerText=`为您随机推荐：${rec}`;\n}\nrandomOptimization();\n</script>\n\n</body>\n</html>"
    }
  ]
}