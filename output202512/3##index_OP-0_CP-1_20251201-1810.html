<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LYF 春节香瓜子大促</title>
<style>
    body {
        margin: 0;
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        background-color: #fff5f5;
        color: #333;
    }
    header {
        background-color: #E4393C;
        color: #fff;
        text-align: center;
        padding: 1rem;
    }
    header h1 {
        margin: 0;
        font-size: 1.5rem;
        letter-spacing: 1px;
    }
    main {
        max-width: 768px;
        margin: 0 auto;
        padding: 1rem;
    }
    .product-section {
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        padding: 1rem;
        margin-bottom: 1rem;
    }
    .product-image {
        width: 100%;
        border-radius: 8px;
    }
    .product-info h2 {
        font-size: 1.2rem;
        color: #E4393C;
        margin: 0.5rem 0;
    }
    .product-info p {
        font-size: 0.9rem;
        line-height: 1.4;
    }
    .price-section {
        display: flex;
        align-items: baseline;
        gap: 0.5rem;
        margin-top: 0.5rem;
    }
    .current-price {
        font-size: 1.5rem;
        color: #E4393C;
        font-weight: bold;
    }
    .original-price {
        font-size: 0.9rem;
        text-decoration: line-through;
        color: #999;
    }
    .promo-tag {
        display: inline-block;
        background-color: #ffdf00;
        color: #E4393C;
        padding: 0.2rem 0.5rem;
        border-radius: 4px;
        font-size: 0.8rem;
        margin-top: 0.5rem;
    }
    .stock-info {
        font-size: 0.85rem;
        color: #555;
        margin-top: 0.5rem;
    }
    .countdown {
        font-size: 0.9rem;
        margin-top: 0.5rem;
        color: #E4393C;
        font-weight: bold;
    }
    .purchase-section {
        margin-top: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    .quantity-input {
        width: 60px;
        padding: 0.3rem;
        font-size: 1rem;
        text-align: center;
        border: 1px solid #ccc;
        border-radius: 4px;
    }
    .add-to-cart-btn {
        flex: 1;
        padding: 0.5rem;
        font-size: 1rem;
        background-color: #E4393C;
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
    .cart-section {
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        padding: 1rem;
        margin-bottom: 1rem;
    }
    .cart-section h3 {
        font-size: 1rem;
        margin-top: 0;
    }
    .cart-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.5rem 0;
        border-bottom: 1px solid #f0f0f0;
    }
    .cart-item span {
        font-size: 0.9rem;
    }
    .remove-btn {
        background-color: transparent;
        border: none;
        color: #E4393C;
        cursor: pointer;
        font-size: 0.9rem;
    }
    .checkout-btn {
        margin-top: 0.5rem;
        width: 100%;
        padding: 0.5rem;
        font-size: 1rem;
        background-color: #ff8000;
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
    @media (max-width: 480px) {
        .price-section {
            flex-direction: column;
            align-items: flex-start;
        }
        .purchase-section {
            flex-direction: column;
            align-items: stretch;
        }
        .add-to-cart-btn {
            width: 100%;
        }
    }
</style>
</head>
<body>
<header>
    <h1>LYF 春节年货大促</h1>
</header>
<main>
    <section class="product-section">
        <img src="https://gw.alicdn.com/imgextra/i3/3195305016/O1CN01FpNUtD1mvNZJLQUHu_!!3195305016.jpg_Q75.jpg_.webp" alt="香瓜子葵花子" class="product-image">
        <div class="product-info">
            <h2>香瓜子葵花子 30g*10包</h2>
            <p>精选优质葵花籽，香脆可口，春节零食必备！小包装方便携带，适合全家分享。</p>
            <div class="price-section">
                <span class="current-price">¥16.9</span>
                <span class="original-price">¥29.9</span>
            </div>
            <div class="promo-tag">限时优惠</div>
            <div class="stock-info">库存紧张，仅剩 <span id="stock-count">50</span> 份</div>
            <div class="countdown">活动剩余：<span id="countdown-timer">00:00:00</span></div>
            <div class="purchase-section">
                <input type="number" id="quantity" class="quantity-input" min="1" value="1">
                <button class="add-to-cart-btn" id="add-to-cart">加入购物车</button>
            </div>
        </div>
    </section>
    <section class="cart-section">
        <h3>购物车</h3>
        <div id="cart-items"></div>
        <button class="checkout-btn" id="checkout">去结算</button>
    </section>
</main>
<script>
    const stockCountEl = document.getElementById('stock-count');
    const countdownEl = document.getElementById('countdown-timer');
    const quantityEl = document.getElementById('quantity');
    const addToCartBtn = document.getElementById('add-to-cart');
    const cartItemsEl = document.getElementById('cart-items');
    const checkoutBtn = document.getElementById('checkout');
    
    let stockCount = parseInt(localStorage.getItem('stockCount')) || 50;
    stockCountEl.textContent = stockCount;

    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    function renderCart() {
        cartItemsEl.innerHTML = '';
        if (cart.length === 0) {
            cartItemsEl.innerHTML = '<p>购物车空空如也</p>';
            return;
        }
        cart.forEach((item, index) => {
            const div = document.createElement('div');
            div.className = 'cart-item';
            div.innerHTML = `
                <span>${item.name} x ${item.quantity}</span>
                <span>¥${(item.price * item.quantity).toFixed(2)}</span>
                <button class="remove-btn" onclick="removeFromCart(${index})">移除</button>
            `;
            cartItemsEl.appendChild(div);
        });
    }

    function removeFromCart(index) {
        stockCount += cart[index].quantity;
        localStorage.setItem('stockCount', stockCount);
        cart.splice(index, 1);
        localStorage.setItem('cart', JSON.stringify(cart));
        stockCountEl.textContent = stockCount;
        renderCart();
    }

    addToCartBtn.addEventListener('click', () => {
        const quantity = parseInt(quantityEl.value);
        if (quantity > stockCount) {
            alert('库存不足');
            return;
        }
        stockCount -= quantity;
        localStorage.setItem('stockCount', stockCount);
        stockCountEl.textContent = stockCount;
        cart.push({ name: '香瓜子葵花子 30g*10包', price: 16.9, quantity });
        localStorage.setItem('cart', JSON.stringify(cart));
        renderCart();
    });

    checkoutBtn.addEventListener('click', () => {
        if (cart.length === 0) {
            alert('购物车为空');
            return;
        }
        alert('感谢您的购买！');
        cart = [];
        localStorage.setItem('cart', JSON.stringify(cart));
        renderCart();
    });

    function startCountdown(duration) {
        let timer = duration, hours, minutes, seconds;
        setInterval(() => {
            hours = parseInt(timer / 3600, 10);
            minutes = parseInt((timer % 3600) / 60, 10);
            seconds = parseInt(timer % 60, 10);

            hours = hours < 10 ? "0" + hours : hours;
            minutes = minutes < 10 ? "0" + minutes : minutes;
            seconds = seconds < 10 ? "0" + seconds : seconds;
            countdownEl.textContent = hours + ":" + minutes + ":" + seconds;

            if (--timer < 0) {
                timer = 0;
            }
        }, 1000);
    }

    renderCart();
    startCountdown(3600); // 1小时倒计时
</script>
</body>
</html>