{
  "brief": [
    {
      "topic": "brief",
      "sender": "User",
      "content": "\n请创建一个包含 HTML、CSS 和 JavaScript 的**单文件（Single HTML File）**电商产品详情页。该网页必须是一个完整的、可交互的原型。\n\n# Product Context\n我们需要为一款春节热销零食制作落地页，模仿京东（JD.com）的移动端/PC端响应式布局风格。\n* **品牌**：LYF\n* **商品名称**：新疆原产葵花籽（30g 独立小包装）\n* **价格策略**：10包组合装，售价 16.9 元。\n\n# Functional Requirements (功能需求)\n1.  **布局结构**：\n    * **顶部**：简单的导航栏（包含 Logo 占位符和搜索框占位符）。\n    * **左侧/顶部（视宽度而定）**：产品主图展示区。包含 1 张大图和 2 张缩略图。点击缩略图需切换大图。\n     1 张大图链接“https://detail.1688.com/offer/988089985291.html?spm=a261b.8768355.pic-list.30.432360cd4VYDtD”\n    缩略图1“https://detail.1688.com/offer/981519203786.html?spm=a261b.8768355.pic-list.16.424760cd9rabYd”\n    缩略图2“https://detail.1688.com/offer/990628769471.html?spm=a261b.8768355.pic-list.7.667160cdECaV86”\n    * **右侧/底部（视宽度而定）**：产品信息区。包含标题、红色价格高亮、促销标签（“春节特惠”、“包邮”）。\n    * **交互区**：数量选择器（支持 +/-，且数量不能小于 1），以及“立即购买”和“加入购物车”两个按钮。\n    * **详情区**：页面底部需包含 Tab 切换功能（“商品介绍” vs “售后保障”），点击 Tab 切换显示不同文本内容。\n\n2.  **核心逻辑 (JavaScript)**：\n    * **数量联动**：默认数量为 1。点击 +/- 按钮更新数量，并实时更新“总价”（Total Price = 16.9 * 数量）。结果保留 1 位小数。\n    * **购物车反馈**：点击“加入购物车”后，弹出轻提示（Toast Notification）：\"已成功加入购物车：LYF葵花籽 x [数量]\"，2秒后自动消失。\n    * **图片切换**：鼠标悬停或点击缩略图时，主图需平滑切换。\n\n3.  **UI/Design Requirements (设计规范)**：\n    * **配色**：主色调使用京东红（#f23030 或类似），背景色为浅灰（#f6f6f6），内容区为白色。\n    * **图片处理**：由于无法访问外部图库，请使用 placeholder 图片服务（如 `https://via.placeholder.com/400x400?text=LYF+Product`）来生成不同颜色的占位图，确保页面不出现破图。\n    * **响应式**：页面需适配手机端和 PC 端（使用 Flexbox 或 Grid 布局）。\n4.营销倒计时系统 (Complex Logic)\n在价格旁显示“春节限时抢购倒计时”。\n逻辑要求：倒计时设定为 2 小时 0 分 0 秒。必须实时跳动（每秒 -1）。\n边界状态：当倒计时归零时，按钮变为灰色“活动已结束”，且不可点击。\n\n5. 优惠券与价格计算 (State Management)\n界面中间需展示两张优惠券：\nA券：满 10 减 2 元\nB券：满 20 减 5 元\n\n6.交互逻辑：\n用户点击优惠券可“领取”（变为高亮状态，只能选一张）。\n数量选择器调整商品数量时，**总价（Total Price）**必须根据（单价 * 数量 - 优惠券金额）实时重新计算。\n如果总价不满足优惠券门槛，优惠券自动失效（取消高亮）。\n\n7. 评论区筛选器 (DOM Manipulation)\n展示评论列表。\n顶部有 Filter 按钮：“全部”、“好评”、“中评”。\n交互逻辑：点击不同按钮，下方评论列表必须根据 productData.reviews 数组进行实时过滤并重新渲染 DOM。\n\n8. 模态框购物车 (UI Interaction)\n点击底部的“立即购买”按钮，不跳转，而是从底部弹出一个半透明遮罩层 + 确认面板（Slide-up Modal）。\n面板内显示：已选商品信息、最终计算后的价格。\n包含“确认支付”按钮，点击后 alert 输出最终订单信息对象。\n\n# Technical Constraints (技术约束)\n* 所有代码（HTML, CSS, JS）必须包含在一个 HTML 文件中，CSS 放 `<style>`，JS 放 `<script>`。\n* 代码结构清晰，有注释，不依赖 React/Vue 等外部框架，使用原生 Vanilla JS。\n* CSS 需处理好按钮的 hover 状态和阴影细节，体现电商的高级感。\n"
    }
  ],
  "tasks": [
    {
      "topic": "tasks",
      "sender": "TeamLeader",
      "content": {
        "available_roles": [
          "TeamLeader",
          "Engineer"
        ],
        "tasks": [
          {
            "role": "TeamLeader",
            "tasks": [
              "梳理客户需求，确认页面需要包含的结构和交互",
              "划分交付物：单文件HTML电商详情页原型，内含HTML、CSS、JavaScript",
              "明确功能点：导航栏、产品图展示、产品信息区、数量选择器、立即购买/加入购物车、详情Tab切换、优惠券系统、倒计时系统、评论过滤器、购物车弹出模态",
              "规定技术约束：全部代码放在单文件中，CSS使用<style>标签，JS使用<script>标签，原生Vanilla JS",
              "确定设计规范与色彩风格，响应式布局适配PC/移动端"
            ]
          },
          {
            "role": "Engineer",
            "tasks": [
              "构建HTML结构，包含导航栏、产品主图和缩略图、产品信息及交互按钮、详情区tab结构、优惠券展示区、评论区及筛选按钮、模态框面板",
              "编写CSS样式实现京东红主色、浅灰背景、白色内容区，Flexbox/Grid实现响应式布局，设计按钮hover阴影效果",
              "实现数量选择器 +/- 控制逻辑，数量不得小于1，实时计算总价并保留一位小数",
              "实现优惠券点击领取高亮并限制只能选一张，价格实时计算并根据门槛自动取消高亮",
              "实现购物车轻提示（Toast）功能点击加入购物车显示并2秒后消失",
              "实现缩略图悬停/点击切换主图的平滑切换效果",
              "实现春节限时抢购倒计时，从2小时开始递减至0秒，倒计时归零禁用购买按钮并显示灰色提示",
              "实现详情区Tab切换显示不同内容",
              "实现评论区筛选按钮点击动态过滤productData.reviews并更新DOM",
              "实现点击立即购买弹出半透明遮罩+底部滑动模态框，显示选中商品和最终价格，并提供确认支付按钮alert订单对象"
            ]
          }
        ]
      }
    }
  ],
  "html": [
    {
      "topic": "html",
      "sender": "Engineer",
      "content": "<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n<meta charset=\"UTF-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n<title>LYF新疆葵花籽 - 春节特惠</title>\n<style>\nbody {\n    margin: 0;\n    font-family: Arial, sans-serif;\n    background-color: #f6f6f6;\n}\nheader {\n    background-color: #fff;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 10px;\n    box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n}\nheader .logo {\n    font-weight: bold;\n    font-size: 18px;\n    color: #f23030;\n}\nheader .search {\n    flex: 1;\n    margin-left: 15px;\n}\nheader .search input {\n    width: 100%;\n    padding: 5px;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n}\nmain {\n    max-width: 1200px;\n    margin: auto;\n    background-color: #fff;\n    display: flex;\n    flex-wrap: wrap;\n    padding: 15px;\n}\n.product-images, .product-info {\n    flex: 1;\n    min-width: 300px;\n    margin: 10px;\n}\n.product-images img {\n    width: 100%;\n    border-radius: 4px;\n    transition: opacity 0.3s ease;\n}\n.thumbnails {\n    display: flex;\n    margin-top: 10px;\n}\n.thumbnails img {\n    width: 60px;\n    height: 60px;\n    margin-right: 10px;\n    cursor: pointer;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    transition: border-color 0.2s;\n}\n.thumbnails img:hover {\n    border-color: #f23030;\n}\n.product-title {\n    font-size: 20px;\n    font-weight: bold;\n    margin-bottom: 8px;\n}\n.price {\n    color: #f23030;\n    font-size: 24px;\n    font-weight: bold;\n}\n.labels span {\n    display: inline-block;\n    background-color: #ffecec;\n    color: #f23030;\n    margin-right: 5px;\n    padding: 2px 6px;\n    border-radius: 3px;\n    font-size: 12px;\n}\n.countdown {\n    color: #666;\n    margin: 8px 0;\n}\n.quantity-selector {\n    display: flex;\n    align-items: center;\n    margin: 10px 0;\n}\n.quantity-selector button {\n    width: 30px;\n    height: 30px;\n    background-color: #f23030;\n    color: #fff;\n    border: none;\n    cursor: pointer;\n    font-weight: bold;\n}\n.quantity-selector input {\n    width: 50px;\n    text-align: center;\n}\n.buttons {\n    margin-top: 10px;\n}\n.buttons button {\n    padding: 10px 20px;\n    margin-right: 10px;\n    border: none;\n    color: #fff;\n    background-color: #f23030;\n    cursor: pointer;\n    border-radius: 4px;\n    box-shadow: 0 2px 4px rgba(0,0,0,0.2);\n    transition: background-color 0.2s;\n}\n.buttons button:hover {\n    background-color: #d62828;\n}\n.buttons button.disabled {\n    background-color: #ccc;\n    cursor: not-allowed;\n    box-shadow: none;\n}\n.coupons {\n    display: flex;\n    margin: 15px 0;\n}\n.coupon {\n    flex: 1;\n    border: 1px dashed #f23030;\n    margin-right: 10px;\n    padding: 10px;\n    text-align: center;\n    cursor: pointer;\n    border-radius: 4px;\n}\n.coupon.active {\n    background-color: #f23030;\n    color: #fff;\n}\n.tabs {\n    margin-top: 20px;\n}\n.tab-buttons {\n    display: flex;\n    border-bottom: 1px solid #ccc;\n}\n.tab-buttons div {\n    flex: 1;\n    padding: 10px;\n    text-align: center;\n    cursor: pointer;\n}\n.tab-buttons .active {\n    border-bottom: 2px solid #f23030;\n    font-weight: bold;\n}\n.tab-content {\n    padding: 10px;\n}\n.reviews {\n    margin-top: 20px;\n}\n.review-filters {\n    margin-bottom: 10px;\n}\n.review-filters button {\n    margin-right: 8px;\n    padding: 5px 10px;\n    background-color: #f6f6f6;\n    border: 1px solid #ccc;\n    cursor: pointer;\n}\n.toast {\n    position: fixed;\n    bottom: 20px;\n    left: 50%;\n    transform: translateX(-50%);\n    background-color: rgba(0,0,0,0.7);\n    color: #fff;\n    padding: 10px 20px;\n    border-radius: 20px;\n    display: none;\n}\n.modal-overlay {\n    position: fixed;\n    top: 0;\n    left:0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0,0,0,0.4);\n    display: none;\n    justify-content: flex-end;\n    align-items: flex-end;\n}\n.modal {\n    background-color: #fff;\n    width: 100%;\n    max-height: 300px;\n    padding: 20px;\n    border-top-left-radius: 10px;\n    border-top-right-radius: 10px;\n    transform: translateY(100%);\n    transition: transform 0.3s ease;\n}\n.modal.show {\n    transform: translateY(0);\n}\n@media (max-width: 768px) {\n    main {\n        flex-direction: column;\n    }\n}\n</style>\n</head>\n<body>\n<header>\n    <div class=\"logo\">LOGO</div>\n    <div class=\"search\"><input type=\"text\" placeholder=\"搜索...\"></div>\n</header>\n<main>\n    <div class=\"product-images\">\n        <a href=\"https://detail.1688.com/offer/988089985291.html?spm=a261b.8768355.pic-list.30.432360cd4VYDtD\" target=\"_blank\">\n            <img src=\"https://via.placeholder.com/400x400?text=LYF+Product+Main\" id=\"mainImage\" alt=\"product\">\n        </a>\n        <div class=\"thumbnails\">\n            <img src=\"https://via.placeholder.com/60x60/ffcccc?text=Thumb1\" data-big=\"https://via.placeholder.com/400x400/ffcccc?text=LYF+Product+1\">\n            <img src=\"https://via.placeholder.com/60x60/ccffcc?text=Thumb2\" data-big=\"https://via.placeholder.com/400x400/ccffcc?text=LYF+Product+2\">\n        </div>\n    </div>\n    <div class=\"product-info\">\n        <div class=\"product-title\">LYF 新疆原产葵花籽（30g独立小包装）10包组合装</div>\n        <div class=\"price\">¥<span id=\"unitPrice\">16.9</span></div>\n        <div class=\"labels\"><span>春节特惠</span><span>包邮</span></div>\n        <div class=\"countdown\">春节限时抢购倒计时：<span id=\"countdown\">02:00:00</span></div>\n        <div class=\"quantity-selector\">\n            <button id=\"minus\">-</button>\n            <input type=\"number\" id=\"quantity\" value=\"1\" min=\"1\">\n            <button id=\"plus\">+</button>\n        </div>\n        <div>总价: ¥<span id=\"totalPrice\">16.9</span></div>\n        <div class=\"coupons\">\n            <div class=\"coupon\" data-threshold=\"10\" data-discount=\"2\">满10减2元</div>\n            <div class=\"coupon\" data-threshold=\"20\" data-discount=\"5\">满20减5元</div>\n        </div>\n        <div class=\"buttons\">\n            <button id=\"buyNow\">立即购买</button>\n            <button id=\"addCart\">加入购物车</button>\n        </div>\n    </div>\n</main>\n<div class=\"tabs\">\n    <div class=\"tab-buttons\">\n        <div class=\"tab-btn active\" data-tab=\"intro\">商品介绍</div>\n        <div class=\"tab-btn\" data-tab=\"service\">售后保障</div>\n    </div>\n    <div class=\"tab-content\" id=\"intro\">这是商品的详细介绍内容，描述新疆葵花籽的纯天然、独立包装、营养丰富等特点。</div>\n    <div class=\"tab-content\" id=\"service\" style=\"display:none\">这是售后保障内容，包括7天无理由退货、正品保证、快速发货等。</div>\n</div>\n<div class=\"reviews\">\n    <div class=\"review-filters\">\n        <button data-filter=\"all\">全部</button>\n        <button data-filter=\"good\">好评</button>\n        <button data-filter=\"neutral\">中评</button>\n    </div>\n    <div id=\"reviewList\"></div>\n</div>\n<div class=\"toast\" id=\"toast\"></div>\n<div class=\"modal-overlay\" id=\"modalOverlay\">\n    <div class=\"modal\" id=\"modal\">\n        <h3>确认订单</h3>\n        <p id=\"orderInfo\"></p>\n        <button id=\"confirmPay\">确认支付</button>\n    </div>\n</div>\n<script>\nconst unitPrice = 16.9;\nlet quantity = 1;\nlet selectedCoupon = null;\nconst quantityInput = document.getElementById('quantity');\nconst totalPriceSpan = document.getElementById('totalPrice');\nconst toast = document.getElementById('toast');\nconst countdownEl = document.getElementById('countdown');\nconst buyBtn = document.getElementById('buyNow');\nconst addCartBtn = document.getElementById('addCart');\nconst coupons = document.querySelectorAll('.coupon');\nfunction updateTotal() {\n    let discount = 0;\n    if (selectedCoupon) {\n        const threshold = parseFloat(selectedCoupon.dataset.threshold);\n        const disc = parseFloat(selectedCoupon.dataset.discount);\n        let rawTotal = unitPrice * quantity;\n        if (rawTotal >= threshold) {\n            discount = disc;\n        } else {\n            selectedCoupon.classList.remove('active');\n            selectedCoupon = null;\n        }\n    }\n    let finalTotal = unitPrice * quantity - discount;\n    totalPriceSpan.textContent = finalTotal.toFixed(1);\n}\ndocument.getElementById('plus').onclick = () => {\n    quantity++;\n    quantityInput.value = quantity;\n    updateTotal();\n};\ndocument.getElementById('minus').onclick = () => {\n    quantity = Math.max(1, quantity-1);\n    quantityInput.value = quantity;\n    updateTotal();\n};\nquantityInput.onchange = () => {\n    quantity = Math.max(1, parseInt(quantityInput.value) || 1);\n    quantityInput.value = quantity;\n    updateTotal();\n};\ncoupons.forEach(coupon=>{\n    coupon.onclick = () => {\n        if (selectedCoupon === coupon) {\n            coupon.classList.remove('active');\n            selectedCoupon = null;\n        } else {\n            coupons.forEach(c=>c.classList.remove('active'));\n            coupon.classList.add('active');\n            selectedCoupon = coupon;\n        }\n        updateTotal();\n    };\n});\nfunction showToast(message) {\n    toast.textContent = message;\n    toast.style.display = 'block';\n    setTimeout(()=>{toast.style.display='none';}, 2000);\n}\naddCartBtn.onclick = () => {\n    showToast(`已成功加入购物车：LYF葵花籽 x ${quantity}`);\n};\nconst thumbnails = document.querySelectorAll('.thumbnails img');\nconst mainImage = document.getElementById('mainImage');\nthumbnails.forEach(thumb=>{\n    thumb.addEventListener('mouseover', ()=> {\n        mainImage.style.opacity = 0;\n        setTimeout(()=>{\n            mainImage.src = thumb.dataset.big;\n            mainImage.style.opacity = 1;\n        },200);\n    });\n    thumb.addEventListener('click', ()=> {\n        mainImage.src = thumb.dataset.big;\n    });\n});\nlet remainingSeconds = 2*60*60;\nfunction formatTime(sec) {\n    let h = String(Math.floor(sec/3600)).padStart(2,'0');\n    let m = String(Math.floor((sec%3600)/60)).padStart(2,'0');\n    let s = String(sec%60).padStart(2,'0');\n    return `${h}:${m}:${s}`;\n}\nconst timer = setInterval(()=>{\n    remainingSeconds--;\n    countdownEl.textContent = formatTime(remainingSeconds);\n    if(remainingSeconds<=0){\n        clearInterval(timer);\n        buyBtn.classList.add('disabled');\n        buyBtn.textContent = '活动已结束';\n        buyBtn.disabled = true;\n        addCartBtn.classList.add('disabled');\n        addCartBtn.disabled = true;\n    }\n},1000);\ndocument.querySelectorAll('.tab-btn').forEach(btn=>{\n    btn.onclick = () => {\n        document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));\n        btn.classList.add('active');\n        document.querySelectorAll('.tab-content').forEach(tc=>tc.style.display='none');\n        document.getElementById(btn.dataset.tab).style.display='block';\n    };\n});\nconst productData = {\n    reviews: [\n        {type: 'good', text:'包装精美，味道很好'},\n        {type: 'good', text:'葵花籽香脆可口，超喜欢'},\n        {type: 'neutral', text:'味道一般般，物流快'},\n        {type: 'neutral', text:'价格还可以，包装不错'}\n    ]\n};\nfunction renderReviews(filter){\n    let list = document.getElementById('reviewList');\n    list.innerHTML = '';\n    let reviewsToShow = productData.reviews;\n    if(filter !== 'all'){\n        reviewsToShow = reviewsToShow.filter(r=>r.type===filter);\n    }\n    reviewsToShow.forEach(r=>{\n        const div = document.createElement('div');\n        div.textContent = r.text;\n        div.style.borderBottom = '1px solid #eee';\n        div.style.padding = '5px';\n        list.appendChild(div);\n    });\n}\ndocument.querySelectorAll('.review-filters button').forEach(btn=>{\n    btn.onclick = ()=>{\n        renderReviews(btn.dataset.filter);\n    };\n});\nrenderReviews('all');\nconst modalOverlay = document.getElementById('modalOverlay');\nconst modal = document.getElementById('modal');\nconst orderInfo = document.getElementById('orderInfo');\nbuyBtn.onclick = () => {\n    if(buyBtn.disabled) return;\n    modalOverlay.style.display = 'flex';\n    modal.classList.add('show');\n    orderInfo.textContent = `LYF葵花籽 x ${quantity}, 总价：¥${totalPriceSpan.textContent}`;\n};\nmodalOverlay.onclick = (e) => {\n    if(e.target===modalOverlay){\n        modalOverlay.style.display = 'none';\n        modal.classList.remove('show');\n    }\n};\ndocument.getElementById('confirmPay').onclick = () => {\n    const order = {\n        product: 'LYF葵花籽',\n        quantity: quantity,\n        total: parseFloat(totalPriceSpan.textContent),\n        coupon: selectedCoupon ? selectedCoupon.textContent : null\n    };\n    alert(JSON.stringify(order));\n};\n</script>\n</body>\n</html>"
    }
  ]
}